<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Êï∞Â≠¶ÈÄöËØÜ50ËÆ≤]]></title>
    <url>%2F2019%2F11%2F25%2F2019-11-25%2F</url>
    <content type="text"><![CDATA[00 ÔΩú ÂèëÂàäËØçÔºöÊï∞Â≠¶ËØ•ÊÄé‰πàÂ≠¶Ôºü Ê®°Âùó‰∏Ä ÔΩú Êï∞Â≠¶ÁöÑÁ∫øÁ¥¢ 01 ÔΩú ÂØºËÆ∫ÔºöÊï∞Â≠¶ÈÄöËØÜËØæÁöÑ‰ΩìÁ≥ªÂíåÂ≠¶‰π†ÊîªÁï• 02 ÔΩú ÂãæËÇ°ÂÆöÁêÜÔºö‰∏∫‰ªÄ‰πàÂú®Ë•øÊñπÂè´ÊØïËææÂì•ÊãâÊñØÂÆöÁêÜ 03 ÔΩú Êï∞Â≠¶ÁöÑÈ¢ÑËßÅÊÄßÔºöÂ¶Ç‰ΩïÁî®Êé®ÁêÜËµ∞Âá∫ËÆ§Áü•Áõ≤Âå∫ 04 ÔΩú Êï∞Â≠¶ÊÄùÁª¥ÔºöÊï∞Â≠¶ÂÆ∂Â¶Ç‰Ωï‰ªéÈÄªËæëÂá∫ÂèëÊÉ≥ÈóÆÈ¢ò 05 ÔΩú Êï∞Â≠¶ËæπÁïåÔºö‰ªéÊØïËææÂì•ÊãâÊñØÂÆöÁêÜÂà∞Ë¥πÈ©¨Â§ßÂÆöÁêÜ 06 ÔΩú ÈªÑÈáëÂàÜÂâ≤ÔºöÊØïËææÂì•ÊãâÊñØÂ¶Ç‰ΩïËøûÊé•Êï∞Â≠¶ÂíåÁæéÂ≠¶ 07 ÔΩú Êï∞Â≠¶Â∫îÁî®ÔºöÂçéÁΩóÂ∫öÂåñÁπÅ‰∏∫ÁÆÄÁöÑÁ•ûÊù•‰πãÁ¨î 08 ÔΩú Êï∞ÂàóÂíåÁ∫ßÊï∞Ôºà‰∏ÄÔºâÔºöÂΩì‰∏ãÂæàÈáçË¶ÅÔºå‰ΩÜË∂ãÂäøÊõ¥ÈáçË¶Å 09 ÔΩú Êï∞ÂàóÂíåÁ∫ßÊï∞Ôºà‰∫åÔºâÔºö‰º†ÈîÄÈ™óÂ±ÄÁöÑÊï∞Â≠¶ÂéüÁêÜ 10 ÔΩú Êï∞ÂàóÂíåÁ∫ßÊï∞Ôºà‰∏âÔºâÔºöËóèÂú®Âà©ÊÅØÂíåÊúà‰æõÈáåÁöÑÁßòÂØÜ Ê®°Âùó‰∫å ÔΩú Êï∞Â≠¶ÁöÑÊ¶ÇÂøµ 11 ÔΩú È∏°ÂÖîÂêåÁ¨ºÔºöÊñπÁ®ãËøô‰∏™Êï∞Â≠¶Â∑•ÂÖ∑‰∏∫‰ªÄ‰πàÂæàÂº∫Â§ß 12 ÔΩú ‰∏âÊ¨°ÊñπÁ®ãÔºöÊï∞Â≠¶Âè≤‰∏äÁöÑÂèëÊòéÊùÉ‰πã‰∫â 13 ÔΩú ËôöÊï∞ÔºöËôöÊûÑËøô‰∏™Â∑•ÂÖ∑Êúâ‰ªÄ‰πàÁî® 14 ÔΩú Êó†Á©∑ÔºöÊàë‰ª¨‰∏∫‰ªÄ‰πàÈöæ‰ª•ÁêÜËß£Êó†ÈôêÁöÑ‰∏ñÁïåÔºü 15 ÔΩú Êó†Á©∑Â∞èÔºà‰∏ÄÔºâÔºöÂ¶Ç‰ΩïËØ¥ÊúçÊù†Á≤æ‚ÄúËäùËØ∫‚ÄùÔºü 16 ÔΩú Êó†Á©∑Â∞èÔºà‰∫åÔºâÔºöÁâõÈ°øÂíåË¥ùÂÖãËé±Âú®‰∫â‰ªÄ‰πàÔºü 17 ÔΩú Êó†Á©∑Â∞èÔºà‰∏âÔºâÔºöÁî®Âä®ÊÄÅÂíåÊûÅÈôêÁöÑÁúºÂÖâÁúã‰∏ñÁïå 00 ÔΩú ÂèëÂàäËØçÔºöÊï∞Â≠¶ËØ•ÊÄé‰πàÂ≠¶Ôºü# Ê®°Âùó‰∏Ä ÔΩú Êï∞Â≠¶ÁöÑÁ∫øÁ¥¢# 01 ÔΩú ÂØºËÆ∫ÔºöÊï∞Â≠¶ÈÄöËØÜËØæÁöÑ‰ΩìÁ≥ªÂíåÂ≠¶‰π†ÊîªÁï•# 02 ÔΩú ÂãæËÇ°ÂÆöÁêÜÔºö‰∏∫‰ªÄ‰πàÂú®Ë•øÊñπÂè´ÊØïËææÂì•ÊãâÊñØÂÆöÁêÜ# 03 ÔΩú Êï∞Â≠¶ÁöÑÈ¢ÑËßÅÊÄßÔºöÂ¶Ç‰ΩïÁî®Êé®ÁêÜËµ∞Âá∫ËÆ§Áü•Áõ≤Âå∫# 04 ÔΩú Êï∞Â≠¶ÊÄùÁª¥ÔºöÊï∞Â≠¶ÂÆ∂Â¶Ç‰Ωï‰ªéÈÄªËæëÂá∫ÂèëÊÉ≥ÈóÆÈ¢ò# 05 ÔΩú Êï∞Â≠¶ËæπÁïåÔºö‰ªéÊØïËææÂì•ÊãâÊñØÂÆöÁêÜÂà∞Ë¥πÈ©¨Â§ßÂÆöÁêÜ# 06 ÔΩú ÈªÑÈáëÂàÜÂâ≤ÔºöÊØïËææÂì•ÊãâÊñØÂ¶Ç‰ΩïËøûÊé•Êï∞Â≠¶ÂíåÁæéÂ≠¶# 07 ÔΩú Êï∞Â≠¶Â∫îÁî®ÔºöÂçéÁΩóÂ∫öÂåñÁπÅ‰∏∫ÁÆÄÁöÑÁ•ûÊù•‰πãÁ¨î# 08 ÔΩú Êï∞ÂàóÂíåÁ∫ßÊï∞Ôºà‰∏ÄÔºâÔºöÂΩì‰∏ãÂæàÈáçË¶ÅÔºå‰ΩÜË∂ãÂäøÊõ¥ÈáçË¶Å# 09 ÔΩú Êï∞ÂàóÂíåÁ∫ßÊï∞Ôºà‰∫åÔºâÔºö‰º†ÈîÄÈ™óÂ±ÄÁöÑÊï∞Â≠¶ÂéüÁêÜ# 10 ÔΩú Êï∞ÂàóÂíåÁ∫ßÊï∞Ôºà‰∏âÔºâÔºöËóèÂú®Âà©ÊÅØÂíåÊúà‰æõÈáåÁöÑÁßòÂØÜ# Ê®°Âùó‰∫å ÔΩú Êï∞Â≠¶ÁöÑÊ¶ÇÂøµ# 11 ÔΩú È∏°ÂÖîÂêåÁ¨ºÔºöÊñπÁ®ãËøô‰∏™Êï∞Â≠¶Â∑•ÂÖ∑‰∏∫‰ªÄ‰πàÂæàÂº∫Â§ß# 12 ÔΩú ‰∏âÊ¨°ÊñπÁ®ãÔºöÊï∞Â≠¶Âè≤‰∏äÁöÑÂèëÊòéÊùÉ‰πã‰∫â# 13 ÔΩú ËôöÊï∞ÔºöËôöÊûÑËøô‰∏™Â∑•ÂÖ∑Êúâ‰ªÄ‰πàÁî®# 14 ÔΩú Êó†Á©∑ÔºöÊàë‰ª¨‰∏∫‰ªÄ‰πàÈöæ‰ª•ÁêÜËß£Êó†ÈôêÁöÑ‰∏ñÁïåÔºü# 15 ÔΩú Êó†Á©∑Â∞èÔºà‰∏ÄÔºâÔºöÂ¶Ç‰ΩïËØ¥ÊúçÊù†Á≤æ‚ÄúËäùËØ∫‚ÄùÔºü# 16 ÔΩú Êó†Á©∑Â∞èÔºà‰∫åÔºâÔºöÁâõÈ°øÂíåË¥ùÂÖãËé±Âú®‰∫â‰ªÄ‰πàÔºü# 17 ÔΩú Êó†Á©∑Â∞èÔºà‰∏âÔºâÔºöÁî®Âä®ÊÄÅÂíåÊûÅÈôêÁöÑÁúºÂÖâÁúã‰∏ñÁïå#]]></content>
      <tags>
        <tag>Âê¥ÂÜõ,Êï∞Â≠¶,ÈïøÊñá</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLÊòØÊÄéÊ†∑ËøêË°åÁöÑÔºö‰ªéÊ†πÂÑø‰∏äÁêÜËß£ MySQL]]></title>
    <url>%2F2019%2F09%2F20%2F2019-9-20%2F</url>
    <content type="text"><![CDATA[ÈáçÊñ∞ËÆ§ËØÜMySQL ÂÆ¢Êà∑Á´Ø + ÊúçÂä°Âô® ÂêØÂä®ÊúçÂä°Âô®Á®ãÂ∫è UNIX Windows ÂêØÂä®ÂÆ¢Êà∑Á´ØÁ®ãÂ∫è ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®ÁöÑÈÄö‰ø° TCP/IP ÂëΩÂêçÁÆ°ÈÅìÂíåÂÖ±‰∫´ÂÜÖÂ≠ò UNIXÂüüÂ•óÊé•Â≠óÊñá‰ª∂ ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç Â≠òÂÇ®ÂºïÊìé ÂêØÂä®ÈÄâÈ°πÂíåÁ≥ªÁªüÂèòÈáè Âú®ÂëΩ‰ª§Ë°å‰∏ä‰ΩøÁî®ÈÄâÈ°π ÈÖçÁΩÆÊñá‰ª∂‰∏≠‰ΩøÁî®ÈÄâÈ°π Windows UNIX Á≥ªÁªüÂèòÈáè Êü•ÁúãÁ≥ªÁªüÂèòÈáè ËÆæÁΩÆÁ≥ªÁªüÂèòÈáè Áä∂ÊÄÅÂèòÈáè Â≠óÁ¨¶ÈõÜÂíåÊØîËæÉËßÑÂàô Â≠óÁ¨¶ÈõÜÁöÑËΩ¨Êç¢ InnoDBËÆ∞ÂΩïÂ≠ò InnoDBÈ°µ InnoDBË°åÊ†ºÂºè CompactË°åÊ†ºÂºè Ë°åÊï∞ÊçÆÊ∫¢Âá∫ Ë°åÊ∫¢Âá∫ÁöÑ‰∏¥ÁïåÁÇπ InnoDBÊï∞ÊçÆÈ°µ Êï∞ÊçÆÈ°µÁªìÊûÑ ËÆ∞ÂΩïÂú®È°µ‰∏≠ÁöÑÂ≠òÂÇ® ËÆ∞ÂΩïÂ§¥‰ø°ÊÅØ Page Directory Page Header File Header File Trailer B+Ê†ëÁ¥¢Âºï Êó†Á¥¢ÂºïÊü•Êâæ Âú®È°µÂÜÖÊü•Êâæ Âú®Â§öÈ°µ‰∏≠Êü•Êâæ Á¥¢Âºï ÁõÆÂΩïÈ°π Áî®È°µÂ≠òÊîæÁõÆÂΩïÈ°π ËÅöÁ∞áÁ¥¢Âºï ‰∫åÁ∫ßÁ¥¢Âºï B+Ê†ëÁ¥¢ÂºïÁöÑ‰ΩøÁî® ÂêàÁêÜ‰ΩøÁî®Á¥¢Âºï ÂÖ®ÂÄºÂåπÈÖç ÂåπÈÖçÂ∑¶ËæπÁöÑÂàó ÂåπÈÖçÂàóÂâçÁºÄ ÂõûË°®ÁöÑ‰ª£‰ª∑ ‰∫åÁ∫ßÁ¥¢Âºï + ÂõûË°® or ÂÖ®Ë°®Êâ´Á†Å Ë¶ÜÁõñÁ¥¢Âºï ÂêàÁêÜÂú∞Âª∫Á´ãÁ¥¢Âºï MySQLÁöÑÊï∞ÊçÆÁõÆÂΩï Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª Êï∞ÊçÆÁõÆÂΩï Êï∞ÊçÆÁõÆÂΩïÂíåÂÆâË£ÖÁõÆÂΩïÁöÑÂå∫Âà´ Êü•ÊâæÊï∞ÊçÆÁõÆÂΩï Êï∞ÊçÆÁõÆÂΩïÁöÑÁªìÊûÑ Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫ Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫ Êñá‰ª∂Á≥ªÁªüÂØπÊï∞ÊçÆÂ∫ìÁöÑÂΩ±Âìç MySQLÁ≥ªÁªüÊï∞ÊçÆÂ∫ìÁÆÄ‰ªã Êú¨Êñá‰∏∫Êïù‰∫∫ÁöÑÂ≠¶‰π†ËÆ∞ÂΩïÔºåÊÑüÂÖ¥Ë∂£ÁöÑËØ∑Âú®ÊéòÈáëÂ∞èÂÜåË¥≠‰π∞ÂêåÂêçÂéüËëó üòé ÈáçÊñ∞ËÆ§ËØÜMySQL# ÂÆ¢Êà∑Á´Ø + ÊúçÂä°Âô®# MySQLÊúçÂä°Âô®ËøõÁ®ã(‰πüÂè´Êï∞ÊçÆÂ∫ìÂÆû‰æã) MySQLÂÆ¢Êà∑Á´ØËøõÁ®ã ËøõÁ®ãÔºöËøõÁ®ãÂè∑(PIDÔºåÁî±Êìç‰ΩúÁ≥ªÁªüÈöèÊú∫ÂàÜÈÖç)„ÄÅËøõÁ®ãÂêçÁß∞ MySQLÊúçÂä°Âô®ËøõÁ®ãÁöÑÈªòËÆ§ÂêçÁß∞‰∏∫mysqldÔºå MySQLÂÆ¢Êà∑Á´ØËøõÁ®ãÁöÑÈªòËÆ§ÂêçÁß∞‰∏∫mysql ÂêØÂä®ÊúçÂä°Âô®Á®ãÂ∫è# UNIX# ‰ΩøÁî®ÂÆâË£ÖÁõÆÂΩï‰∏ã(ÊØîÂ¶Ç /usr/local/mysql/bin/): 1mysqld 1mysqld_safe mysqld_safeÊòØ‰∏Ä‰∏™ÂêØÂä®ËÑöÊú¨ÁöÑÂëΩ‰ª§ÔºåË∞ÉÁî®‰∫ÜmysqldÔºåÂπ∂ÂêØÂä®‰∏Ä‰∏™ÁõëÊéßËøõÁ®ã(ÈáçÂêØÔºåÊó•Âøó) 12mysql.server startysql.server stop mysql.serverÊòØ‰∏Ä‰∏™ÈìæÊé•Êñá‰ª∂Ôºå ‰ºöË∞ÉÁî®mysqld_safe Windows# ‰ΩøÁî®ÂÆâË£ÖÁõÆÂΩï‰∏ã(ÊØîÂ¶Ç D:\Program Files\mysql-5.7.26-winx64\bin\) mysqld.exe ÂèØÊâßË°åÊñá‰ª∂ ‰ΩøÁî® WindowsÊúçÂä°„ÄÇÊääÊüê‰∏™Á®ãÂ∫èÊ≥®ÂÜå‰∏∫WindowsÊúçÂä°ÁöÑÊ†ºÂºèÔºö &quot;ÂèØÊâßË°åÊñá‰ª∂Ë∑ØÂæÑ&quot; --install [-manual] [ÊúçÂä°ÂêçÁß∞] 123D:\Program Files\mysql-5.7.26-winx64\bin\mysqld --install [MySQL_Service]net start MySQL_Servicenet stop MySQL_Service ÂêØÂä®ÂÆ¢Êà∑Á´ØÁ®ãÂ∫è# mysql -h‰∏ªÊú∫Âêç -uÁî®Êà∑Âêç -pÂØÜÁ†Å 123mysql -hlocalhost -uroot -p123abcmysql -u root -pmysql --host=localhost --user=root --password=123abc ÈÄÄÂá∫ÂÆ¢Êà∑Á´Ø 123quitexit\q ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®ÁöÑÈÄö‰ø°# Êú¨Ë¥®ÊòØ‰∏§‰∏™ËøõÁ®ãÈó¥ÁöÑÈÄö‰ø° TCP/IP# ÊØèÂè∞ËÆ°ÁÆóÊú∫ÈÉΩÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑIPÂú∞ÂùÄ ÊØè‰∏™ËøõÁ®ãÂêëÊìç‰ΩúÁ≥ªÁªüÁî≥ËØ∑‰∏Ä‰∏™Á´ØÂè£Âè∑(0~65535) ÈÄöËøáIPÂú∞ÂùÄ + Á´ØÂè£Âè∑Êù•‰∏éÊüê‰∏™ËøõÁ®ãÈÄö‰ø° MySQLÊúçÂä°Âô®ËøõÁ®ãÁöÑÈªòËÆ§Á´ØÂè£Âè∑‰∏∫3306ÔºåËá™ÂÆö‰πâMySQLÊúçÂä°Âô®ËøõÁ®ãÁöÑÁ´ØÂè£Âè∑Â¶Ç‰∏ã 1mysqld -P3307 ÂëΩÂêçÁÆ°ÈÅìÂíåÂÖ±‰∫´ÂÜÖÂ≠ò# WindowsÁ≥ªÁªü‰∏≠ÁöÑËøõÁ®ãÈó¥ÈÄö‰ø°ÊñπÂºè ÂëΩÂêçÁÆ°ÈÅì 12345mysqld --enable-named-pipemysql --pipeormysql --protocol=pipe ÂÖ±‰∫´ÂÜÖÂ≠ò 123mysqld --shared-memorymysql --protocol=memory UNIXÂüüÂ•óÊé•Â≠óÊñá‰ª∂# 1mysql --protocol=socket ÊúçÂä°Âô®Á®ãÂ∫èÈªòËÆ§ÁõëÂê¨ÁöÑÂ•óÊé•Â≠óÊñá‰ª∂Ë∑ØÂæÑ‰∏∫/tmp/mysql.sockÔºåÊåáÂÆöÂ•óÊé•Â≠óÊñá‰ª∂Ë∑ØÂæÑÔºö 12mysqld --socket=/tmp/a.txtmysql -hlocalhost -uroot --socket=/tmp/a.txt -p ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç# Â≠òÂÇ®ÂºïÊìé# XAÂàó‰ª£Ë°®ÊòØÂê¶ÊîØÊåÅÂàÜÂ∏ÉÂºè‰∫ãÂä° Savepoints‰ª£Ë°®ÊòØÂê¶ÊîØÊåÅÈÉ®ÂàÜ‰∫ãÂä°ÂõûÊªö ÂêØÂä®ÈÄâÈ°πÂíåÁ≥ªÁªüÂèòÈáè# Âú®ÂëΩ‰ª§Ë°å‰∏ä‰ΩøÁî®ÈÄâÈ°π# 12mysqld --skip-networkingmysqld --default-storage-engine=MyISAM \\ Á≠âÂè∑‰∏§Ëæπ‰∏çËÉΩÊúâÁ©∫Ê†º ‰ΩøÁî®mysql --helpÂèØ‰ª•ÁúãÂà∞mysqlÁ®ãÂ∫èÊîØÊåÅÁöÑÂêØÂä®ÈÄâÈ°π ‰ΩøÁî®mysqld --verbose --helpÊü•ÁúãmysqldÊîØÊåÅÁöÑÂêØÂä®ÈÄâÈ°π ÈÖçÁΩÆÊñá‰ª∂‰∏≠‰ΩøÁî®ÈÄâÈ°π# Windows# 12345678910111213%WINDIR%\my.ini%WINDIR%\my.cnf C:\my.iniC:\my.cnfBASEDIR\my.ini \\ MySQLÂÆâË£ÖË∑ØÂæÑBASEDIR\my.cnf defaults-extra-file ÂëΩ‰ª§Ë°åÊåáÂÆöÁöÑÈ¢ùÂ§ñÈÖçÁΩÆÊñá‰ª∂Ë∑ØÂæÑÔºåÂ¶Çmysqld --defaults-extra-file=C:\Users\chiangtao ho\my_extra_file.txt%APPDATA%\MySQL\.mylogin.cnf ÁôªÂΩïË∑ØÂæÑÈÄâÈ°πÔºà‰ªÖÈôêÂÆ¢Êà∑Á´ØÔºâ UNIX# 12345678910/etc/my.cnf /etc/mysql/my.cnf SYSCONFDIR/my.cnf $MYSQL_HOME/my.cnf ÁâπÂÆö‰∫éÊúçÂä°Âô®ÁöÑÈÄâÈ°πÔºà‰ªÖÈôêÊúçÂä°Âô®Ôºâdefaults-extra-file ~/.my.cnf Áî®Êà∑ÁâπÂÆöÈÄâÈ°π~/.mylogin.cnf Áî®Êà∑ÁâπÂÆöÁöÑÁôªÂΩïË∑ØÂæÑÈÄâÈ°πÔºà‰ªÖÈôêÂÆ¢Êà∑Á´ØÔºâ Á≥ªÁªüÂèòÈáè# Êü•ÁúãÁ≥ªÁªüÂèòÈáè# 12SHOW VARIABLES like 'max_connections';SHOW VARIABLES LIKE 'default%'; Á≥ªÁªüÂèòÈáèÁöÑÂçïËØç‰πãÈó¥ÂøÖÈ°ª‰ΩøÁî®‰∏ãÂàíÁ∫ø_ËøûÊé• ËÆæÁΩÆÁ≥ªÁªüÂèòÈáè# ÂèòÈáèÁöÑ‰ΩúÁî®ËåÉÂõ¥ GLOBALÔºöÂÖ®Â±ÄÂèòÈáèÔºåÂΩ±ÂìçÊúçÂä°Âô®ÁöÑÊï¥‰ΩìÊìç‰Ωú SESSION (LOCAL)Ôºö‰ºöËØùÂèòÈáèÔºåÂΩ±ÂìçÊüê‰∏™ÂÆ¢Êà∑Á´ØËøûÊé•ÁöÑÊìç‰Ωú 123456SET GLOBAL default_storage_engine = MyISAM;SET @@GLOBAL.default_storage_engine = MyISAM;SET SESSION default_storage_engine = MyISAM;SET @@SESSION.default_storage_engine = MyISAM;SET default_storage_engine = MyISAM; \\ ÈªòËÆ§‰ΩúÁî®ËåÉÂõ¥ÊòØLOCAL ÈÇ£Êàë‰ª¨ÁöÑSHOW VARIABLESËØ≠Âè•ÈªòËÆ§Êü•ÁúãÁöÑÊòØSESSION‰ΩúÁî®ËåÉÂõ¥ÁöÑÁ≥ªÁªüÂèòÈáè Âπ∂‰∏çÊòØÊâÄÊúâÁ≥ªÁªüÂèòÈáèÈÉΩÂÖ∑ÊúâGLOBALÂíåSESSIONÁöÑ‰ΩúÁî®ËåÉÂõ¥ Áä∂ÊÄÅÂèòÈáè# ‰∏éÁ≥ªÁªüÂèòÈáèÁ±ª‰ººÔºåÁä∂ÊÄÅÂèòÈáè‰πüÊúâGLOBALÂíåSESSION‰∏§‰∏™‰ΩúÁî®ËåÉÂõ¥ÁöÑ 1SHOW STATUS LIKE 'thread%'; Â≠óÁ¨¶ÈõÜÂíåÊØîËæÉËßÑÂàô# Êü•ÁúãÂ≠óÁ¨¶ÈõÜ 12SHOW CHARSET;SHOW CHARACTER SET; Default collationË°®Á§∫Â≠óÁ¨¶ÈõÜÈªòËÆ§ÁöÑÊØîËæÉËßÑÂàô Maxlen‰ª£Ë°®ËØ•Â≠óÁ¨¶ÈõÜË°®Á§∫‰∏Ä‰∏™Â≠óÁ¨¶ÊúÄÂ§öÈúÄË¶ÅÂá†‰∏™Â≠óËäÇ Êü•ÁúãÊØîËæÉËßÑÂàô MySQL‰∏≠utf8ÊòØutf8mb3ÁöÑÂà´ÂêçÔºåÊâÄ‰ª•Âú®MySQL‰∏≠utf8Â∞±ÊÑèÂë≥ÁùÄ‰ΩøÁî®1~3‰∏™Â≠óËäÇÊù•Ë°®Á§∫‰∏Ä‰∏™Â≠óÁ¨¶ÔºåÂ¶ÇÊûúÂ§ßÂÆ∂Êúâ‰ΩøÁî®4Â≠óËäÇÁºñÁ†Å‰∏Ä‰∏™Â≠óÁ¨¶ÁöÑÊÉÖÂÜµÔºåÊØîÂ¶ÇÂ≠òÂÇ®‰∏Ä‰∫õemojiË°®ÊÉÖÔºå‰ΩøÁî®utf8mb4 MySQLÊúâ4‰∏™Á∫ßÂà´ÁöÑÂ≠óÁ¨¶ÈõÜÂíåÊØîËæÉËßÑÂàôÔºåÂàÜÂà´ÊòØÔºö ÊúçÂä°Âô®Á∫ßÂà´ character_set_server, collation_server Êï∞ÊçÆÂ∫ìÁ∫ßÂà´ character_set_database, collation_database Ë°®Á∫ßÂà´ ÂàóÁ∫ßÂà´ ÁºñÁ†ÅÂíåËß£Á†Å‰ΩøÁî®ÁöÑÂ≠óÁ¨¶ÈõÜ‰∏ç‰∏ÄËá¥Â∞ÜÂØºËá¥‰π±Á†Å Â≠óÁ¨¶ÈõÜÁöÑËΩ¨Êç¢# character_set_client ÊúçÂä°Âô®Ëß£Á†ÅËØ∑Ê±ÇËØ≠Âè•Êó∂‰ΩøÁî®ÁöÑÂ≠óÁ¨¶ÈõÜ character_set_connection ÊúçÂä°Âô®Â§ÑÁêÜËØ∑Ê±ÇÊó∂‰ºöÊääËØ∑Ê±ÇÂ≠óÁ¨¶‰∏≤‰ªécharacter_set_clientËΩ¨‰∏∫character_set_connection character_set_results ÊúçÂä°Âô®ÂêëÂÆ¢Êà∑Á´ØËøîÂõûÊï∞ÊçÆÊó∂‰ΩøÁî®ÁöÑÂ≠óÁ¨¶ÈõÜ ÈÄöÂ∏∏Êää character_set_client „ÄÅcharacter_set_connection„ÄÅcharacter_set_results Ëøô‰∏â‰∏™Á≥ªÁªüÂèòÈáèËÆæÁΩÆÊàêÂíåÂÆ¢Êà∑Á´Ø‰ΩøÁî®ÁöÑÁõ∏ÂêåÁöÑÂ≠óÁ¨¶ÈõÜ 12345SET NAMES Â≠óÁ¨¶ÈõÜÂêç;SET character_set_client = Â≠óÁ¨¶ÈõÜÂêç;SET character_set_connection = Â≠óÁ¨¶ÈõÜÂêç;SET character_set_results = Â≠óÁ¨¶ÈõÜÂêç; InnoDBËÆ∞ÂΩïÂ≠ò# InnoDBÈ°µ# InnoDBÊòØ‰∏Ä‰∏™Â∞ÜË°®‰∏≠ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âà∞Á£ÅÁõò‰∏äÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇÁ£ÅÁõòËØªÂÜôÁöÑÈÄüÂ∫¶ÊØîÂÜÖÂ≠òÁöÑËØªÂÜôÈÄüÂ∫¶Â∑Æ‰∫ÜÂá†‰∏™Êï∞ÈáèÁ∫ßÔºåÂõ†Ê≠§ËÆæËÆ°InnoDBÊó∂Â∞ÜÊï∞ÊçÆÂàíÂàÜ‰∏∫Ëã•Âπ≤‰∏™È°µÂπ∂‰ª•È°µ‰Ωú‰∏∫Á£ÅÁõòÂíåÂÜÖÂ≠ò‰πãÈó¥‰∫§‰∫íÁöÑÂü∫Êú¨Âçï‰ΩçÔºåÈ°µÁöÑÂ§ßÂ∞è‰∏ÄËà¨‰∏∫ 16 KB„ÄÇ InnoDBË°åÊ†ºÂºè# 4ÁßçË°åÊ†ºÂºè: Compact Redundant Dynamic Compressed 1CREATE TABLE Ë°®Âêç ROW_FORMAT=Ë°åÊ†ºÂºèÂêçÁß∞ CompactË°åÊ†ºÂºè# ÊâÄÊúâÂèòÈïøÂ≠óÊÆµÁöÑÁúüÂÆûÊï∞ÊçÆÂç†Áî®ÁöÑÂ≠óËäÇÈïøÂ∫¶ÈÉΩË¢´Â≠òÊîæÂú®ÂèòÈïøÂ≠óÊÆµÈïøÂ∫¶ÂàóË°® ÊääÂÄº‰∏∫NULLÁöÑÂàóÁªü‰∏ÄÂ≠òÂÇ®Âà∞NULLÂÄºÂàóË°®‰∏≠ ËÆ∞ÂΩïÂ§¥‰ø°ÊÅØÊòØÁî±Âõ∫ÂÆöÁöÑ5‰∏™Â≠óËäÇÁªÑÊàê MySQL‰ºö‰∏∫ÊØè‰∏™ËÆ∞ÂΩïÈªòËÆ§ÁöÑÊ∑ªÂä†‰∏Ä‰∫õÂàóÔºàÈöêËóèÂàóÔºâÔºåÂåÖÊã¨Ôºörow_idÔºàDB_ROW_IDÔºâ„ÄÅtransaction_idÔºàDB_TRX_IDÔºâ„ÄÅroll_pointerÔºàDB_ROLL_PTRÔºâ„ÄÇ Ë°åÊï∞ÊçÆÊ∫¢Âá∫# ÂØπ‰∫éMySQLÁöÑÊØèÊù°ËÆ∞ÂΩïÔºåÈô§‰∫ÜBLOBÊàñËÄÖTEXTÁ±ªÂûãÁöÑÂàó‰πãÂ§ñÔºåÂÖ∂‰ªñÊâÄÊúâÁöÑÂàóÔºà‰∏çÂåÖÊã¨ÈöêËóèÂàóÂíåËÆ∞ÂΩïÂ§¥‰ø°ÊÅØÔºâÂç†Áî®ÁöÑÂ≠óËäÇÈïøÂ∫¶Âä†Ëµ∑Êù•‰∏çËÉΩË∂ÖËøá65535‰∏™Â≠óËäÇ„ÄÇËøô‰∏™65535‰∏™Â≠óËäÇÈô§‰∫ÜÂàóÊú¨Ë∫´ÁöÑÊï∞ÊçÆ‰πãÂ§ñÔºåËøòÂåÖÊã¨‰∏Ä‰∫õÂÖ∂‰ªñÁöÑÊï∞ÊçÆÔºåÂç≥ ÁúüÂÆûÊï∞ÊçÆÊú¨Ë∫´ ÁúüÂÆûÊï∞ÊçÆÂç†Áî®Â≠óËäÇÁöÑÈïøÂ∫¶Ê†áËØÜÔºà&lt;= 2 bytesÔºâ NULLÂÄºÊ†áËØÜÔºà&lt;= 1 byteÔºâÔºåÂΩìÂàóÈÉΩÊúâNOT NULLÂ±ûÊÄßÊó∂‰∏∫0 Âõ†Ê≠§Ôºå‰∏äÂõæ‰∏≠ËÆæÁΩÆÂèòÈïøÁ±ªÂûãVARCHAR(M)ÔºàMË°®Á§∫ÂÖÅËÆ∏ÁöÑÂ≠óÁ¨¶Êï∞ÈáèÔºâM=65535Êó∂ÂØºËá¥‰∫ÜÊ∫¢Âá∫„ÄÇ ÁúüÂÆûÊï∞ÊçÆÔºö65533 = 65529(c1)+ 4(c2) ÈïøÂ∫¶Ê†áËØÜÔºö2 NULLÂÄºÊ†áËØÜÔºö1 ÂÖ±65536 &gt; 65535Ê∫¢Âá∫„ÄÇ Êõ¥Êç¢Â≠óÁ¨¶ÈõÜÂêéÊ∫¢Âá∫„ÄÇ VARCHAR(M)Á±ªÂûãÁöÑÂàóÂ∞±ÊúÄÂ§öÂèØ‰ª•Â≠òÂÇ®65533‰∏™Â≠óËäÇÔºåËÄå‰∏Ä‰∏™È°µÁöÑÂ§ßÂ∞è‰∏ÄËà¨ÊòØ16KBÔºå‰πüÂ∞±ÊòØ16384Â≠óËäÇÔºåÂõ†Ê≠§Âú®CompactÂíåReduntantË°åÊ†ºÂºè‰∏≠ÔºåÂú®Êú¨ËÆ∞ÂΩïÂè™‰ºöÂ≠òÂÇ®ËØ•ÂàóÁöÑÂâç768‰∏™Â≠óËäÇÁöÑÊï∞ÊçÆÂíå‰∏Ä‰∏™ÊåáÂêëÂÖ∂‰ªñÈ°µÁöÑÂú∞ÂùÄÔºåÁÑ∂ÂêéÊääÂâ©‰∏ãÁöÑÊï∞ÊçÆÂ≠òÊîæÂà∞ÂÖ∂‰ªñÈ°µ‰∏≠ÔºõËÄåÂú®DynamicÂíåCompressedË°åÊ†ºÂºè‰∏≠ÔºåËÆ∞ÂΩï‰∏≠Âè™Â≠òÂÇ®ÂÖ∂‰ªñÈ°µÁöÑÂú∞ÂùÄ„ÄÇ Ë°åÊ∫¢Âá∫ÁöÑ‰∏¥ÁïåÁÇπ# MySQL‰∏≠ËßÑÂÆö‰∏Ä‰∏™È°µ‰∏≠Ëá≥Â∞ëË¶ÅÂ≠òÊîæ‰∏§Ë°åËÆ∞ÂΩï ÊØè‰∏™È°µÈô§‰∫ÜÂ≠òÊîæËÆ∞ÂΩïÂ§ñÔºå‰πüÈúÄË¶ÅÂ≠òÂÇ®‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑ‰ø°ÊÅØÔºåËøô‰∫õÈ¢ùÂ§ñ‰ø°ÊÅØÂä†Ëµ∑Êù•ÈúÄË¶Å132‰∏™Â≠óËäÇ ÊØè‰∏™ËÆ∞ÂΩïÁöÑÈ¢ùÂ§ñ‰ø°ÊÅØÈúÄË¶Å27Â≠óËäÇ ÁúüÂÆûÊï∞ÊçÆÁöÑÈïøÂ∫¶Ê†áËØÜ 1B NULLÂÄºÊ†áËØÜ 1B ËÆ∞ÂΩïÂ§¥‰ø°ÊÅØ 5B row_id 6B transaction_id 6B roll_pointer 7B ‰∏çÊ∫¢Âá∫ÁöÑ‰∏¥ÁïåÊù°‰ª∂Ôºö132 + 2√ó(27 + n) &lt; 16384 InnoDBÊï∞ÊçÆÈ°µ# Êï∞ÊçÆÈ°µÁªìÊûÑ# ËÆ∞ÂΩïÂú®È°µ‰∏≠ÁöÑÂ≠òÂÇ®# ËÆ∞ÂΩïÂ§¥‰ø°ÊÅØ# ‰ª• page_demo Ë°®‰∏∫‰æã 123456CREATE TABLE page_demo( c1 INT, c2 INT, c3 VARCHAR(10000), PRIMARY KEY (c1)) CHARSET=ascii ROW_FORMAT=Compact; Áî±‰∫éÊåáÂÆö c1 ‰∏∫‰∏ªÈîÆÔºåÊâÄ‰ª•Âú®Ë°åÊ†ºÂºè‰∏≠Â∞±Ê≤°ÊúâÈöêËóèÂàó row_id„ÄÇ ÊèíÂÖ•Êï∞ÊçÆ4Êù°ËÆ∞ÂΩï 1234INSERT INTO page_demo VALUES(1, 100, 'aaaa'), (2, 200, 'bbbb'), (3, 300, 'cccc'), (4, 400, 'dddd'); delete_mask Ê†áËÆ∞ÂΩìÂâçËÆ∞ÂΩïÊòØÂê¶Ë¢´Âà†Èô§ÔºåÂÄº‰∏∫0ÁöÑÊó∂ÂÄô‰ª£Ë°®ËÆ∞ÂΩïÊ≤°ÊúâË¢´Âà†Èô§Ôºå1ÂàôË¢´Âà†Èô§‰∫ÜÔºõ ÊâÄÊúâË¢´Âà†ÁöÑËÆ∞ÂΩï‰ºöÁªÑÊàê‰∏Ä‰∏™ÂûÉÂúæÈìæË°®ÔºåÊñ∞ËÆ∞ÂΩïÊèíÂÖ•Âà∞Ë°®Êó∂ÂèØ‰ª•Ë¶ÜÁõñËøô‰∫õË¢´Âà†Èô§ÁöÑËÆ∞ÂΩïÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥„ÄÇ n_owned ËßÅPage Directory heap_no Ë°®Á§∫ÂΩìÂâçËÆ∞ÂΩïÂú®Êú¨È°µ‰∏≠ÁöÑ‰ΩçÁΩÆÔºå‰ªé‰∏äÂõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåÊèíÂÖ•ÁöÑ4Êù°ËÆ∞ÂΩïÂú®Êú¨È°µ‰∏≠ÁöÑ‰ΩçÁΩÆÂàÜÂà´ÊòØÔºö2„ÄÅ3„ÄÅ4„ÄÅ5„ÄÇÊúÄÂ∞èËÆ∞ÂΩïÂíåÊúÄÂ§ßËÆ∞ÂΩïÂàÜÂà´‰∏∫0„ÄÅ1„ÄÇ record_type ËÆ∞ÂΩïÁ±ªÂûãÔºåÂÖ±4ÁßçÔºö 0ÔºöÊôÆÈÄöËÆ∞ÂΩï 1ÔºöB+Ê†ëÈùûÂè∂ËäÇÁÇπËÆ∞ÂΩï ÔºàÊàñÁõÆÂΩïÈ°πËÆ∞ÂΩïÔºåËßÅÁõÆÂΩïÈ°πÔºâ 2ÔºöÊúÄÂ∞èËÆ∞ÂΩï 3ÔºöÊúÄÂ§ßËÆ∞ÂΩï min_rec_mask ‰ª£Ë°®B+Ê†ëÁöÑÊØèÂ±ÇÈùûÂè∂ËäÇÁÇπ‰∏≠ÁöÑÊúÄÂ∞èËÆ∞ÂΩï ÔºàÊàñËÄÖ‰∏ªÈîÆÂÄºÊúÄÂ∞èÁöÑÁõÆÂΩïÈ°πËÆ∞ÂΩïÁöÑmin_rec_maskÂÄº‰∏∫1Ôºâ next_record Ë°®Á§∫‰ªéÂΩìÂâçËÆ∞ÂΩïÁöÑÁúüÂÆûÊï∞ÊçÆÂà∞‰∏ã‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÁúüÂÆûÊï∞ÊçÆÁöÑÂú∞ÂùÄÂÅèÁßªÈáè„ÄÇ‰æãÂ¶ÇÁ¨¨‰∏ÄÊù°ËÆ∞ÂΩïÁöÑnext_recordÂÄº‰∏∫32ÔºåÊÑèÂë≥ÁùÄ‰ªéÁ¨¨‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÁúüÂÆûÊï∞ÊçÆÁöÑÂú∞ÂùÄÂ§ÑÂêëÂêéÊâæ32‰∏™Â≠óËäÇ‰æøÊòØ‰∏ã‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÁúüÂÆûÊï∞ÊçÆ„ÄÇËÆ∞ÂΩïÊåâÁÖß‰∏ªÈîÆ‰ªéÂ∞èÂà∞Â§ßÁöÑÈ°∫Â∫èÂΩ¢Êàê‰∫Ü‰∏Ä‰∏™ÂçïÈìæË°® Â¶ÇÊûúÂà†Èô§Á¨¨‰∫åÊù°ËÆ∞ÂΩï 1DELETE FROM page_demo WHERE c1 = 2; Âà†Èô§Á¨¨2Êù°ËÆ∞ÂΩïÂâçÂêéÁöÑ‰∏ªË¶ÅÂèòÂåñÔºö Á¨¨2Êù°ËÆ∞ÂΩïÁöÑdelete_maskÂÄºËÆæÁΩÆ‰∏∫1Ôºõ Á¨¨2Êù°ËÆ∞ÂΩïÁöÑnext_recordÂÄºÂèò‰∏∫‰∫Ü0ÔºåÊÑèÂë≥ÁùÄËØ•ËÆ∞ÂΩïÊ≤°Êúâ‰∏ã‰∏ÄÊù°ËÆ∞ÂΩï‰∫ÜÔºõ Á¨¨1Êù°ËÆ∞ÂΩïÁöÑnext_recordÊåáÂêë‰∫ÜÁ¨¨3Êù°ËÆ∞ÂΩïÔºõ ÊúÄÂ§ßËÆ∞ÂΩïÁöÑn_ownedÂÄº‰ªé5ÂèòÊàê‰∫Ü4„ÄÇ Page Directory# ËÆæËÆ°È°µÁõÆÂΩïÊòØ‰∏∫‰∫ÜÊñπ‰æøÂø´ÈÄüÊü•ÊâæËÆ∞ÂΩïÔºåÂ∞±ÂÉè‰π¶ÁöÑÁõÆÂΩïÈÇ£Ê†∑ÔºåÂàõÂª∫ page directory ÁöÑÊ≠•È™§Ôºö Â∞ÜÊâÄÊúâÊ≠£Â∏∏ÁöÑËÆ∞ÂΩïÔºàÂåÖÊã¨ÊúÄÂ§ßÂíåÊúÄÂ∞èËÆ∞ÂΩïÔºå‰∏çÂåÖÊã¨Ê†áËÆ∞‰∏∫Â∑≤Âà†Èô§ÁöÑËÆ∞ÂΩïÔºâÂàíÂàÜ‰∏∫Âá†‰∏™ÁªÑÔºõ ÊØè‰∏™ÁªÑÂÜÖÊúÄÂ§ßÁöÑÈÇ£Êù°ËÆ∞ÂΩïÁöÑÂ§¥‰ø°ÊÅØÁöÑ n_owned Ë°®Á§∫ÁªÑÂÜÖËÆ∞ÂΩïÁöÑÊï∞ÈáèÔºõ Â∞ÜÊØè‰∏™ÁªÑÁöÑÊúÄÂ§ßÁöÑÈÇ£Êù°ËÆ∞ÂΩïÁöÑÂú∞ÂùÄÂÅèÁßªÈáèÔºà‰πüÁß∞ÊßΩÔºåslotÔºâÈõÜ‰∏≠Ëµ∑Êù•Â≠òÊîæÔºåÊûÑÊàê Page DirectoryÔºõ InnoDBËßÑÂÆöÊúÄÂ∞èËÆ∞ÂΩïÊâÄÂú®ÁöÑÂàÜÁªÑÂè™ËÉΩÊúâ 1 Êù°ËÆ∞ÂΩïÔºåÊúÄÂ§ßËÆ∞ÂΩïÊâÄÂú®ÁöÑÂàÜÁªÑÁöÑËÆ∞ÂΩïÊù°Êï∞Âú® 1~8 Êù°‰πãÈó¥ÔºåÂÖ∂ÂÆÉÂàÜÁªÑ‰∏≠ËÆ∞ÂΩïÁöÑÊù°Êï∞ÂàôÂú®ÊòØ 4~8 Êù°‰πãÈó¥„ÄÇ Âà©Áî®È°µÁõÆÂΩïÊü•ÊâæÊåáÂÆö‰∏ªÈîÆÁöÑËÆ∞ÂΩïÁöÑËøáÁ®ãÂàÜ‰∏∫‰∏§Ê≠•Ôºö ÈÄöËøá‰∫åÂàÜÊ≥ïÁ°ÆÂÆöËØ•ËÆ∞ÂΩïÊâÄÂú®ÁöÑÊßΩÔºåÂπ∂ÊâæÂà∞ËØ•ÊßΩ‰∏≠‰∏ªÈîÆÂÄºÊúÄÂ∞èÁöÑÈÇ£Êù°ËÆ∞ÂΩïÔºõ ÈÄöËøáËÆ∞ÂΩïÁöÑ next_record Â±ûÊÄßÈÅçÂéÜÁªÑ‰∏≠ÁöÑÂêÑ‰∏™ËÆ∞ÂΩï„ÄÇ Page Header# Â≠òÂÇ®Êï∞ÊçÆÁöÑÁä∂ÊÄÅ‰ø°ÊÅØÔºåÊØîÂ¶ÇÊú¨È°µ‰∏≠Â∑≤ÁªèÂ≠òÂÇ®‰∫ÜÂ§öÂ∞ëÊù°ËÆ∞ÂΩïÔºåÁ¨¨‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÂú∞ÂùÄÊòØ‰ªÄ‰πàÔºåÈ°µÁõÆÂΩï‰∏≠Â≠òÂÇ®‰∫ÜÂ§öÂ∞ë‰∏™ÊßΩÁ≠âÁ≠â„ÄÇ File Header# ‰∏çÂêåÁ±ªÂûãÁöÑÈ°µÈÉΩ‰ºö‰ª•File Header‰Ωú‰∏∫Á¨¨‰∏Ä‰∏™ÁªÑÊàêÈÉ®ÂàÜÔºåÂÆÉËÆ∞ÂΩï‰∫ÜÈíàÂØπÂêÑÁßçÈ°µÈÉΩÈÄöÁî®ÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØ„ÄÇ Á¥¢ÂºïÈ°µÔºàÊï∞ÊçÆÈ°µÔºâÈÄöËøá file header ÊûÑÊàêÂèåÂêëÈìæË°® File Trailer# ‰∏éfile header‰∏ÄÊ†∑ÂØπ‰∏çÂêåÁ±ªÂûãÁöÑÈ°µÈÄöÁî®Ôºå‰∏ªË¶ÅÁî®‰∫éÊ†°È™åÈ°µÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß„ÄÇ B+Ê†ëÁ¥¢Âºï# Êó†Á¥¢ÂºïÊü•Êâæ# Âú®È°µÂÜÖÊü•Êâæ# ‰ª•‰∏ªÈîÆÊü•Êâæ ‰æùÊçÆÈ°µÁõÆÂΩïÔºàÊßΩÔºâÈááÁî®‰∫åÂàÜÊü•ÊâæÂÆö‰ΩçÂàÜÁªÑÔºåÂÜçÈÅçÂéÜÂàÜÁªÑ ‰ª•‰∏ªÈîÆ‰ª•Â§ñÁöÑÂàóÊü•Êâæ ÈÅçÂéÜÈ°µÂÜÖÁöÑËÆ∞ÂΩïÈìæË°® Âú®Â§öÈ°µ‰∏≠Êü•Êâæ# ÂÆö‰ΩçËÆ∞ÂΩïÊâÄÂú®ÁöÑÈ°µ È°µÂÜÖÊü•Êâæ Á¥¢Âºï# Âª∫Á´ãÁ¥¢ÂºïÊòØ‰∏∫‰∫ÜÂø´ÈÄüÂÆö‰ΩçËÆ∞ÂΩïÊâÄÂú®ÁöÑÊï∞ÊçÆÈ°µ„ÄÇ ÂØπÊï∞ÊçÆÈ°µËøõË°åÊéíÂ∫è„ÄÇÂç≥ËÆ©‰∏ã‰∏Ä‰∏™Êï∞ÊçÆÈ°µÁöÑËÆ∞ÂΩïÁöÑ‰∏ªÈîÆÂÄºÂ§ß‰∫é‰∏ä‰∏Ä‰∏™È°µÁöÑËÆ∞ÂΩïÁöÑ‰∏ªÈîÆÂÄºÔºåÂõ†Ê≠§Âú®ÊèíÂÖ•Êñ∞ÁöÑËÆ∞ÂΩïÊó∂Ê∂âÂèäÊï∞ÊçÆÈ°µÈó¥ÁöÑËÆ∞ÂΩïÁöÑË∞ÉÊï¥ ÂØπÈ°µËøõË°åÊéíÂ∫èÂêéÔºåÂÖ®ÈÉ®ËÆ∞ÂΩïÁöÑ‰∏ªÈîÆÂÄºÂ∞±ÊûÑÊàê‰∫Ü‰∏Ä‰∏™ÈÄíÂ¢ûÁöÑÂ∫èÂàóÔºå‰ªéËÄåÂèØ‰ª•Âà©Áî®‰∫åÂàÜÊ≥ïÂÆûÁé∞Âø´ÈÄüÊü•Êâæ„ÄÇ ÂØπÊØè‰∏™È°µËÆæÁΩÆÁõÆÂΩïÈ°π ÁõÆÂΩïÈ°π# ÁõÆÂΩïÈ°πÂåÖÊã¨ Êï∞ÊçÆÈ°µ‰∏≠ÁöÑËÆ∞ÂΩïÁöÑÊúÄÂ∞è‰∏ªÈîÆÂÄºÔºåÁî®keyÊù•Ë°®Á§∫Ôºõ È°µÂè∑ÔºåÁî®page_noË°®Á§∫„ÄÇ Áî®È°µÂ≠òÊîæÁõÆÂΩïÈ°π# Áî®Êà∑ËÆ∞ÂΩïÈÉΩÂ≠òÊîæÂú®B+Ê†ëÁöÑÂè∂ËäÇÁÇπ‰∏äÔºåËÄåÁõÆÂΩïÈ°πÈÉΩÂ≠òÊîæÂú®ÈùûÈ°µËäÇÁÇπ‰∏ä„ÄÇ ËÅöÁ∞áÁ¥¢Âºï# ÁâπÊÄßÂåÖÊã¨Ôºö ‰æùÊçÆËÆ∞ÂΩïÁöÑ‰∏ªÈîÆÂÄºÊéíÂ∫è È°µÂÜÖÁöÑËÆ∞ÂΩïÊòØÊåâÁÖß‰∏ªÈîÆÁöÑÂ§ßÂ∞èÈ°∫Â∫èÊéíÊàê‰∏Ä‰∏™ÂçïÂêëÈìæË°® Êï∞ÊçÆÈ°µÊ†πÊçÆ‰∏ªÈîÆÂ§ßÂ∞èÈ°∫Â∫èÊéíÊàê‰∏Ä‰∏™ÂèåÂêëÈìæË°® Â≠òÊîæÁõÆÂΩïÈ°πËÆ∞ÂΩïÁöÑÈ°µÊ†πÊçÆ‰∏ªÈîÆÂ§ßÂ∞èÂàÜ‰∏∫‰∏çÂêåÁöÑÂ±ÇÊ¨° B+Ê†ëÁöÑÂè∂ËäÇÁÇπÂ≠òÂÇ®ÁöÑÊòØÂÆåÊï¥ÁöÑËÆ∞ÂΩïÔºåÂç≥ËÆ∞ÂΩïÁöÑÊâÄÊúâÂàóÁöÑÂÄºÔºàÂåÖÊã¨ÈöêËóèÂàóÔºâ ‰∫åÁ∫ßÁ¥¢Âºï# ‰æùÊçÆËÆ∞ÂΩïÁöÑÂÖ∂ÂÆÉÂàóÔºàÊØîÂ¶Çc1ÔºâÁöÑÂÄºÊéíÂ∫èÂΩ¢ÊàêÁöÑB+Ê†ë„ÄÇÂ∞ÜËÅöÁ∞áÁ¥¢ÂºïÁöÑ‰∏ªÈîÆÂÄºÊç¢‰∏∫c1ÁöÑÂÄºÔºåÊ≠§Â§ñÔºåÂè∂ËäÇÁÇπÂ≠òÂÇ®ÁöÑ‰∏çÊòØÂÆåÊï¥ÁöÑËÆ∞ÂΩïËÄåÂè™Êúâ‰∏ªÈîÆÂíåc1„ÄÇ ÈÄöËøá‰∫åÁ∫ßÁ¥¢ÂºïÊù•Êü•ÊâæÂÆåÊï¥ËÆ∞ÂΩïÔºöÈÄöËøá‰∫åÁ∫ßÁ¥¢ÂºïÊâæÂà∞‰∏ªÈîÆÂÄº‰πãÂêéÂÜçÈÄöËøáËÅöÁ∞áÁ¥¢ÂºïÊü•ÊâæÂÆåÊï¥ËÆ∞ÂΩï„ÄÇ B+Ê†ëÁ¥¢ÂºïÁöÑ‰ΩøÁî®# ÂêàÁêÜ‰ΩøÁî®Á¥¢Âºï# ËÄÉËôëË°® person_info 123456789CREATE TABLE person_info( id INT NOT NULL auto_increment, name VARCHAR(100) NOT NULL, birthday DATE NOT NULL, phone CHAR(11) NOT NULL, country varchar(100) NOT NULL, PRIMARY KEY (id), KEY idx_name_birthday_phone (name, birthday, phone)); idx_name_birthday_phone ‰∏∫‰∫åÁ∫ßÁ¥¢Âºï ÂÖ®ÂÄºÂåπÈÖç# 1SELECT * FROM person_info WHERE name = 'Ashburn' AND birthday = '1990-09-27' AND phone = '15123983239'; Áî±‰∫éÊü•ËØ¢‰ºòÂåñÂô®ÁöÑÂ≠òÂú®ÔºåË∞ÉÊç¢name„ÄÅbirthday„ÄÅphoneËøôÂá†‰∏™ÊêúÁ¥¢ÂàóÁöÑÈ°∫Â∫è‰∏çÂΩ±ÂìçÊü•ËØ¢ÁöÑÊâßË°åËøáÁ®ã„ÄÇ ÂåπÈÖçÂ∑¶ËæπÁöÑÂàó# 1SELECT * FROM person_info WHERE name = 'Ashburn'; ÂèØ‰ª•‰ΩøÁî®Á¥¢Âºïidx_name_birthday_phoneÔºåËÄå 1SELECT * FROM person_info WHERE birthday = '1990-09-27'; ‰∏çËÉΩ‰ΩøÁî®Á¥¢Âºïidx_name_birthday_phone„ÄÇ ÂåπÈÖçÂàóÂâçÁºÄ# ÊØîÂ¶ÇÊü•ËØ¢ÂêçÂ≠ó‰ª• As ÂºÄÂ§¥ÁöÑËÆ∞ÂΩï 1SELECT * FROM person_info WHERE name LIKE 'As%'; ÂõûË°®ÁöÑ‰ª£‰ª∑# 1SELECT * FROM person_info WHERE name &gt; 'Asa' AND name &lt; 'Barlow'; ‰∫åÁ∫ßÁ¥¢ÂºïÊêúÁ¥¢Âà∞ÁöÑÁªìÊûúÔºàÂç≥ÂÄºÂú®AsaÔΩûBarlow‰πãÈó¥ÁöÑËÆ∞ÂΩïÔºâÂú®Á£ÅÁõò‰∏≠ÁöÑÂ≠òÂÇ®ÊòØÁõ∏ËøûÁöÑÔºåÈõÜ‰∏≠ÂàÜÂ∏ÉÂú®‰∏Ä‰∏™ÊàñÂá†‰∏™Êï∞ÊçÆÈ°µ‰∏≠ÔºåÂõ†Ê≠§ÂèØ‰ª•ÂæàÂø´‰ªéÁ£ÅÁõò‰∏≠ËØªÂá∫ÔºåËøôÁßçËØªÂèñÊñπÂºèÂèØ‰ª•Áß∞‰∏∫È°∫Â∫èI/O„ÄÇËÄåÂõûË°®ÊòØÊ†πÊçÆ‰∏çËøûÁª≠ÁöÑidÂÄºÂà∞ËÅöÁ∞áÁ¥¢Âºï‰∏≠ËØªÂá∫ÂÆåÊï¥ÁöÑÁî®Êà∑ËÆ∞ÂΩïÔºàÂèØËÉΩÂàÜÂ∏ÉÂú®‰∏çÂêåÁöÑÊï∞ÊçÆÈ°µ‰∏≠ÔºâÔºåËøôÁßçËØªÂèñÊñπÂºèÂèØ‰ª•Áß∞‰∏∫ÈöèÊú∫I/O„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÈ°∫Â∫èI/OÊØîÈöèÊú∫I/OÁöÑÊÄßËÉΩÈ´òÂæàÂ§ö„ÄÇ ‰∫åÁ∫ßÁ¥¢Âºï + ÂõûË°® or ÂÖ®Ë°®Êâ´Á†Å# ÈúÄË¶ÅÂõûË°®ÁöÑËÆ∞ÂΩïË∂äÂ§öÔºå‰ΩøÁî®‰∫åÁ∫ßÁ¥¢ÂºïÁöÑÊÄßËÉΩÂ∞±Ë∂ä‰ΩéÔºåÁîöËá≥‰∏çÂ¶Ç‰ΩøÁî®ËÅöÁ∞áÁ¥¢ÂºïÂÖ®Ë°®Êâ´Á†ÅÔºõ ‰ΩøÁî®LIMITÈôêÂà∂ÂõûË°®Ê¨°Êï∞Ôºå‰Ωø‰ºòÂåñÂô®ÂÄæÂêë‰∫é‰ΩøÁî®‰∫åÁ∫ßÁ¥¢Âºï + ÂõûË°®ÁöÑÊñπÂºèÊâßË°åÊü•ËØ¢„ÄÇ Ë¶ÜÁõñÁ¥¢Âºï# Â¶ÇÊûúÈúÄË¶ÅÊü•ËØ¢ÁöÑÂàóÂåÖÂê´Âú®‰∫åÁ∫ßÁ¥¢Âºï‰∏≠ÔºåÂ∞±ÂèØ‰ª•ÈÅøÂÖçÂõûË°®Êü•ËØ¢ÔºåËøôÁßçÂè™ÈúÄË¶ÅÁî®Âà∞Á¥¢ÂºïÁöÑÊü•ËØ¢ÊñπÂºèÁß∞‰∏∫Á¥¢ÂºïË¶ÜÁõñ„ÄÇ‰æãÂ¶ÇÂØπ‰∫éÁ¥¢Âºïidx_name_birthday_phone 1SELECT name, birthday, phone FROM person_info WHERE name &gt; 'Asa' AND name &lt; 'Barlow' ÂêàÁêÜÂú∞Âª∫Á´ãÁ¥¢Âºï# Âè™ÁªôÊêúÁ¥¢„ÄÅÊéíÂ∫è„ÄÅÂàÜÁªÑÁöÑÂàóÂàõÂª∫Á¥¢Âºï Âç≥Âè™ÁªôÂá∫Áé∞Âú® WHERE„ÄÅORDER BY„ÄÅGROUP BY Â≠êÂè•‰∏≠ÁöÑÂàóÂàõÂª∫Á¥¢ÂºïÔºõ ÂàóÁöÑÊñπÂ∑ÆË∂äÂ§ßË∂äÈÄÇÂêàÂª∫Á´ãÁ¥¢Âºï ÂàóÁöÑÊï∞ÊçÆË∂äÂàÜÊï£ÔºåË∂äÈÄÇÂêàÁ¥¢ÂºïÊü•ËØ¢„ÄÇ‰∏æ‰∏™ÊûÅÁ´ØÁöÑ‰æãÂ≠êÔºåÊï∞ÊçÆÈÉΩÁõ∏ÂêåÁöÑÂàóÔºåÂØπËøôÊ†∑ÁöÑÂàóÂª∫Á´ãÁ¥¢ÂºïÊØ´Êó†ÊÑè‰πâÔºõ ÂàóÁöÑÊï∞ÊçÆÁ±ªÂûãË∂äÂ∞èË∂äÈÄÇÂêàÂª∫Á´ãÁ¥¢Âºï ÊØîËæÉÊï∞ÊçÆÂ§ßÂ∞èÊõ¥Âø´ÔºåÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥Êõ¥Â∞èÔºõ Á¥¢ÂºïÂ≠óÁ¨¶‰∏≤ÁöÑÂâçÁºÄ 1234567CREATE TABLE person_info( name VARCHAR(100) NOT NULL, birthday DATE NOT NULL, phone CHAR(11) NOT NULL, country varchar(100) NOT NULL, KEY idx_name_birthday_phone (name(10), birthday, phone)); ÂÖ∂‰∏≠ name(10) Ë°®Á§∫Âú®Âª∫Á´ãÁöÑB+Ê†ëÁ¥¢Âºï‰∏≠Âè™‰øùÁïôËÆ∞ÂΩïÁöÑÂâç10‰∏™Â≠óÁ¨¶ÁöÑÁºñÁ†ÅÔºå‰ΩÜÊòØËØ•Á¥¢Âºï‰∏çÊîØÊåÅ name ÊéíÂ∫è 1SELECT * FROM person_info ORDER BY name LIMIT 10; ËÆ©Á¥¢ÂºïÂàóÂú®ÊØîËæÉË°®ËææÂºè‰∏≠ÂçïÁã¨Âá∫Áé∞ 12WHERE my_col * 2 &lt; 4WHERE my_col &lt; 4/2 Â¶ÇÊûúÂàóÊòØ‰ª•Êüê‰∏™Ë°®ËææÂºèÊàñËÄÖÂáΩÊï∞Ë∞ÉÁî®ÂΩ¢ÂºèÂá∫Áé∞ÊòØÁî®‰∏çÂà∞Á¥¢ÂºïÁöÑÔºåÊØîÂ¶Ç‰∏äÈù¢ÁöÑmy_col * 2Ôºõ ÂºÄÂêØ‰∏ªÈîÆAUTO_INCREMENTÂ±ûÊÄß ÂèØÂáèÂ∞ëÈ°µÂàÜË£ÇÂíåËÆ∞ÂΩïÁßª‰ΩçÁöÑÊ¨°Êï∞„ÄÇ MySQLÁöÑÊï∞ÊçÆÁõÆÂΩï# Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª# InnoDB„ÄÅMyISAMÁ≠âÂ≠òÂÇ®ÂºïÊìéÈÉΩÊòØÊääË°®Â≠òÂÇ®Âú®Á£ÅÁõò‰∏ä„ÄÇÊìç‰ΩúÁ≥ªÁªüÈÄöËøáÊñá‰ª∂Á≥ªÁªüÁÆ°ÁêÜÁ£ÅÁõò„ÄÇ InnoDB„ÄÅMyISAMÁ≠âÂ≠òÂÇ®ÂºïÊìé $ \Leftrightarrow $ Êñá‰ª∂Á≥ªÁªü $ \Leftrightarrow $ Á£ÅÁõò Êï∞ÊçÆÁõÆÂΩï# Êï∞ÊçÆÁõÆÂΩïÂíåÂÆâË£ÖÁõÆÂΩïÁöÑÂå∫Âà´# Êï∞ÊçÆÁõÆÂΩïÊòØÁî®Êù•Â≠òÂÇ®MySQLÂú®ËøêË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÊï∞ÊçÆÔºåË¶Å‰∏éMySQLÁöÑÂÆâË£ÖÁõÆÂΩïÂå∫Âà´ÂºÄÊù•„ÄÇ Êü•ÊâæÊï∞ÊçÆÁõÆÂΩï# Êï∞ÊçÆÁõÆÂΩïÁöÑÁªìÊûÑ# Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫# ÊØèÊñ∞Âª∫‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÔºåMySQLÊâßË°å‰∫ÜÔºö Âú®Êï∞ÊçÆÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™ÂíåÊï∞ÊçÆÂ∫ìÂêçÂêåÂêçÁöÑÂ≠êÁõÆÂΩïÔºõ Âπ∂Âú®ËØ•Â≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™db.optÊñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂‰∏≠ÂåÖÂê´‰∫ÜËØ•Êï∞ÊçÆÂ∫ìÁöÑÂêÑÁßçÂ±ûÊÄßÔºåÊØîÊñπËØ¥ËØ•Êï∞ÊçÆÂ∫ìÁöÑÂ≠óÁ¨¶ÈõÜÂíåÊØîËæÉËßÑÂàôÁ≠â„ÄÇ Êü•ÁúãÊï∞ÊçÆÂ∫ì Êü•ÁúãÊï∞ÊçÆÁõÆÂΩï Èô§‰∫Üinformation_schemaËøô‰∏™Á≥ªÁªüÊï∞ÊçÆÂ∫ìÂ§ñÔºåÂÖ∂‰ªñÁöÑÊï∞ÊçÆÂ∫ìÂú®Êï∞ÊçÆÁõÆÂΩï‰∏ãÈÉΩÊúâÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï„ÄÇ Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫# ÊØè‰∏™Ë°®ÂåÖÂê´‰∏§ÈÉ®ÂàÜ‰ø°ÊÅØÔºö Ë°®ÁªìÊûÑÁöÑÂÆö‰πâ Áî®Ë°®Âêç.frmÊñá‰ª∂Êù•ÊèèËø∞Ë°®ÁªìÊûÑ Ë°®‰∏≠ÁöÑÊï∞ÊçÆ InnoDB: Êï∞ÊçÆÂ≠òÂú®Áã¨Á´ãË°®Á©∫Èó¥(file-per-table tablespace)‰∏≠ÔºåÂç≥ test.ibd Êñá‰ª∂ MyISAM: Ë°®Âêç.MYDË°®Á§∫Ë°®ÁöÑÊï∞ÊçÆÊñá‰ª∂„ÄÅË°®Âêç.MYIË°®Á§∫Ë°®ÁöÑÁ¥¢ÂºïÊñá‰ª∂ Êñá‰ª∂Á≥ªÁªüÂØπÊï∞ÊçÆÂ∫ìÁöÑÂΩ±Âìç# Êï∞ÊçÆÂ∫ìÂêçÂíåË°®Âêç‰∏çÂæóË∂ÖËøáÊñá‰ª∂Á≥ªÁªüÊâÄÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÈïøÂ∫¶ ÁâπÊÆäÂ≠óÁ¨¶ MySQL‰ºöÊääÊï∞ÊçÆÂ∫ìÂêçÂíåË°®Âêç‰∏≠Èô§Êï∞Â≠óÂíåÊãâ‰∏ÅÂ≠óÊØçÂ§ñÁöÑÊâÄÊúâÂ≠óÁ¨¶Âú®Êñá‰ª∂ÂêçÈáåÈÉΩÊò†Â∞ÑÊàê @+ÁºñÁ†ÅÂÄºÁöÑÂΩ¢ÂºèÔºåÂ¶Çtest?.frm $ \rightarrow $ test@003f.frm Êñá‰ª∂Â§ßÂ∞èÂèóÊñá‰ª∂Á≥ªÁªüÈôêÂà∂ MySQLÁ≥ªÁªüÊï∞ÊçÆÂ∫ìÁÆÄ‰ªã# mysql Â≠òÂÇ®‰∫ÜMySQLÁöÑË¥¶Êà∑ÂíåÊùÉÈôê‰ø°ÊÅØÔºå‰∏Ä‰∫õÂ≠òÂÇ®ËøáÁ®ã„ÄÅ‰∫ã‰ª∂ÁöÑÂÆö‰πâ‰ø°ÊÅØÔºå‰∏Ä‰∫õËøêË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÊó•Âøó‰ø°ÊÅØ„ÄÅ‰ª•ÂèäÊó∂Âå∫‰ø°ÊÅØÁ≠â information_schema Ëøô‰∏™Êï∞ÊçÆÂ∫ì‰øùÂ≠òÁùÄMySQLÊúçÂä°Âô®Áª¥Êä§ÁöÑÊâÄÊúâÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÁöÑ‰ø°ÊÅØÔºåÊØîÂ¶ÇË°®„ÄÅËßÜÂõæ„ÄÅËß¶ÂèëÂô®„ÄÅÂàó„ÄÅÁ¥¢ÂºïÁ≠â performance_schema Ëøô‰∏™Êï∞ÊçÆÂ∫ìÈáå‰∏ªË¶Å‰øùÂ≠òMySQLÊúçÂä°Âô®ËøêË°åËøáÁ®ã‰∏≠ÁöÑ‰∏Ä‰∫õÁä∂ÊÄÅ‰ø°ÊÅØÔºåÂåÖÊã¨ÁªüËÆ°ÊúÄËøëÊâßË°åÁöÑËØ≠Âè•ÔºåÊâßË°åÊó∂Èó¥ÔºåÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµÁ≠â sys Ëøô‰∏™Êï∞ÊçÆÂ∫ì‰∏ªË¶ÅÊòØÈÄöËøáËßÜÂõæÁöÑÂΩ¢ÂºèÊääinformation_schemaÂíåperformance_schemaÁªìÂêàËµ∑Êù• #]]></content>
      <tags>
        <tag>MySQL, ÈïøÊñá</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SQL Notes]]></title>
    <url>%2F2019%2F09%2F05%2F2019-9-5%2F</url>
    <content type="text"><![CDATA[ËÅîË°®Êü•ËØ¢ Â≠óÁ¨¶ÊõøÊç¢ Ê≠£ÂàôÊü•ËØ¢ ÂØºÂÖ•SQLÊñá‰ª∂ ÊéíÂ∫è ËÅîË°®Êü•ËØ¢# 12345678SELECT library.id, library.name, r.reader_sum, b.book_sum FROM library INNER JOIN( SELECT library_id, count(*) AS reader_sum FROM reader WHERE library_group_id = 10 GROUP BY library_id ) AS rON r.library_id = library.id INNER JOIN( SELECT library_id, count( * ) AS book_sum FROM book WHERE library_group_id = 10 GROUP BY library_id ) AS bON b.library_id = library.id; Â≠óÁ¨¶ÊõøÊç¢# 1UPDATE account SET grade = replace(grade,'Á¥ö','Á∫ß'); Ê≠£ÂàôÊü•ËØ¢# 12SELECT * FROM account WHERE grade REGEXP 'Á¥ö'; -- Êü•ËØ¢ÂåÖÂê´SELECT name FROM person WHERE name REGEXP '^[aeiou]|ok$'; -- aeiouÂºÄÂ§¥ÔºåÊàñokÁªìÂ∞æ ÂØºÂÖ•SQLÊñá‰ª∂# 1234SET @@global.max_allowed_packet = 1024*1024*1024;SET @@global.sql_mode ='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';SET @@sql_mode ='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'; ÊéíÂ∫è# 1SELECT * FROM book WHERE library_id = 257 AND (title REGEXP "Êàë" OR author REGEXP "Êàë") ORDER BY LOCATE("Êàë", CONCAT(title, author)), LENGTH(title), LENGTH(author);]]></content>
      <tags>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[È∫ªÁúÅÁêÜÂ∑• MapReduce ÂÆûÈ™å]]></title>
    <url>%2F2019%2F04%2F30%2F2019-4-30%2F</url>
    <content type="text"><![CDATA[MapReduceÊâßË°åÊ¶ÇËø∞ Â∫èË®ÄÔºöÁÜüÊÇâÊ∫ê‰ª£Á†Å Part I: Map/Reduce ËæìÂÖ•ÂíåËæìÂá∫ Part II: Single-workerÂçïËØçÁªüËÆ° Part III: ÂàÜÂ∏ÉÂºè MapReduce ‰ªªÂä° Part IV: workerÈîôËØØÂ§ÑÁêÜ ÂéüÊñáÈìæÊé• MapReduceÊâßË°åÊ¶ÇËø∞# ËÆ∫ÊñáÂú∞ÂùÄ ÈÄöËøáËá™Âä®Â∞ÜËæìÂÖ•Êï∞ÊçÆÂàíÂàÜ‰∏∫$M$‰∏™ÁâáÊÆµÔºåMapË∞ÉÁî®ÂàÜÂ∏ÉÂú®Â§öÂè∞Êú∫Âô®‰∏ä„ÄÇ ‰∏çÂêåÁâáÊÆµÁöÑËæìÂÖ•Êï∞ÊçÆÂèØ‰ª•Áî±‰∏çÂêåÁöÑÊú∫Âô®Âπ∂Ë°åÂ§ÑÁêÜ„ÄÇ ReduceË∞ÉÁî®ÁöÑÂàÜÂ∏ÉÂºèÂàôÈÄöËøá‰ΩøÁî®ÂàÜÂå∫ÂáΩÊï∞(Âç≥ $hash(key)$ $mod$ $R$)Â∞ÜÈîÆÁ©∫Èó¥ÂàíÂàÜ‰∏∫$R$‰∏™ÈÉ®ÂàÜÊù•ÂÆûÁé∞Ôºå$R$ÁöÑÂ§ßÂ∞èÂíåÂàÜÂå∫ÂáΩÊï∞Áî±Áî®Êà∑ÊåáÂÆö„ÄÇ‰∏äÂõæÊòæÁ§∫‰∫ÜMapReduceÊìç‰ΩúÁöÑÊÄª‰ΩìÊµÅÁ®ã„ÄÇ ÂΩìÁî®Êà∑Á®ãÂ∫èË∞ÉÁî®MapReduceÂáΩÊï∞Êó∂Ôºå‰ºöÂèëÁîü‰ª•‰∏ãÊìç‰ΩúÂ∫èÂàó(Âõæ‰∏≠ÁöÑÁºñÂè∑Ê†áÁ≠æÂØπÂ∫î‰∫é‰∏ãÈù¢ÁöÑÊï∞Â≠ó)Ôºö Áî®Êà∑Á®ãÂ∫è‰∏≠ÁöÑMapReduceÂ∫ìÈ¶ñÂÖàÂ∞ÜËæìÂÖ•Êñá‰ª∂ÊãÜÂàÜ‰∏∫16MBÂà∞64MB(Áî®Êà∑ÂèØÈÄöËøáÂèÇÊï∞ËÆæÁΩÆ)ÁöÑ$M$‰∏™ÁâáÊÆµ„ÄÇ ÁÑ∂ÂêéÔºåÂÆÉ‰ºöÂú®‰∏ÄÁªÑËÆ°ÁÆóÊú∫‰∏äÂêØÂä®ËØ•Á®ãÂ∫èÁöÑËÆ∏Â§öÂâØÊú¨Ôºõ master‰∏∫ÂâØÊú¨‰πã‰∏ÄÔºåÂÖ∂‰ΩôÁöÑÊòØÁî±masterÂàÜÈÖçÂ∑•‰ΩúÁöÑworkers„ÄÇ Êúâ$M$‰∏™Map‰ªªÂä°Âíå$R$‰∏™Reduce‰ªªÂä°ÈúÄË¶ÅÂàÜÈÖç„ÄÇmaster‰∏∫ÊØè‰∏™Á©∫Èó≤ÁöÑworkerÂàÜÈÖç‰∏Ä‰∏™Map‰ªªÂä°ÊàñReduce‰ªªÂä°Ôºõ Ë¢´ÂàÜÈÖçMap‰ªªÂä°ÁöÑworkerËØªÂèñÁõ∏Â∫îËæìÂÖ•ÁâáÊÆµ„ÄÇ ÂÆÉ‰ªéËæìÂÖ•ÁâáÊÆµ‰∏≠Ëß£ÊûêÈîÆ/ÂÄºÂØπÔºåÂπ∂Â∞ÜÈîÆ/ÂÄºÂØπ‰º†ÈÄíÁªôÁî®Êà∑ÂÆö‰πâÁöÑMapÂáΩÊï∞„ÄÇ MapÂáΩÊï∞ÁîüÊàêÁöÑ‰∏≠Èó¥ÈîÆ/ÂÄºÂØπÁºìÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠Ôºõ ÂÜÖÂ≠ò‰∏≠ÁöÑÈîÆ\ÂÄºÂØπË¢´Âë®ÊúüÊÄßÂú∞ÂÜôÂÖ•Âà∞Êú¨Âú∞Á£ÅÁõòÔºåÂπ∂ÈÄöËøáÂàÜÂå∫ÂáΩÊï∞ÂàíÂàÜ‰∏∫$R$‰∏™ÂàÜÂå∫„ÄÇ ÈîÆ\ÂÄºÂØπÂú®Êú¨Âú∞Á£ÅÁõòÁöÑ‰ΩçÁΩÆÂ∞ÜË¢´‰º†ÂõûÂà∞masterÔºåmasterÂÜçÂ∞Ü‰ΩçÁΩÆ‰ø°ÊÅØËΩ¨ÂèëÁªôReduce workerÔºõ ÂΩìReduce workerÊî∂Âà∞Êù•Ëá™masterÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÂêéÔºåÂÆÉ‰ΩøÁî®ËøúÁ®ãËøáÁ®ãË∞ÉÁî®(RPC)‰ªéMap workerÁöÑÊú¨Âú∞Á£ÅÁõòËØªÂèñÁºìÂÜ≤Êï∞ÊçÆ„ÄÇ ÂΩìReduce workerËØªÂèñ‰∫ÜÊâÄÊúâ‰∏≠Èó¥Êï∞ÊçÆÊó∂ÔºåÂÆÉ‰ºöÊ†πÊçÆ‰∏≠Èó¥ÈîÆËøõË°åÊéíÂ∫èÔºå‰ª•‰æøÂ∞ÜÊâÄÊúâÁõ∏ÂêåÁöÑ‰∏≠Èó¥ÈîÆÁªÑÂêàÂú®‰∏ÄËµ∑„ÄÇ ‰πãÊâÄ‰ª•ÈúÄË¶ÅÊéíÂ∫èÊòØÂõ†‰∏∫ÈÄöÂ∏∏ÊúâËÆ∏Â§ö‰∏çÂêåÁöÑÈîÆÊò†Â∞ÑÂà∞Âêå‰∏Ä‰∏™reduce‰ªªÂä°„ÄÇ Â¶ÇÊûú‰∏≠Èó¥Êï∞ÊçÆÈáèÂ§™Â§ßËÄåÊó†Ê≥ïÂÆπÁ∫≥Âú®ÂÜÖÂ≠ò‰∏≠ÔºåÂàô‰ΩøÁî®Â§ñÈÉ®ÊéíÂ∫èÔºõ Reduce workerÂØπÊéíÂ•ΩÂ∫èÁöÑ‰∏≠Èó¥Êï∞ÊçÆËøõË°åÈÅçÂéÜ„ÄÇÂØπÈÅáÂà∞ÁöÑÊØè‰∏™ÂîØ‰∏Ä‰∏≠Èó¥ÈîÆÔºåÂÆÉÂ∞ÜÈîÆÂíåÁõ∏Â∫îÁöÑ‰∏ÄÁªÑ‰∏≠Èó¥ÂÄº‰º†ÈÄíÁªôÁî®Êà∑ÁöÑReduceÂáΩÊï∞„ÄÇ ReduceÂáΩÊï∞ÁöÑËæìÂá∫ÈôÑÂä†Âà∞Ê≠§ReduceÂàÜÂå∫ÁöÑÊúÄÁªàËæìÂá∫Êñá‰ª∂„ÄÇ ÂÆåÊàêÊâÄÊúâMap‰ªªÂä°ÂíåReduce‰ªªÂä°ÂêéÔºåmaster‰ºöÂî§ÈÜíÁî®Êà∑Á®ãÂ∫è„ÄÇ Ê≠§Êó∂ÔºåÁî®Êà∑Á®ãÂ∫è‰∏≠ÁöÑMapReduce()Â∞ÜËøîÂõûÁî®Êà∑‰ª£Á†Å„ÄÇ Â∫èË®ÄÔºöÁÜüÊÇâÊ∫ê‰ª£Á†Å# Êèê‰æõÁöÑMap/Reduce‰ª£Á†ÅÊîØÊåÅ‰∏§ÁßçÊìç‰ΩúÊ®°ÂºèÔºåÂç≥‰∏≤Ë°åÂíåÂàÜÂ∏ÉÂºè„ÄÇ Âú®ÂâçËÄÖ‰∏≠ÔºåmapÂíåreduce‰ªªÂä°ÊØèÊ¨°ÊâßË°å‰∏Ä‰∏™ÔºöÈ¶ñÂÖàÊòØÁ¨¨‰∏Ä‰∏™map‰ªªÂä°ÊâßË°åÂÆåÊàêÔºåÁÑ∂ÂêéÊòØÁ¨¨‰∫å‰∏™ÔºåÁÑ∂ÂêéÊòØÁ¨¨‰∏â‰∏™ÔºåÁ≠âÁ≠â„ÄÇÂΩìÊâÄÊúâmap‰ªªÂä°ÂÆåÊàêÂêéÔºåÊâßË°åÁ¨¨‰∏Ä‰∏™reduce‰ªªÂä°ÔºåÁÑ∂ÂêéÊòØÁ¨¨‰∫å‰∏™ÔºåÁ≠âÁ≠â„ÄÇËøôÁßçÊ®°ÂºèËôΩÁÑ∂‰∏çÂø´Ôºå‰ΩÜÊñπ‰æøË∞ÉËØï„ÄÇ ÂàÜÂ∏ÉÂºèÊ®°ÂºèËøêË°åÁùÄËÆ∏Â§öworkerÁ∫øÁ®ãÔºåËøô‰∫õÁ∫øÁ®ãÂÖàÂπ∂Ë°åÊâßË°åmap‰ªªÂä°ÔºåÁÑ∂Âêéreduce‰ªªÂä°„ÄÇ ËøôË¶ÅÂø´ÂæóÂ§öÔºå‰ΩÜ‰πüÈöæ‰ª•Ë∞ÉËØï„ÄÇmapreduceÂåÖÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑMap/ReduceÂ∫ì„ÄÇ Â∫îÁî®Á®ãÂ∫èÈÄöÂ∏∏Ë∞ÉÁî®master.go‰∏≠ÁöÑDistributed()Êù•ÂêØÂä®ÂàÜÂ∏ÉÂºèÊ®°ÂºèÔºåËÄåË∞ÉÁî®master.go‰∏≠ÁöÑSequential()Êù•Ëé∑ÂèñË∞ÉËØïÁöÑ‰∏≤Ë°åÊâßË°å„ÄÇ ‰ª£Á†ÅÂ¶Ç‰∏ãÊâßË°åÔºö ËØ•Â∫îÁî®Á®ãÂ∫èÊèê‰æõ‰∫ÜËÆ∏Â§öËæìÂÖ•Êñá‰ª∂„ÄÅ‰∏Ä‰∏™mapÂáΩÊï∞„ÄÅ‰∏Ä‰∏™reduceÂáΩÊï∞Âíåreduce‰ªªÂä°ÁöÑÊï∞ÈáèÔºà$nReduce$ÔºâÔºõ ÂàõÂª∫master„ÄÇ masterÂêØÂä®‰∏Ä‰∏™RPCÊúçÂä°Âô®(ÂèÇËßÅmaster_rpc.go)ÔºåÂπ∂Á≠âÂæÖworkerÊ≥®ÂÜå(‰ΩøÁî®RPCË∞ÉÁî®Register()ÔºåÂú®master.go‰∏≠ÂÆö‰πâ)„ÄÇ ÂΩì‰ªªÂä°ÂèòÂæóÂèØÁî®Êó∂(Âú®Ê≠•È™§4Âíå5‰∏≠)Ôºåschedule()(‰Ωç‰∫éschedule.go)ÂÜ≥ÂÆöÂ¶Ç‰ΩïÂ∞ÜËøô‰∫õ‰ªªÂä°ÂàÜÈÖçÁªôworkers‰ª•ÂèäÂ¶Ç‰ΩïÂ§ÑÁêÜworkerÊïÖÈöúÔºõ masterÂ∞ÜÊØè‰∏™ËæìÂÖ•Êñá‰ª∂ËßÜ‰∏∫‰∏Ä‰∏™ Map‰ªªÂä°ÔºåÂπ∂‰∏∫ÊØè‰∏™Map‰ªªÂä°Ëá≥Â∞ëË∞ÉÁî®‰∏ÄÊ¨°(at-least-once)doMap()(common_map.go)ÔºåÂèØ‰ª•ÈÄöËøáÁõ¥Êé•‰ΩøÁî®Sequential()ÊàñÈÄöËøáÂêëworker (worker.go)ÂèëÂá∫DoTask RPCÊù•ÂÆûÁé∞„ÄÇÊØèÊ¨°Ë∞ÉÁî®doMap()ÈÉΩ‰ºöËØªÂèñÈÄÇÂΩìÁöÑÊñá‰ª∂ÔºåË∞ÉÁî®ËØ•Êñá‰ª∂‰∏≠ÁöÑmapÂáΩÊï∞ÔºåÂπ∂Â∞ÜÁîüÊàêÁöÑÈîÆ/ÂÄºÂØπÂÜôÂÖ•$nReduce$‰∏™‰∏≠Èó¥Êñá‰ª∂„ÄÇdoMap() ÂØπÊØè‰∏™ÈîÆÂìàÂ∏åÂåñ‰ª•‰æøÊåëÈÄâ‰∏≠Èó¥Êñá‰ª∂Âíå Â∞Ü‰ºöÂ§ÑÁêÜÈîÆÁöÑreduce‰ªªÂä°„ÄÇ ÂÆåÊàêÊâÄÊúâmap‰ªªÂä°ÂêéÔºåÂ∞Ü‰ºöÊúâ$nMap \times nReduce$‰∏™Êñá‰ª∂„ÄÇ ÊØè‰∏™Êñá‰ª∂ÂêçÈÉΩÂåÖÂê´‰∏Ä‰∏™ÂâçÁºÄÔºåmap‰ªªÂä°ÁºñÂè∑Âíåreduce‰ªªÂä°ÁºñÂè∑„ÄÇ Â¶ÇÊûúÊúâ‰∏§‰∏™map‰ªªÂä°Âíå‰∏â‰∏™reduce‰ªªÂä°Ôºåmap‰ªªÂä°Â∞ÜÂàõÂª∫Â¶Ç‰∏ãÂÖ≠‰∏™‰∏≠Èó¥Êñá‰ª∂Ôºö mrtmp.xxx-0-0 mrtmp.xxx-0-1 mrtmp.xxx-0-2 mrtmp.xxx-1-0 mrtmp.xxx-1-1 mrtmp.xxx-1-2 ÊØè‰∏™workerÂøÖÈ°ªËÉΩÂ§üËØªÂèñÁî±‰ªª‰ΩïÂÖ∂‰ªñworkerÂÜôÂÖ•ÁöÑÊñá‰ª∂‰ª•ÂèäËæìÂÖ•Êñá‰ª∂„ÄÇ Áé∞ÂÆûÈÉ®ÁΩ≤Âà©Áî®ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®Á≥ªÁªü(Â¶ÇGFS)Êù•ÂÖÅËÆ∏Ê≠§ËØªÂèñÔºåÂç≥‰ΩøworkersÂú®‰∏çÂêåÁöÑËÆ°ÁÆóÊú∫‰∏äËøêË°å„ÄÇ Âú®Êú¨ÂÆûÈ™å‰∏≠ÔºåÊÇ®Â∞ÜÂú®Âêå‰∏ÄÂè∞ËÆ°ÁÆóÊú∫‰∏äËøêË°åÊâÄÊúâworkersÔºåÂπ∂‰ΩøÁî®Êú¨Âú∞Êñá‰ª∂Á≥ªÁªüÔºõ Êé•‰∏ãÊù•master‰∏∫ÊØè‰∏™reduce‰ªªÂä°Ëá≥Â∞ëË∞ÉÁî®‰∏ÄÊ¨°(at-least-once) doReduce()(common_reduce.go)„ÄÇ ‰∏édoMap()‰∏ÄÊ†∑ÔºåÂèØ‰ª•Áõ¥Êé•ÊàñÈÄöËøáworkerÊù•ÂÆåÊàê„ÄÇ Áî®‰∫éreduce‰ªªÂä°rÁöÑ`doReduce()‰ªéÊØè‰∏™map‰ªªÂä°‰∏≠Êî∂ÈõÜÁ¨¨$r$‰∏™‰∏≠Èó¥Êñá‰ª∂ÔºåÂπ∂‰∏∫Ëøô‰∫õÊñá‰ª∂‰∏≠Âá∫Áé∞ÁöÑÊØè‰∏™ÈîÆË∞ÉÁî®reduceÂáΩÊï∞„ÄÇ reduce‰ªªÂä°ÁîüÊàê$nReduce$‰∏™ÁªìÊûúÊñá‰ª∂Ôºõ masterË∞ÉÁî®mr.merge()(master_splitmerge.go)ÔºåÂ∞Ü‰∏ä‰∏ÄÊ≠•ÁîüÊàêÁöÑÊâÄÊúâ$nReduce$‰∏™Êñá‰ª∂ÂêàÂπ∂‰∏∫Âçï‰∏™ËæìÂá∫Ôºõ masterÂêëÊØè‰∏™wokerÂèëÈÄÅShutdown RPCÔºåÁÑ∂ÂêéÂÖ≥Èó≠Ëá™Â∑±ÁöÑRPCÊúçÂä°Âô®„ÄÇ ËØ¥ÊòéÔºöÂú®ÂêéÁª≠ÁöÑÁªÉ‰π†‰∏≠ÔºåÊÇ®ÂøÖÈ°ªÁºñÂÜô/‰øÆÊîπdoMap()ÔºådoReduce()Âíåschedule()ÔºåÂÆÉ‰ª¨ÂàÜÂà´‰Ωç‰∫écommon_map.go„ÄÅcommon_reduce.goÂíåschedule.go‰∏≠„ÄÇ ÊÇ®ËøòÂøÖÈ°ªÂú®../main/wc.go‰∏≠ÁºñÂÜômapÂáΩÊï∞ÂíåreduceÂáΩÊï∞„ÄÇ Part I: Map/Reduce ËæìÂÖ•ÂíåËæìÂá∫# Êèê‰æõÁöÑMap/ReduceÂÆûÁé∞Áº∫Â∞ëÈÉ®ÂàÜ‰ª£Á†Å„ÄÇ Âú®ÁºñÂÜôÁ¨¨‰∏Ä‰∏™Map/ReduceÂáΩÊï∞ÂØπ‰πãÂâçÔºåÊÇ®ÈúÄË¶Å‰øÆÊîπsequentialÁöÑÂÆûÁé∞‰ª£Á†Å„ÄÇ ÁâπÂà´ÊòØÔºåÊèê‰æõÁöÑ‰ª£Á†ÅÁº∫Â∞ë‰∏§‰∏™ÂÖ≥ÈîÆÈÉ®ÂàÜÔºöÂàÜÈÖç‰∏Ä‰∏™map‰ªªÂä°ËæìÂá∫ÁöÑÂáΩÊï∞Ôºå‰ª•ÂèäÊî∂ÈõÜ‰∏Ä‰∏™reduce‰ªªÂä°ÊâÄÊúâËæìÂÖ•ÁöÑÂáΩÊï∞„ÄÇ Ëøô‰∫õ‰ªªÂä°ÂàÜÂà´Áî±common_map.go‰∏≠ÁöÑdoMap()ÂáΩÊï∞Âíåcommon_reduce.go‰∏≠ÁöÑdoReduce()ÂáΩÊï∞ÊâßË°å„ÄÇ ‰∏∫‰∫ÜÂ∏ÆÂä©ÊÇ®Á°ÆÂÆöÊòØÂê¶Ê≠£Á°ÆÂÆûÁé∞‰∫ÜdoMap()ÂíådoReduce()ÔºåÊàë‰ª¨‰∏∫ÊÇ®Êèê‰æõ‰∫Ü‰∏Ä‰∏™GoÊµãËØïÂ•ó‰ª∂(test_test.go)Áî®‰∫éÊ£ÄÊü•Êñá‰ª∂‰∏≠ÂÆûÁé∞„ÄÇ ‰æãÂ¶ÇÊµãËØï‰øÆÊîπÂêéÁöÑsequenceÂÆûÁé∞‰ª£Á†ÅÔºåËØ∑ËøêË°åÔºö go test -run Sequential or go test -v -run Sequential Ëß£Á≠îÔºö ËØ•ÈÉ®ÂàÜ‰ªªÂä°Âè™ÈúÄË¶ÅË°•ÂÖ®common_map.go‰∏≠ÁöÑdoMap()Âíåcommon_reduce.go‰∏≠ÁöÑdoReduce()ÁöÑ‰ª£Á†ÅÔºåË°•ÂÖ®ÁöÑÁªìÊûúÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102package mapreduceimport ( "hash/fnv" "io/ioutil" "encoding/json" "log" "os")func doMap( jobName string, // the name of the MapReduce job mapTask int, // which map task this is inFile string, nReduce int, // the number of reduce task that will be run ("R" in the paper) mapF func(filename string, content string) []KeyValue,) &#123; // // doMap manages one map task: it should read one of the input files // (inFile), call the user-defined map function (mapF) for that file's // content, and partition mapF's output into nReduce intermediate files. // // There is one intermediate file per reduce task. The file name // includes both the map task number and the reduce task number. Use // the filename generated by reduceName(jobName, mapTask, r) // as the intermediate file for reduce task r. Call ihash() (see // below) on each key, mod nReduce, to pick r for a key/value pair. // // mapF() is the map function provided by the application. The first // argument should be the input file name, though the map function // typically ignores it. The second argument should be the entire // input file content. mapF() returns a slice containing the // key/value pairs for reduce; see common.go for the definition of // KeyValue. // // Look at Go's ioutil and os packages for functions to read // and write files. // // Coming up with a scheme for how to format the key/value pairs on // disk can be tricky, especially when taking into account that both // keys and values could contain newlines, quotes, and any other // character you can think of. // // One format often used for serializing data to a byte stream that the // other end can correctly reconstruct is JSON. You are not required to // use JSON, but as the output of the reduce tasks *must* be JSON, // familiarizing yourself with it here may prove useful. You can write // out a data structure as a JSON string to a file using the commented // code below. The corresponding decoding functions can be found in // common_reduce.go. // // enc := json.NewEncoder(file) // for _, kv := ... &#123; // err := enc.Encode(&amp;kv) // // Remember to close the file after you have written all the values! // // Your code here (Part I). //ËØªÂèñËæìÂÖ•Êñá‰ª∂ content, err := ioutil.ReadFile(inFile) if err != nil &#123; log.Fatal("doMapËØªÂèñËæìÂÖ•Êñá‰ª∂ÈîôËØØ",err) &#125; //mapÊìç‰Ωú kvPairs := mapF(inFile, string(content)) //Ë∞ÉÁî®mapFÔºåËøîÂõûÈîÆÂÄºÂØπ //Â∞ÜÈîÆÂÄºÂØπÂÜôÂÖ•Âà∞‰∏≠Èó¥Êñá‰ª∂ tmpFiles := make([] *os.File, nReduce) //R‰∏™‰∏≠Èó¥Êñá‰ª∂ encoders := make([] *json.Encoder, nReduce) for i := 0; i &lt; nReduce; i++ &#123; tmpFileName := reduceName(jobName, mapTask, i) //‰∏≠Èó¥Êñá‰ª∂Âêç,mrtmp.test-mapTask-i tmpFiles[i], err = os.Create(tmpFileName) //ÂàõÂª∫‰∏≠Èó¥Êñá‰ª∂mrtmp.test-mapTask-i if err != nil &#123; log.Fatal("doMapÁîüÊàê‰∏≠Èó¥Êñá‰ª∂ÈîôËØØ", err) &#125; defer tmpFiles[i].Close() encoders[i] = json.NewEncoder(tmpFiles[i]) if err != nil &#123; log.Fatal("doMapÁºñÁ†ÅÈîôËØØ", err) &#125; &#125; for _ , kv := range kvPairs &#123; hashKey := ihash(kv.Key) % nReduce //Ê†πÊçÆÈîÆÂ∞ÜÈîÆÂÄºÂØπÂàÜÊàêRÁªÑ err := encoders[hashKey].Encode(&amp;kv) //Â∞ÜR‰∏™ÈîÆÂÄºÂØπÂÜôÂÖ•R‰∏™‰∏≠Èó¥Êñá‰ª∂ if err != nil &#123; log.Fatal("doMapÁºñÁ†ÅÈîôËØØ", err) &#125; &#125;&#125;func ihash(s string) int &#123; h := fnv.New32a() h.Write([]byte(s)) return int(h.Sum32() &amp; 0x7fffffff)&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104package mapreduceimport ( "encoding/json" "log" "os" "sort")func doReduce( jobName string, // the name of the whole MapReduce job reduceTask int, // which reduce task this is outFile string, // write the output here nMap int, // the number of map tasks that were run ("M" in the paper) reduceF func(key string, values []string) string,) &#123; // // doReduce manages one reduce task: it should read the intermediate // files for the task, sort the intermediate key/value pairs by key, // call the user-defined reduce function (reduceF) for each key, and // write reduceF's output to disk. // // You'll need to read one intermediate file from each map task; // reduceName(jobName, m, reduceTask) yields the file // name from map task m. // // Your doMap() encoded the key/value pairs in the intermediate // files, so you will need to decode them. If you used JSON, you can // read and decode by creating a decoder and repeatedly calling // .Decode(&amp;kv) on it until it returns an error. // // You may find the first example in the golang sort package // documentation useful. // // reduceF() is the application's reduce function. You should // call it once per distinct key, with a slice of all the values // for that key. reduceF() returns the reduced value for that key. // // You should write the reduce output as JSON encoded KeyValue // objects to the file named outFile. We require you to use JSON // because that is what the merger than combines the output // from all the reduce tasks expects. There is nothing special about // JSON -- it is just the marshalling format we chose to use. Your // output code will look something like this: // // enc := json.NewEncoder(file) // for key := ... &#123; // enc.Encode(KeyValue&#123;key, reduceF(...)&#125;) // &#125; // file.Close() // // Your code here (Part I). //ÈÅçÂéÜÂ±û‰∫éËá™Â∑±ÁöÑ‰∏≠Èó¥Êñá‰ª∂ÔºåÂ∞ÜÈîÆÂÄºÂØπÂêàÂπ∂Âà∞kvs‰∏≠ kvs := make(map[string][]string) for i := 0; i &lt; nMap; i++ &#123; fileName := reduceName(jobName, i, reduceTask) file, err := os.Open(fileName) //ÊâìÂºÄ‰∏≠Èó¥Êñá‰ª∂mrtmp.test-i-reduceTask if err != nil &#123; log.Fatal("doReduceÊâìÂºÄÊñá‰ª∂ÈîôËØØ", err) &#125; dec := json.NewDecoder(file) for &#123; //ÊØè‰∏™‰∏≠Èó¥Êñá‰ª∂ÂèØËÉΩÂåÖÂê´Â§ö‰∏™ÈîÆÂÄºÂØπ var kv KeyValue err = dec.Decode(&amp;kv) //Ëß£Á†Å‰∏Ä‰∏™ÈîÆÂÄºÂØπ if err != nil &#123; break &#125; _, ok := kvs[kv.Key] if !ok &#123; //Âá∫Áé∞Êñ∞ÁöÑÈîÆÂàôÂàùÂßãÂåñkvs kvs[kv.Key] = []string&#123;&#125; &#125; kvs[kv.Key] = append(kvs[kv.Key], kv.Value) //Âä†ÂÖ•‰∏éÈîÆÂØπÂ∫îÁöÑÂÄº &#125; file.Close() &#125; //Â∞ÜÈîÆÈõÜÂêàÂà∞‰∏ÄËµ∑Âπ∂ÊéíÂ∫è var keys []string for k := range kvs &#123; keys = append(keys, k) &#125; sort.Strings(keys) //ÂàõÂª∫ËæìÂá∫Êñá‰ª∂ out := mergeName(jobName, reduceTask) file, err := os.Create(out) if err != nil &#123; log.Fatal("doReduceÂàõÂª∫ËæìÂá∫Êñá‰ª∂ÈîôËØØ", err) &#125; enc := json.NewEncoder(file) //reduceÊìç‰Ωú for _, k := range keys &#123; res := reduceF(k, kvs[k]) //Ë∞ÉÁî®ÂÆ¢Êà∑Á´ØÁöÑreduceFÔºåËøõË°åreduce enc.Encode(KeyValue&#123;k, res&#125;) //reduceÂêéÁöÑÈîÆÂÄºÂØπÂÜôÂÖ•Âà∞ËæìÂá∫Êñá‰ª∂ &#125; file.Close()&#125; ËøêË°ågo test -run SequentialÔºåÁªìÊûúÂ¶Ç‰∏ãÔºö Part II: Single-workerÂçïËØçÁªüËÆ°# Âú®ËØ•ÈÉ®ÂàÜÔºåÊÇ®Â∞ÜË¶ÅÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑMap/ReduceÁ§∫‰æã‚Äî‚ÄîÂçïËØçÁªüËÆ°„ÄÇ ÂÖ∑‰ΩìÊòØÈúÄË¶ÅÂÆûÁé∞main/wc.go‰∏≠ÁöÑmapF()ÂíåreduceF()ÂáΩÊï∞„ÄÇ ÊÇ®ÁöÑÂ∑•‰ΩúÊòØÊèíÂÖ•‰ª£Á†ÅÔºå‰ª•‰æøwc.goËøîÂõûËæìÂÖ•Êñá‰ª∂‰∏≠ÊØè‰∏™ÂçïËØçÂá∫Áé∞ÁöÑÊ¨°Êï∞„ÄÇ ‰∏Ä‰∏™ÂçïËØçÊòØ‰ªªÊÑèËøûÁª≠ÁöÑÂ≠óÊØçÂ∫èÂàóÔºåÂÖ∂‰∏≠Â≠óÊØçÂèØÁî®GolangÁöÑunicode.IsLetterÂáΩÊï∞Êù•Âà§Êñ≠„ÄÇ Âú®~/6.824/src/mainÁõÆÂΩï‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∫õË∑ØÂæÑÂêç‰∏∫pg-*.txtÂΩ¢ÂºèÁöÑËæìÂÖ•Êñá‰ª∂Ôºå ÂèØÁî®Â¶Ç‰∏ãÂëΩ‰ª§Áªôwc.go‰ΩøÁî®ËæìÂÖ•Êñá‰ª∂ËøêË°åÔºö go run wc.go master sequential pg-*.txt Êü•ÁúãMapReduceËÆ∫ÊñáÁöÑÁ¨¨2ÈÉ®ÂàÜ„ÄÇmapF()ÂíåreduceF()ÂáΩÊï∞‰∏éËÆ∫ÊñáÁ¨¨2.1ËäÇ‰∏≠ÁöÑÂáΩÊï∞Áï•Êúâ‰∏çÂêå„ÄÇmapF()Â∞ÜÊé•Êî∂‰∏Ä‰∏™Êñá‰ª∂ÂêçÂíåËØ•Êñá‰ª∂ÁöÑÂÜÖÂÆπÔºåÂπ∂Â∞ÜÂÜÖÂÆπÂàÜÊàêÂçïËØçÊúÄÁªàËæìÂá∫‰∏Ä‰∏™mapreduce.KeyValueÂûãÂàáÁâá„ÄÇ ÂØπ‰∫éÂçïËØçÁªüËÆ°ÂèØÂ∞ÜÂçïËØç‰Ωú‰∏∫ÈîÆ„ÄÇÂØπËæìÂá∫‰∏≠ÁöÑÊØè‰∏™ÈîÆÈÉΩÂ∞ÜË∞ÉÁî®‰∏ÄÊ¨°reduceF()ÔºåÂÖ∂‰∏≠ÂåÖÂê´mapF()‰∏∫ËØ•ÈîÆÁîüÊàêÁöÑÊâÄÊúâÂÄºÁöÑÂàáÁâá„ÄÇ reduceF()ËøîÂõû‰∏Ä‰∏™ÂåÖÂê´ÈîÆÂá∫Áé∞ÊÄªÊï∞ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ ÊèêÁ§∫1ÔºöÂÖ≥‰∫éGoÁöÑÂ≠óÁ¨¶‰∏≤Â§ÑÁêÜÔºåÂèØ‰ª•ÂèÇËØª Go Blog on strings ÊèêÁ§∫2ÔºöÂèØ‰ª•‰ΩøÁî®strings.FieldsFuncÂáΩÊï∞Â∞ÜÂ≠óÁ¨¶‰∏≤ÊãÜÂàÜÊàêÂçïËØç ÊèêÁ§∫3Ôºö Âà©Áî®GoÁöÑstrconvÂåÖÂèØ‰ª•ÂæàÊñπ‰æøÂú∞Â∞ÜÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢ÊàêÊï¥Âûã ‰ΩøÁî®Â¶Ç‰∏ãÂëΩ‰ª§Êù•È™åËØÅÁ≠îÊ°àÔºö go run wc.go master sequential pg-*.txt Á≠îÊ°àÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package mainimport ( "fmt" "mapreduce" "os" "strconv" "strings" "unicode")//// The map function is called once for each file of input. The first// argument is the name of the input file, and the second is the// file's complete contents. You should ignore the input file name,// and look only at the contents argument. The return value is a slice// of key/value pairs.//func mapF(filename string, contents string) []mapreduce.KeyValue &#123; // Your code here (Part II). var res []mapreduce.KeyValue f := func(c rune) bool &#123; //‰∏çÊòØÂ≠óÊØç return !unicode.IsLetter(c) &#125; words := strings.FieldsFunc(contents, f) //Âú®‰∏çÊòØÂ≠óÊØçÂú∞ÊñπÊãÜÂàÜÂ≠óÁ¨¶‰∏≤contents for _, key := range words &#123; res = append(res, mapreduce.KeyValue&#123;key, "1"&#125;) &#125; return res&#125;//// The reduce function is called once for each key generated by the// map tasks, with a list of all the values created for that key by// any map task.//func reduceF(key string, values []string) string &#123; // Your code here (Part II). count := 0 for _, value := range values &#123; num, _ := strconv.ParseInt(value, 10, 64) // Â∞ÜÂ≠óÁ¨¶‰∏≤valueÔºà‰æãÂ¶ÇÔºö"157"ÔºâÊåâÁÖßÂçÅËøõÂà∂ËΩ¨Êç¢ÊàêÊï¥Âûã count = count + int(num) &#125; return strconv.Itoa(count) //Êï¥ÂûãËΩ¨Êç¢ÊàêÂ≠óÁ¨¶‰∏≤&#125;// Can be run in 3 ways:// 1) Sequential (e.g., go run wc.go master sequential x1.txt .. xN.txt)// 2) Master (e.g., go run wc.go master localhost:7777 x1.txt .. xN.txt)// 3) Worker (e.g., go run wc.go worker localhost:7777 localhost:7778 &amp;)func main() &#123; if len(os.Args) &lt; 4 &#123; fmt.Printf("%s: see usage comments in file\n", os.Args[0]) &#125; else if os.Args[1] == "master" &#123; var mr *mapreduce.Master if os.Args[2] == "sequential" &#123; mr = mapreduce.Sequential("wcseq", os.Args[3:], 3, mapF, reduceF) &#125; else &#123; mr = mapreduce.Distributed("wcseq", os.Args[3:], 3, os.Args[2]) &#125; mr.Wait() &#125; else &#123; mapreduce.RunWorker(os.Args[2], os.Args[3], mapF, reduceF, 100, nil) &#125;&#125; ËøêË°ågo run wc.go master sequential pg-sherlock_holmes.txtÂíåsort -n -k2 mrtmp.wcseq | tail -10ÁöÑÁªìÊûúÔºö Part III: ÂàÜÂ∏ÉÂºè MapReduce ‰ªªÂä°# Âú®ÂΩìÂâçÁöÑÂÆûÁé∞‰∏≠ÔºåÊòØÈÄöËøá‰∏≤Ë°åÁöÑÊñπÂºèÊù•ÊâßË°åMap‰ªªÂä°ÂíåReduce‰ªªÂä°„ÄÇ Map/ReduceÊúÄÂ§ßÁöÑÂçñÁÇπ‰πã‰∏ÄÊòØÂÆÉÂèØ‰ª•Ëá™Âä®Âú∞Âπ∂Ë°åÊâßË°åÂéüÂßãÁöÑ‰∏≤Ë°å‰ª£Á†ÅËÄåÊó†ÈúÄÂºÄÂèë‰∫∫ÂëòÁöÑ‰ªª‰ΩïÈ¢ùÂ§ñÂ∑•‰Ωú„ÄÇ Âú®Ëøô‰∏ÄÈÉ®ÂàÜ‰∏≠ÔºåÊÇ®Â∞ÜÂÆåÊàê‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèMapReduceÁâàÊú¨ÔºåÂç≥Â∞ÜÂ∑•‰ΩúÊãÜÂàÜ‰∏∫Âú®Â§öÊ†∏‰∏äËøêË°åÁöÑ‰∏ÄÁªÑworkerÁ∫øÁ®ã„ÄÇ Â∞ΩÁÆ°‰∏çÂÉèÁúüÂÆûÁöÑMap/ReduceÈÉ®ÁΩ≤Ë¢´ÂàÜÂ∏ÉÂú®Â§öÂè∞Êú∫Âô®‰∏äÈÇ£Ê†∑Ôºå‰ΩÜ‰Ω†Êú¨ÈÉ®ÂàÜÁöÑÂÆûÁé∞‰∏≠Â∞Ü‰ΩøÁî®RPCÊù•Ê®°ÊãüÂàÜÂ∏ÉÂºèËÆ°ÁÆó„ÄÇ mapreduce/master.go‰∏≠ÁöÑ‰ª£Á†ÅÂÆåÊàê‰∫ÜÁÆ°ÁêÜMapReduceÁöÑÂ§ßÈÉ®ÂàÜÂ∑•‰Ωú„ÄÇ Êàë‰ª¨Ëøò‰∏∫ÊÇ®Êèê‰æõ‰∫Ümapreduce/worker.go‰∏≠workerÁ∫øÁ®ãÁöÑÂÆåÊï¥‰ª£Á†Å‰ª•ÂèäÂú®mapreduce/common_rpc.go‰∏≠Â§ÑÁêÜRPCÁöÑ‰∏Ä‰∫õ‰ª£Á†Å„ÄÇ ‰Ω†ÁöÑ‰ªªÂä°ÊòØÂÆûÁé∞mapreduce/schedule.go‰∏≠ÁöÑschedule()ÂáΩÊï∞„ÄÇ masterÂú®MapReduceÊúüÈó¥Â∞Ü‰∏§Ê¨°Ë∞ÉÁî®schedule()Ôºå‰∏ÄÊ¨°Áî®‰∫éMapÈò∂ÊÆµÔºå‰∏ÄÊ¨°Áî®‰∫éReduceÈò∂ÊÆµ„ÄÇ schedule()ÁöÑÂäüËÉΩÊòØÂ∞Ü‰ªªÂä°ÂàÜÂèëÁªôÂèØÁî®ÁöÑworker„ÄÇ ‰ªªÂä°ÁöÑÊï∞ÈáèÈÄöÂ∏∏ÊØîworkerÁ∫øÁ®ãÂ§öÔºåÂõ†Ê≠§schedule()ÂøÖÈ°ª‰∏∫ÊØè‰∏™workerÂàÜÈÖç‰∏ÄÁ≥ªÂàó‰ªªÂä°Ôºå‰∏ÄÊ¨°‰∏Ä‰∏™„ÄÇ schedule()Â∫îËØ•Á≠âÂà∞ÊâÄÊúâ‰ªªÂä°ÈÉΩÂÆåÊàêÂêéÂÜçËøîÂõû„ÄÇ schedule()ÈÄöËøáËØªÂèñregisterChanÂèÇÊï∞Êù•‰∫ÜËß£‰∏ÄÁªÑworker„ÄÇ ËØ•channel‰∏∫ÊØè‰∏™workerÁîüÊàê‰∏Ä‰∏™ÂåÖÂê´workerÁöÑRPCÂú∞ÂùÄÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÊâÄÊúâÁöÑworkerÈÉΩ‰ºöÂá∫Áé∞Âú®registerChanÔºåÂÖ∂‰∏≠‰∏Ä‰∫õworkerÂèØËÉΩÂú®Ë∞ÉÁî®schedule()‰πãÂâçÂ∞±Â≠òÂú®ÔºåËÄåÂè¶‰∏Ä‰∫õworkerÂèØËÉΩÂú®schedule()ËøêË°åÊó∂ÊâçÂêØÂä®„ÄÇschedule()Â∫îËØ•ÂÖÖÂàÜÂà©Áî®ÊâÄÊúâÁöÑworkerÔºåÂåÖÊã¨ÂêØÂä®ÂêéÂá∫Áé∞ÁöÑworker„ÄÇ schedule()ÈÄöËøáÂêëworkerÂèëÈÄÅWorker.DoTaskRPCÊù•ÈÄöÁü•workerÊâßË°å‰ªªÂä°„ÄÇ Ê≠§RPCÁöÑÂèÇÊï∞Áî±mapreduce/common_rpc.go‰∏≠ÁöÑDoTaskArgsÂÆö‰πâ„ÄÇFileÂÖÉÁ¥†‰ªÖÁî±Map‰ªªÂä°‰ΩøÁî®Ôºå‰ª£Ë°®Ë¶ÅËØªÂèñÁöÑÊñá‰ª∂ÁöÑÂêçÁß∞Ôºõschedule()ÂèØ‰ª•Âú®mapFiles‰∏≠ÊâæÂà∞Ëøô‰∫õÊñá‰ª∂Âêç„ÄÇ ‰ΩøÁî®mapreduce/common_rpc.go‰∏≠ÁöÑcall()ÂáΩÊï∞Â∞ÜRPCÂèëÈÄÅÁªôworker„ÄÇ Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØworkerÁöÑÂú∞ÂùÄÔºå‰ªéregisterChanËØªÂèñÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØWorker.DoTaskÔºå Á¨¨‰∏â‰∏™ÂèÇÊï∞ÊòØDoTaskArgsÁªìÊûÑÔºåÊúÄÂêé‰∏Ä‰∏™ÂèÇÊï∞ÊòØnil„ÄÇ ÊÇ®ÂØπÂú®Á¨¨IIIÈÉ®ÂàÜÁöÑËß£Á≠î‰ªÖÊ∂âÂèäÂØπschedule.goÁöÑ‰øÆÊîπÔºõÂ¶ÇÊûúÊÇ®Âú®Ë∞ÉËØïËøáÁ®ã‰∏≠‰øÆÊîπ‰∫ÜÂÖ∂‰ªñÊñá‰ª∂ÔºåËØ∑ÊÅ¢Â§çÂÖ∂ÂéüÂßãÂÜÖÂÆπ„ÄÇËØ∑ÂÖàÊµãËØïÂÜçÊèê‰∫§„ÄÇ ‰ΩøÁî®go test -run TestParallelÊù•ÊµãËØïÊÇ®ÁöÑÁ≠îÊ°à„ÄÇ ËØ•ÂëΩ‰ª§Â∞ÜÊâßË°å‰∏§‰∏™ÊµãËØïÔºåTestParallelBasicÂíåTestParallelCheckÔºåÂêéËÄÖÈ™åËØÅÊÇ®ÁöÑschedule()ÊòØÂê¶‰ΩøworkerÂπ∂Ë°åÊâßË°å‰ªªÂä°„ÄÇ ÊèêÁ§∫1Ôºöschedule()Â∫îËØ•Âπ∂Ë°åÂú∞ÂêëworkerÂèëÈÄÅRPCÔºå‰ª•‰æøworkerÂèØ‰ª•Âπ∂ÂèëÊâßË°å‰ªªÂä°„ÄÇ ‰Ω†‰ºöÂèëÁé∞goËØ≠Âè•ÂØπÊ≠§ÂæàÊúâÁî®ÔºåÂèÇËßÅConcurrency in Go„ÄÇ ÊèêÁ§∫2Ôºöschedule()ÂøÖÈ°ªÁ≠âÂæÖworkerÂÆåÊàê‰∏Ä‰∏™‰ªªÂä°ÂêéÊâçËÉΩÁªôÂÆÉÂè¶‰∏ã‰∏Ä‰∏™‰ªªÂä°ÔºåGoÁöÑchannelÂØπÊ≠§ÂæàÊúâÁî®„ÄÇ ÊèêÁ§∫3Ôºö sync.WaitGroup ÊèêÁ§∫4ÔºöËøΩË∏™ÈîôËØØÁöÑÊúÄÁÆÄÂçïÁöÑÊñπÊ≥ïÊòØÊèíÂÖ•printËØ≠Âè•ÔºàÂú®common.go‰∏≠ÂèØËÉΩÊòØË∞ÉÁî®debug()ÔºâÔºå‰ΩøÁî®go test -run TestParallel &gt; outÂ∞ÜËæìÂá∫Êî∂ÈõÜÂà∞‰∏Ä‰∏™Êñá‰ª∂‰∏≠ÔºåÁÑ∂ÂêéÂàÜÊûêËæìÂá∫ÊòØÂê¶‰∏é‰Ω†ÂØπ‰ª£Á†ÅÁöÑÈ¢ÑÊúüÁõ∏Á¨¶„ÄÇ ÊúÄÂêé‰∏ÄÊ≠•ÊòØÊúÄÈáçË¶ÅÁöÑ„ÄÇ ÊèêÁ§∫5ÔºöÊ£ÄÊü•ÊÇ®ÁöÑ‰ª£Á†ÅÊòØÂê¶ÊúâÁ´û‰∫âÁöÑÊÉÖÂÜµÂèØÂú®ÊµãËØï‰∏≠ËøêË°årace detector„ÄÇ Ê≥®ÊÑèÔºöÊàë‰ª¨Êèê‰æõÁöÑ‰ª£Á†ÅÊòØÂú®Âçï‰∏™UNIXËøõÁ®ã‰∏≠Â∞Üworker‰Ωú‰∏∫Á∫øÁ®ãËøêË°åÔºåÂπ∂‰∏îÂèØ‰ª•Âú®ÂçïÂè∞Êú∫Âô®‰∏ä‰ΩøÁî®Â§öÊ†∏„ÄÇ Ë¶ÅÊÉ≥Âú®‰ΩøÁî®ÁΩëÁªúËøõË°åÈÄö‰ø°ÁöÑÂ§öÂè∞Êú∫Âô®‰∏äËøêË°åworkerÂøÖÈ°ªËøõË°å‰∏Ä‰∫õ‰øÆÊîπÔºöRPCÂøÖÈ°ª‰ΩøÁî®TCPËÄå‰∏çÊòØUNIX-domainÂ•óÊé•Â≠óÔºõÈúÄË¶ÅÊúâ‰∏ÄÁßçÊñπÊ≥ïÊù•ÂêØÂä®ÊâÄÊúâÊú∫Âô®‰∏äÁöÑworkerËøõÁ®ãÔºõÊâÄÊúâÁöÑÊú∫Âô®ÈÉΩÂøÖÈ°ªÈÄöËøáÊüêÁßçÁΩëÁªúÊñá‰ª∂Á≥ªÁªüÂÖ±‰∫´Â≠òÂÇ®„ÄÇ Á≠îÊ°àËßÅPart IV„ÄÇ Part IV: workerÈîôËØØÂ§ÑÁêÜ# Âú®ËøôÈÉ®ÂàÜ‰∏≠ÔºåÊÇ®Â∞ÜÂÆûÁé∞masterÂ§ÑÁêÜÂ§±Ë¥•ÁöÑworkerÁöÑÂäüËÉΩ„ÄÇÁî±‰∫éworkerÁöÑÁä∂ÊÄÅ‰∏çÊòØÊåÅ‰πÖÁöÑÔºåËØ•ÂäüËÉΩÂú®MapReduce‰∏≠Áõ∏ÂØπÂÆπÊòìÂÆûÁé∞„ÄÇ Â¶ÇÊûúworkerÂú®Â§ÑÁêÜÊù•Ëá™masterÁöÑRPCÊó∂ÂèëÁîüÈîôËØØÔºåmasterÁöÑcall()ÊúÄÁªà‰ºöÂõ†Ë∂ÖÊó∂ËÄåËøîÂõûfalse„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåmaster‰ºöÂ∞ÜËØ•‰ªªÂä°ÈáçÊñ∞ÂàÜÈÖçÁªôÂè¶‰∏Ä‰∏™worker„ÄÇ RPCÊïÖÈöúÂπ∂‰∏ç‰∏ÄÂÆöÊÑèÂë≥ÁùÄworkerÊ≤°ÊúâÊâßË°å‰ªªÂä°ÔºõworkerÂèØËÉΩÂ∑≤ÊâßË°å‰ªªÂä°‰ΩÜÊòØËøîÂõûÁªìÊûú‰∏¢Â§±ÔºåÊàñËÄÖworkerÂèØËÉΩ‰ªçÂú®ÊâßË°å‰ΩÜmasterÁöÑRPCË∂ÖÊó∂„ÄÇÂõ†Ê≠§ÔºåÂèØËÉΩ‰ºöÂèëÁîü‰∏§‰∏™workerÊé•Êî∂Áõ∏Âêå‰ªªÂä°„ÄÅËÆ°ÁÆóÂπ∂‰∫ßÁîüËæìÂá∫ÁöÑÊÉÖÂÜµ„ÄÇ ÈúÄË¶ÅÂØπmapÊàñreduceÂáΩÊï∞ËøõË°å‰∏§Ê¨°Ë∞ÉÁî®ÊâçËÉΩ‰∏∫ÁªôÂÆöËæìÂÖ•ÁîüÊàêÁõ∏ÂêåÁöÑËæìÂá∫ÔºåÂõ†Ê≠§Â¶ÇÊûúÂêéÁª≠Â§ÑÁêÜËØªÂèñ‰∏Ä‰∏™ËæìÂá∫ÊàñËÄÖËØªÂèñÂè¶‰∏Ä‰∏™ËæìÂá∫ÔºåÂàô‰∏ç‰ºöÂá∫Áé∞‰∏ç‰∏ÄËá¥„ÄÇ Ê≠§Â§ñÔºåMapReduceÊ°ÜÊû∂Á°Æ‰øùmapÂíåreduceÂáΩÊï∞ËæìÂá∫‰ª•ÂéüÂ≠êÊñπÂºèÂá∫Áé∞ÔºöËæìÂá∫Êñá‰ª∂Ë¶Å‰πà‰∏çÂ≠òÂú®ÔºåË¶Å‰πàÂåÖÂê´Âçï‰∏™mapÊàñÂçï‰∏™reduceÂáΩÊï∞ÊâßË°åÁöÑÊï¥‰∏™ËæìÂá∫ÔºàÊèê‰æõÁöÑ‰ª£Á†Å‰∏çÊ∂âÂèäËøôÈÉ®ÂàÜÔºâ„ÄÇ ÊÇ®ÁöÑÂÆûÁé∞ÂøÖÈ°ªÈÄöËøátest_test.go‰∏≠Ââ©‰∏ãÁöÑ‰∏§‰∏™ÊµãËØïÁî®‰æã„ÄÇ Á¨¨‰∏Ä‰∏™Áî®‰æãÊµãËØï‰∏Ä‰∏™workerÁöÑÂ§±Ë¥•ÔºåËÄåÁ¨¨‰∫å‰∏™ÊµãËØïÁî®‰æãÊµãËØïÂØπÂ§ö‰∏™workerÁöÑÂ§±Ë¥•ÁöÑÂ§ÑÁêÜ„ÄÇ ÊµãËØïÁî®‰æã‰ºöÂÆöÊúüÂêØÂä®Êñ∞ÁöÑworkerÔºåmasterÂèØ‰ª•‰ΩøÁî®Ëøô‰∫õworkerÊù•Êé®ËøõÁ®ãÂ∫èËøáÁ®ãÔºå‰ΩÜËøô‰∫õworkerÂú®Â§ÑÁêÜÂÆå‰∏Ä‰∫õ‰ªªÂä°Âêé‰ºöÂ§±Ë¥•„ÄÇ ‰ΩøÁî®‰∏ãÈù¢ÁöÑÂëΩ‰ª§Êù•ËøêË°åÊµãËØïÔºö go test -run Failure Âú®Á¨¨IVÈÉ®ÂàÜÔºåÂè™Ê∂âÂèäÂØπschedule.goÁöÑ‰øÆÊîπ„ÄÇ Â¶ÇÊûúÊÇ®Âú®Ë∞ÉËØïËøáÁ®ã‰∏≠‰øÆÊîπ‰∫ÜÂÖ∂‰ªñÊñá‰ª∂ÔºåËØ∑ÊÅ¢Â§çÂÖ∂ÂéüÂßãÂÜÖÂÆπÔºåÁÑ∂ÂêéÂÜçËøõË°åÊµãËØï„ÄÅÊèê‰∫§„ÄÇ Part III„ÄÅPart IVÁ≠îÊ°àÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package mapreduceimport "fmt"//// schedule() starts and waits for all tasks in the given phase (mapPhase// or reducePhase). the mapFiles argument holds the names of the files that// are the inputs to the map phase, one per map task. nReduce is the// number of reduce tasks. the registerChan argument yields a stream// of registered workers; each item is the worker's RPC address,// suitable for passing to call(). registerChan will yield all// existing registered workers (if any) and new ones as they register.//func schedule(jobName string, mapFiles []string, nReduce int, phase jobPhase, registerChan chan string) &#123; var ntasks int var n_other int // number of inputs (for reduce) or outputs (for map) switch phase &#123; case mapPhase: ntasks = len(mapFiles) n_other = nReduce case reducePhase: ntasks = nReduce n_other = len(mapFiles) &#125; fmt.Printf("Schedule: %v %v tasks (%d I/Os)\n", ntasks, phase, n_other) // All ntasks tasks have to be scheduled on workers. Once all tasks // have completed successfully, schedule() should return. // // Your code here (Part III, Part IV). // done := make(chan bool) for i := 0; i &lt; ntasks; i++ &#123; go func(num int) &#123; args := DoTaskArgs&#123;jobName, mapFiles[num], phase, num, n_other&#125; var worker string reply := new(struct&#123;&#125;) ok := false for ok != true &#123; worker = &lt;-registerChan ok = call(worker, "Worker.DoTask", args, reply) &#125; done &lt;- true //‰ªªÂä°ÂÆåÊàê registerChan &lt;- worker //ËØ•workerÂ∑•‰ΩúÂÆåÊØïÔºåÂ§Ñ‰∫éÁ©∫Èó≤ÔºåÂä†ÂÖ•channel‰∏≠‰ª•ÂàÜÈÖçÁªôÂÖ∂ÂÆÉ‰ªªÂä° &#125;(i) &#125; for i := 0; i &lt; ntasks; i++ &#123; //Á≠âÂæÖÊâÄÊúâ‰ªªÂä°ÂÆåÊàê &lt;-done &#125; fmt.Printf("Schedule: %v done\n", phase)&#125; ËøêË°ågo test -run TestParallelÁöÑÁªìÊûúÔºö]]></content>
      <tags>
        <tag>Golang</tag>
        <tag>MapReduce</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÂíåÁ∫øÁ®ã(RPC and Thread)]]></title>
    <url>%2F2019%2F03%2F25%2F2019-3-25%2F</url>
    <content type="text"><![CDATA[MIT Distributed System Course: Lecture 2 Remote Procedure Call (RPC) ÁõÆÊ†áÔºö Âª∫Á´ãÁºñÁ®ãÂèãÂ•ΩÁöÑÂÆ¢Êà∑Á´Ø/ÊúçÂä°Âô®ÈÄö‰ø° RPCÊ∂àÊÅØÂõæÔºö ÂÆ¢Êà∑Á´Ø ÊúçÂä°Âô® ËØ∑Ê±Ç---&gt; &lt;---ÂìçÂ∫î ËΩØ‰ª∂ÁªìÊûÑÔºö client app handlers stubs dispatcher RPC lib RPC lib net ------------ net Go rpcÂåÖÔºö ÂÆòÊñπÊñáÊ°£ import &quot;net/rpc rpcÂåÖÊèê‰æõÂØπÈÄöËøáÁΩëÁªúÊàñÂÖ∂‰ªñI / OËøûÊé•ÁöÑÂØπË±°ÁöÑÂØºÂá∫ÊñπÊ≥ïÁöÑËÆøÈóÆ„ÄÇ ÊúçÂä°Âô®Ê≥®ÂÜå‰∏Ä‰∏™ÂØπË±°ÔºåÂπ∂‰Ωú‰∏∫‰∏ÄÁßçÊúçÂä°ÂèØËßÅ„ÄÇ Ê≥®ÂÜåÁöÑÂØπË±°ÂÖ∂ÂØºÂá∫ÊñπÊ≥ïÂèØ‰ª•Ë¢´ËøúÁ®ãËÆøÈóÆ„ÄÇ ÊúçÂä°Âô®ÂèØ‰ª•Ê≥®ÂÜå‰∏çÂêåÁ±ªÂûãÁöÑÂ§ö‰∏™ÂØπË±°ÔºàÊúçÂä°ÔºâÔºå‰ΩÜÊòØÊ≥®ÂÜåÁõ∏ÂêåÁ±ªÂûãÁöÑÂ§ö‰∏™ÂØπË±°ÊòØÈîôËØØÁöÑ„ÄÇ Âè™ÊúâÊª°Ë∂≥‰∏ãÂàóÊ†áÂáÜÁöÑÊñπÊ≥ïÔºàmethodÔºâÊâçËÉΩË¢´ËøúÁ®ãËÆøÈóÆÔºö the method's type is exported. the method is exported. the method has two arguments, both exported (or builtin) types. the method's second argument is a pointer. the method has return type error. ÂÆûÈôÖ‰∏äÔºåËØ•ÊñπÊ≥ïÂøÖÈ°ªÁúãËµ∑Êù•ÂÉè 1func (t *T) MethodName(argType T1, replyType *T2) error ÂÖ∂‰∏≠T1ÂíåT2ÂèØ‰ª•ÈÄöËøá encoding/gobÂåÖÊù•ÁºñÁ†Å„ÄÇÂç≥‰æø‰ΩøÁî®‰∏çÂêåÁöÑÁºñËß£Á†ÅÂô®Ôºå‰∏äËø∞Ê†áÂáÜ‰ªçÁÑ∂ÈÄÇÁî®„ÄÇ Á¨¨‰∏Ä‰∏™ÂèÇÊï∞T1Ë°®Á§∫Ë∞ÉÁî®ËÄÖÊèê‰æõÁöÑÂèÇÊï∞;Á¨¨‰∫å‰∏™ÂèÇÊï∞T2Ë°®Á§∫Ë¶ÅËøîÂõûÁªôË∞ÉÁî®ËÄÖÁöÑÁªìÊûúÂèÇÊï∞„ÄÇÊúçÂä°Âô®ÂèØ‰ª•ÈÄöËøáË∞ÉÁî®ServeConnÊù•Â§ÑÁêÜÂçï‰∏™ËøûÊé•‰∏äÁöÑËØ∑Ê±Ç„ÄÇÊõ¥ÂÖ∏ÂûãÁöÑ‰æãÂ≠êÊúâÂàõÂª∫ÁΩëÁªú‰æ¶Âê¨Âô®Âπ∂Ë∞ÉÁî®AcceptÔºåÂàõÂª∫HTTP‰æ¶Âê¨Âô®Âπ∂Ë∞ÉÁî®HandleHTTPÂíåhttp.Serve„ÄÇ Â∏åÊúõ‰ΩøÁî®ËØ•ÊúçÂä°ÁöÑÂÆ¢Êà∑Á´ØÈ¶ñÂÖàÂíåÊúçÂä°Âô®Âª∫Á´ãËøûÊé•ÔºåÁÑ∂ÂêéÂú®ËøûÊé•ÁöÑÂü∫Á°Ä‰∏äË∞ÉÁî®NewClient„ÄÇÂèØ‰ª•‰ΩøÁî®DialÂáΩÊï∞ÔºàDialHTTPÔºâÊñπ‰æøÂú∞ÊâßË°åÂéüÂßãÁΩëÁªúËøûÊé•ÔºàHTTPËøûÊé•ÔºâÁöÑ‰∏§‰∏™Ê≠•È™§„ÄÇÊñ∞Âª∫ÁöÑÂÆ¢Êà∑Á´ØÂØπË±°ÂÖ∑Â§áCallÊñπÊ≥ïÂíåGoÊñπÊ≥ï„ÄÇ CallÊñπÊ≥ïÁ≠âÂæÖËøúÁ®ãË∞ÉÁî®ÂÆåÊàêÔºåËÄåGoÊñπÊ≥ï‰ΩøÁî®CallÁªìÊûÑÁöÑDoneÈÄöÈÅìÂêØÂä®ÂºÇÊ≠•Ë∞ÉÁî®ÂíåÂèëÂá∫ÂÆåÊàê‰ø°Âè∑„ÄÇ Èô§ÈùûËÆæÁΩÆ‰∫ÜÊòæÂºèÁºñËß£Á†ÅÂô®ÔºåÂê¶Âàô‰∏ÄËà¨‰ΩøÁî®encoding/gobÂåÖÊù•‰º†ËæìÊï∞ÊçÆ„ÄÇ ‰∏Ä‰∏™ÊúçÂä°Âô®ÂØºÂá∫ArithÁ±ªÂûãÁöÑÂØπË±°ÁöÑ‰æãÂ≠êÔºö 123456789101112131415161718192021222324252627package serverimport "errors"type Args struct &#123; A, B int&#125;type Quotient struct &#123; Quo, Rem int&#125;type Arith intfunc (t *Arith) Multiply(args *Args, reply *int) error &#123; *reply = args.A * args.B return nil&#125;func (t *Arith) Divide(args *Args, quo *Quotient) error &#123; if args.B == 0 &#123; return errors.New("divide by zero") &#125; quo.Quo = args.A / args.B quo.Rem = args.A % args.B return nil&#125; ÊúçÂä°Âô®Á´ØË∞ÉÁî® HTTP serviceÔºö 12345678arith := new(Arith)rpc.Register(arith)rpc.HandleHTTP()l, e := net.Listen("tcp", ":1234")if e != nil &#123; log.Fatal("listen error:", e)&#125;go http.Serve(l, nil) Áé∞Âú®ÔºåÂÆ¢Êà∑Á´ØÊã•Êúâ‰∫Ü‰∏ÄÈ°πÊúçÂä°ArithÔºåËØ•ÊúçÂä°Êèê‰æõ‰∫ÜArith.MultiplyÂíåArith.DivideÊñπÊ≥ï„ÄÇË¶ÅË∞ÉÁî®Ëøô‰∫õÊñπÊ≥ïÔºåÂÆ¢Êà∑Á´ØÂæóÂÖàÊã®ÈÄöÊúçÂä°Âô®Ôºö 1234client, err := rpc.DialHTTP("tcp", serverAddress + ":1234")if err != nil &#123; log.Fatal("dialing:", err)&#125; ÁÑ∂ÂêéËøõË°åËøúÁ®ãË∞ÉÁî®Ôºö 12345678// Synchronous callargs := &amp;server.Args&#123;7,8&#125;var reply interr = client.Call("Arith.Multiply", args, &amp;reply)if err != nil &#123; log.Fatal("arith error:", err)&#125;fmt.Printf("Arith: %d*%d=%d", args.A, args.B, reply) ÊàñËÄÖ 12345// Asynchronous callquotient := new(Quotient)divCall := client.Go("Arith.Divide", args, quotient, nil)replyCall := &lt;-divCall.Done // will be equal to divCall// check errors, print, etc. ÊúçÂä°Âô®ÈÄöÂ∏∏‰ºö‰∏∫ÂÆ¢Êà∑Á´ØÊèê‰æõ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ„ÄÅÁ±ªÂûãÂÆâÂÖ®ÁöÑÂ∞ÅË£Ö„ÄÇ net/rpcÂåÖÂ∑≤ÂÜªÁªìÔºå‰∏ç‰ºöÂ¢ûÂä†Êñ∞ÁöÑÂäüËÉΩÂ±ûÊÄß„ÄÇ Go‰∏æ‰æãÔºö ‰∏Ä‰∏™ÁÆÄÂçïÁöÑkey/valueÂ≠òÂÇ®ÊúçÂä°Âô®‚Äî‚ÄîPut(key,value), Get(key)-&gt;value 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145package mainimport ( "fmt" "log" "net" "net/rpc" "sync")//// RPC request/reply definitions//const ( OK = "OK" ErrNoKey = "ErrNoKey")type Err stringtype PutArgs struct &#123; Key string Value string&#125;type PutReply struct &#123; Err Err&#125;type GetArgs struct &#123; Key string&#125;type GetReply struct &#123; Err Err Value string&#125;//// Client//func connect() *rpc.Client &#123; client, err := rpc.Dial("tcp", ":1234") if err != nil &#123; log.Fatal("dialing:", err) &#125; return client&#125;func get(key string) string &#123; client := connect() args := GetArgs&#123;Key: key&#125; reply := GetReply&#123;&#125; err := client.Call("KV.Get", &amp;args, &amp;reply) //ËøúÁ®ãË∞ÉÁî®KV.GetÔºåÁ≠âÂæÖÂÆÉÂÆåÊàêÔºåÂπ∂ËøîÂõûÂÖ∂ÈîôËØØÁä∂ÊÄÅ„ÄÇ if err != nil &#123; log.Fatal("error:", err) &#125; client.Close() log.Println(reply.Err) return reply.Value&#125;func put(key string, val string) &#123; client := connect() args := PutArgs&#123;Key: key, Value: val&#125; reply := PutReply&#123;&#125; err := client.Call("KV.Put", &amp;args, &amp;reply) //ËøúÁ®ãË∞ÉÁî®KV.Put if err != nil &#123; log.Fatal("error:", err) &#125; client.Close()&#125;//// Server//type KV struct &#123; mu sync.Mutex data map[string]string&#125;func server() &#123; kv := new(KV) kv.data = map[string]string&#123;&#125; rpcs := rpc.NewServer() rpcs.Register(kv) l, e := net.Listen("tcp", ":1234") if e != nil &#123; log.Fatal("listen error:", e) &#125; go func() &#123; for &#123; conn, err := l.Accept() if err == nil &#123; go rpcs.ServeConn(conn) &#125; else &#123; break &#125; &#125; l.Close() &#125;()&#125;func (kv *KV) Get(args *GetArgs, reply *GetReply) error &#123; kv.mu.Lock() defer kv.mu.Unlock() val, ok := kv.data[args.Key] if ok &#123; reply.Err = OK reply.Value = val &#125; else &#123; reply.Err = ErrNoKey reply.Value = "" &#125; return nil&#125;func (kv *KV) Put(args *PutArgs, reply *PutReply) error &#123; kv.mu.Lock() defer kv.mu.Unlock() kv.data[args.Key] = args.Value reply.Err = OK return nil&#125;//// main//func main() &#123; server() put("passwd", "2w6C*kcXWWmzK$Jg") //ÂÆ¢Êà∑Á´ØÂ≠òÂÇ®ÂØÜÁ†Å fmt.Println(get("passwd")) //ÂÆ¢Êà∑Á´ØËé∑ÂèñÂØÜÁ†Å&#125;command-line-arguments2019/04/02 18:34:11 OK2w6C*kcXWWmzK$Jg ÂÖ±ÂêåÔºöÂøÖÈ°ª‰∏∫ÊØèÁßçRPCÁ±ªÂûãÂ£∞ÊòéArgsÂíåReplyÁªìÊûÑ Client: connect()ÁöÑDial()ÂàõÂª∫‰∏éÊúçÂä°Âô®ÁöÑTCPËøûÊé• Call()Ë¶ÅÊ±ÇRPCÂ∫ìÊâßË°åËøúÁ®ãË∞ÉÁî® ÊåáÂÆöserver function name, args,reply library marshalls args, sends request, waits, unmarshally reply Call()ÁöÑËøîÂõûÂÄºË°®Á§∫ÊòØÂê¶Êî∂Âà∞ÂõûÂ§ç usually you'll also have a reply.Err indicating service-level failure serverÔºö GoË¶ÅÊ±ÇÊÇ®Â£∞Êòé‰∏Ä‰∏™Â∏¶ÊúâÊñπÊ≥ïÁöÑÂØπË±°‰Ωú‰∏∫RPCÂ§ÑÁêÜÁ®ãÂ∫è(RPC handler) ÁÑ∂ÂêéÔºåÊÇ®‰ΩøÁî®RPCÂ∫ìÊ≥®ÂÜåËØ•ÂØπË±° ÊÇ®Êé•ÂèóTCPËøûÊé•ÔºåÂπ∂ÁªôÂÆÉ‰ª¨Êèê‰æõRPCÂ∫ì RPCÂ∫ì ËØªÂèñÊØè‰∏™ËØ∑Ê±Ç ‰∏∫Ê≠§ËØ∑Ê±ÇÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑgoroutine unmarshalls request Ë∞ÉÁî®ÂëΩÂêçÊñπÊ≥ïÔºàË∞ÉÂ∫¶Ôºâ marshalls reply Âú®TCPËøûÊé•‰∏äÂÜôÂõûÂ§ç ÊúçÂä°Âô®ÁöÑGet()ÂíåPut()Â§ÑÁêÜÁ®ãÂ∫è ÂøÖÈ°ªÈîÅÂÆöÔºåÂõ†‰∏∫RPCÂ∫ìÁªôÊØè‰∏™ËØ∑Ê±ÇÂàõÂª∫goroutines Ëß£ËØªargs; ‰øÆÊîπreply Á∫øÁ®ã: Á∫øÁ®ãÊòØ‰∏ÄÁßçÊúâÁî®ÁöÑÁªìÊûÑÂåñÂ∑•ÂÖ∑ GoÁß∞‰ªñ‰ª¨‰∏∫goroutines;ÂÖ∂‰ªñ‰∫∫Áß∞‰ªñ‰ª¨‰∏∫Á∫øÁ®ã ‰ªñ‰ª¨ÂèØËÉΩÂæàÊ£òÊâã Why threads? Áî®ÂÆÉ‰ª¨ÂÆûÁé∞Âπ∂ÂèëÔºåÂú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠Ëá™ÁÑ∂Âú∞Âá∫Áé∞ I / OÂπ∂ÂèëÔºö Âú®Á≠âÂæÖÊù•Ëá™ÂÖ∂‰ªñÊúçÂä°Âô®ÁöÑÂìçÂ∫îÊó∂ÔºåÂ§ÑÁêÜ‰∏ã‰∏Ä‰∏™ËØ∑Ê±Ç Â§öÊ†∏Ôºö Á∫øÁ®ãÂú®Â§ö‰∏™Ê†∏ÂøÉ‰∏äÂπ∂Ë°åËøêË°å Thread =‚ÄúÊâßË°åÁ∫øÁ®ã‚Äù Á∫øÁ®ãÂÖÅËÆ∏‰∏Ä‰∏™Á®ãÂ∫èÔºàÈÄªËæë‰∏äÔºâ‰∏ÄÊ¨°ÊâßË°åËÆ∏Â§ö‰∫ãÊÉÖ Á∫øÁ®ãÂÖ±‰∫´ÂÜÖÂ≠ò each thread includes some per-thread stateÔºåÂåÖÊã¨ÔºöÁ®ãÂ∫èËÆ°Êï∞Âô®ÔºåÂØÑÂ≠òÂô®ÔºåÂ†ÜÊ†à Á®ãÂ∫è‰∏≠ÊúâÂ§öÂ∞ë‰∏™Á∫øÁ®ãÔºü Áî±ÁªìÊûÑÈ©±Âä® ‰æãÂ¶ÇÊØè‰∏™ÂÆ¢Êà∑Á´Ø‰∏Ä‰∏™Á∫øÁ®ãÔºå‰∏Ä‰∏™Áî®‰∫éÂêéÂè∞‰ªªÂä° Â§öÊ†∏Âπ∂Ë°å one active thread per core„ÄÇGoÁöÑ runtime Ëá™Âä®Âú∞Âú®ÂèØÁî®ÂÜÖÊ†∏‰∏äË∞ÉÂ∫¶ÂèØËøêË°åÁöÑgoroutine I / OÂπ∂Âèë Êï∞ÈáèÁî±Âª∂ËøüÂíåÂÆπÈáèÂÜ≥ÂÆö ÁªßÁª≠Â¢ûÂä†Áõ¥Âà∞ÂêûÂêêÈáèÂÅúÊ≠¢Â¢ûÈïø Go threads are pretty cheap 100Êàñ1000ÊòØÂ•ΩÁöÑÔºå‰ΩÜÂèØËÉΩËææ‰∏çÂà∞Êï∞Áôæ‰∏áÁöÑÈáèÁ∫ß ÂàõÂª∫Á∫øÁ®ãÊØîÊñπÊ≥ïË∞ÉÁî®Êõ¥ÊòÇË¥µ Threading challengesÔºö ÂÖ±‰∫´Êï∞ÊçÆ ‰∏Ä‰∏™Á∫øÁ®ãËØªÂèñÂè¶‰∏Ä‰∏™Á∫øÁ®ãÊ≠£Âú®ÊîπÂèòÁöÑÊï∞ÊçÆÔºü‰æãÂ¶ÇÂΩì‰∏§‰∏™Á∫øÁ®ãÊâßË°åcount = count + 1Êó∂Ôºåthis is a &quot;race&quot; -- and is usually a bug ‚Äî‚Äî‰ΩøÁî®‰∫íÊñ•ÈîÅÔºàÊàñÂÖ∂‰ªñÂêåÊ≠•Ôºâ ‚Äî‚ÄîÊàñÈÅøÂÖçÂÖ±‰∫´ Á∫øÁ®ã‰πãÈó¥ÁöÑÂçèË∞É Â¶Ç‰ΩïÁ≠âÂæÖÊâÄÊúâMapÁ∫øÁ®ãÂÆåÊàêÔºü ‚Äî‚Äî‰ΩøÁî®Go channelÊàñWaitGroup Âπ∂ÂèëÁöÑÁ≤íÂ∫¶ Á≤óÁ≤íÂ∫¶(coarse-grained) ‚Äî‚Äî ÁÆÄÂçïÔºå‰ΩÜÂπ∂Âèë/Âπ∂Ë°åÂæàÂ∞ë ÁªÜÁ≤íÂ∫¶ ‚Äî‚Äî Êõ¥Â§öÁöÑÂπ∂Âèë„ÄÅÁ´û‰∫â(race)ÂíåÊ≠ªÈîÅ ‰ªÄ‰πàÊòØÁà¨Ëô´Ôºü ÁõÆÊ†áÊòØËé∑ÂèñÊâÄÊúâÁΩëÈ°µÔºå‰æãÂ¶ÇÊèê‰æõÁªôÁ¥¢ÂºïÂô®(indexer) ÁΩëÈ°µÂΩ¢Êàê‰∏Ä‰∏™Âõæ(graph) ÊØè‰∏™È°µÈù¢ÁöÑÂ§ö‰∏™ÈìæÊé• graph has cycles Crawler challenges ÂÆâÊéíI / OÂπ∂Âèë ÂêåÊó∂Ëé∑ÂèñÂ§ö‰∏™URL Â¢ûÂä†ÊØèÁßíËé∑ÂèñÁöÑURL Áî±‰∫éÁΩëÁªúÂª∂ËøüËøúËøúË∂ÖËøáÁΩëÁªúÂÆπÈáè Fetch each URL only once ÈÅøÂÖçÊµ™Ë¥πÁΩëÁªúÂ∏¶ÂÆΩ ÂØπËøúÁ®ãÊúçÂä°Âô®ÂæàÂ•Ω ÈúÄË¶ÅËÆ∞‰ΩèËÆøÈóÆËøáÁöÑURL Áü•ÈÅì‰ªÄ‰πàÊó∂ÂÄôÂÆåÊàê Crawler solutionsÔºö ‰∏≤Ë°åÁà¨Ëô´Ôºö fetched map ÈÅøÂÖçÈáçÂ§ç„ÄÅËøõÂÖ•Ê≠ªÂæ™ÁéØ ÂÆÉÊòØ‰∏Ä‰∏™Âçï‰∏ÄÁöÑÊò†Â∞ÑÔºåÈÄöËøáÈÄíÂΩíË∞ÉÁî®‰º†ÈÄí ‰∏ÄÊ¨°Âè™ËÉΩÁà¨Âèñ‰∏ÄÈ°µ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788package mainimport ( "fmt")type Fetcher interface &#123; Fetch(url string) (urls []string, err error) //Áî±‰∏Ä‰∏™URLËøîÂõûÂ§ö‰∏™URL&#125;type fakeResult struct &#123; body string urls []string&#125;type fakeFetcher map[string]*fakeResultfunc (f fakeFetcher) Fetch(url string) ([]string, error) &#123; if res, ok := f[url]; ok &#123; fmt.Printf("found: %s\n", url) return res.urls, nil &#125; fmt.Printf("missing: %s\n", url) return nil, fmt.Errorf("not found: %s", url) //ÊâìÂç∞Â≠óÁ¨¶‰∏≤ÈîôËØØ&#125;var fetcher = fakeFetcher&#123; "http://golang.org/": &amp;fakeResult&#123; "The Go Programming Language", []string&#123; "http://golang.org/pkg/", "http://golang.org/cmd/", &#125;, &#125;, "http://golang.org/pkg/": &amp;fakeResult&#123; "Packages", []string&#123; "http://golang.org/", "http://golang.org/cmd/", "http://golang.org/pkg/fmt/", "http://golang.org/pkg/os/", &#125;, &#125;, "http://golang.org/pkg/fmt/": &amp;fakeResult&#123; "Package fmt", []string&#123; "http://golang.org/", "http://golang.org/pkg/", &#125;, &#125;, "http://golang.org/pkg/os/": &amp;fakeResult&#123; "Package os", []string&#123; "http://golang.org/", "http://golang.org/pkg/", &#125;, &#125;,&#125;// ‰∏≤Ë°åÁà¨Ëô´func Serial(url string, fetcher Fetcher, fetched map[string]bool) &#123; if fetched[url] &#123; // Â∑≤ÁªèÁà¨Âèñ return &#125; fetched[url] = true urls, err := fetcher.Fetch(url) if err != nil &#123; return &#125; for _, u := range urls &#123; Serial(u, fetcher, fetched) &#125; return&#125;func main() &#123; Serial("http://golang.org/", fetcher, make(map[string]bool))&#125; ConcurrentMutexÁà¨Ëô´Ôºö ‰∏∫ÊØè‰∏™È°µÈù¢ÁöÑÁà¨ÂèñÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÔºåÂõ†Ê≠§ÂèØ‰ª•Âπ∂ÂèëÁà¨ÂèñÔºåÁà¨ÂèñÁéáÊõ¥È´ò Á∫øÁ®ãÂÖ±‰∫´ fetched map Why the Mutex (== lock)? Ê≤°ÊúâÈîÅÔºö ‰∏§‰∏™ÁΩëÈ°µÂåÖÂê´ÊåáÂêëÂêå‰∏ÄURLÁöÑÈìæÊé•ÔºåÂØºËá¥‰∏§‰∏™Á∫øÁ®ãÂêåÊó∂Ëé∑ÂèñËøôËøô‰∏™È°µÈù¢ T1„ÄÅT2Ê£ÄÊü•Ëé∑Âèñ[url]ÔºåÂΩì‰∏§ËÄÖÈÉΩÁúãÂà∞urlÂ∞öÊú™Ëé∑ÂèñÔºå‰∏§ËÄÖÈÉΩÂèñÔºåÂØºËá¥ÈîôËØØ ÂêåÊó∂ËØªÂÜôÔºàÊàñÂÜôÂÖ•+ÂÜôÂÖ•ÔºâÊòØÁ´û‰∫â Â¶ÇÊûúÊàëÊ≥®ÈáäÊéâLock()/Unlock()Ë∞ÉÁî®‰ºöÂèëÁîü‰ªÄ‰πàÔºü go run crawler.go go run -race crawler.go The lock causes the check and update to be atomic How does it decide it is done? sync.WaitGroup implicitly waits for children to finish recursive fetches 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110package mainimport ( "fmt" "sync")type Fetcher interface &#123; Fetch(url string) (urls []string, err error) //Áî±‰∏Ä‰∏™URLËøîÂõûÂ§ö‰∏™URL&#125;type fakeResult struct &#123; body string urls []string&#125;type fakeFetcher map[string]*fakeResultfunc (f fakeFetcher) Fetch(url string) ([]string, error) &#123; if res, ok := f[url]; ok &#123; fmt.Printf("found: %s\n", url) return res.urls, nil &#125; fmt.Printf("missing: %s\n", url) return nil, fmt.Errorf("not found: %s", url) //ÊâìÂç∞Â≠óÁ¨¶‰∏≤ÈîôËØØ&#125;var fetcher = fakeFetcher&#123; "http://golang.org/": &amp;fakeResult&#123; "The Go Programming Language", []string&#123; "http://golang.org/pkg/", "http://golang.org/cmd/", &#125;, &#125;, "http://golang.org/pkg/": &amp;fakeResult&#123; "Packages", []string&#123; "http://golang.org/", "http://golang.org/cmd/", "http://golang.org/pkg/fmt/", "http://golang.org/pkg/os/", &#125;, &#125;, "http://golang.org/pkg/fmt/": &amp;fakeResult&#123; "Package fmt", []string&#123; "http://golang.org/", "http://golang.org/pkg/", &#125;, &#125;, "http://golang.org/pkg/os/": &amp;fakeResult&#123; "Package os", []string&#123; "http://golang.org/", "http://golang.org/pkg/", &#125;, &#125;,&#125;// Concurrent crawler with shared state and Mutextype fetchState struct &#123; mu sync.Mutex fetched map[string]bool&#125;func makeState() *fetchState &#123; f := &amp;fetchState&#123;&#125; f.fetched = make(map[string]bool) return f&#125;func ConcurrentMutex(url string, fetcher Fetcher, f *fetchState) &#123; f.mu.Lock() if f.fetched[url] &#123; // Â∑≤ÁªèÁà¨Âèñ f.mu.Unlock() return &#125; f.fetched[url] = true f.mu.Unlock() urls, err := fetcher.Fetch(url) if err != nil &#123; return &#125; var done sync.WaitGroup for _, u := range urls &#123; done.Add(1) go func(u string) &#123; defer done.Done() //Á≠â‰ª∑‰∫édefer done.Add(-1) ConcurrentMutex(u, fetcher, f) &#125;(u) &#125; done.Wait() //Á≠âÂæÖÊâÄÊúâÁöÑgoroutineÂÆåÊàê return&#125;func main() &#123; ConcurrentMutex("http://golang.org/", fetcher, makeState())&#125; ConcurrentChannelÁà¨Ëô´ Go channelÔºö channelÊòØ‰∏Ä‰∏™ÂØπË±°,ÂèØËÉΩÊúâÂæàÂ§ö‰∏™, chÔºö= makeÔºàchan intÔºâ channelÂÖÅËÆ∏‰∏Ä‰∏™Á∫øÁ®ãÂ∞ÜÂØπË±°ÂèëÈÄÅÂà∞Âè¶‰∏Ä‰∏™Á∫øÁ®ãÔºö ch &lt; - xÔºåsenderÁ≠âÂæÖgoroutineÊé•Êî∂ yÔºö= &lt; - ch; for y := range chÔºåreceiverÁ≠âÂæÖgoroutineÂèëÈÄÅ ÂèØ‰ª•Áî®channelÊù•ËøõË°åÈÄö‰ø°ÂíåÂêåÊ≠• Â§ö‰∏™Á∫øÁ®ãÂèØ‰ª•Âú®‰∏Ä‰∏™channel‰∏äÂèëÈÄÅÂíåÊé•Êî∂ Âú®ÂèëÈÄÅÊó∂Êè°‰ΩèÈîÅÂèØËÉΩÂæàÂç±Èô©... ConcurrentChannel masterÔºàÔºâ master()ÂàõÂª∫‰∏Ä‰∏™worker goroutineÊù•Ëé∑ÂèñÊØè‰∏™È°µÈù¢ worker()Âú®channel‰∏äÂèëÈÄÅURL Â§ö‰∏™workerÂú®‰∏Ä‰∏™channel‰∏äÂèëÈÄÅ master()‰ªéchannel‰∏≠ËØªÂèñURL [ÂõæÔºö‰∏ª‰∫∫ÔºåÈÄöÈÅìÔºåÂ∑•‰∫∫] Êó†ÈúÄÈîÅÂÆö fetched mapÔºåÂõ†‰∏∫ÂÆÉ‰∏çÊòØÂÖ±‰∫´ÁöÑÔºÅ ÊúâÂÖ±‰∫´Êï∞ÊçÆÂêóÔºü channel ÈÄöÈÅì‰∏äÂèëÈÄÅÁöÑÂàáÁâáÂíåÂ≠óÁ¨¶‰∏≤ master()‰º†ÈÄíÁªôworker()ÁöÑÂèÇÊï∞ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110package mainimport ( "fmt")type Fetcher interface &#123; Fetch(url string) (urls []string, err error) //Áî±‰∏Ä‰∏™URLËøîÂõûÂ§ö‰∏™URL&#125;type fakeResult struct &#123; body string urls []string&#125;type fakeFetcher map[string]*fakeResultfunc (f fakeFetcher) Fetch(url string) ([]string, error) &#123; if res, ok := f[url]; ok &#123; fmt.Printf("found: %s\n", url) return res.urls, nil &#125; fmt.Printf("missing: %s\n", url) return nil, fmt.Errorf("not found: %s", url) //ÊâìÂç∞Â≠óÁ¨¶‰∏≤ÈîôËØØ&#125;var fetcher = fakeFetcher&#123; "http://golang.org/": &amp;fakeResult&#123; "The Go Programming Language", []string&#123; "http://golang.org/pkg/", "http://golang.org/cmd/", &#125;, &#125;, "http://golang.org/pkg/": &amp;fakeResult&#123; "Packages", []string&#123; "http://golang.org/", "http://golang.org/cmd/", "http://golang.org/pkg/fmt/", "http://golang.org/pkg/os/", &#125;, &#125;, "http://golang.org/pkg/fmt/": &amp;fakeResult&#123; "Package fmt", []string&#123; "http://golang.org/", "http://golang.org/pkg/", &#125;, &#125;, "http://golang.org/pkg/os/": &amp;fakeResult&#123; "Package os", []string&#123; "http://golang.org/", "http://golang.org/pkg/", &#125;, &#125;,&#125;// Concurrent crawler with channelsfunc worker(url string, ch chan []string, fetcher Fetcher) &#123; urls, err := fetcher.Fetch(url) if err != nil &#123; ch &lt;- []string&#123;&#125; &#125; else &#123; ch &lt;- urls &#125;&#125;func master(ch chan []string, fetcher Fetcher) &#123; n := 1 fetched := make(map[string]bool) for urls := range ch &#123; for _, u := range urls &#123; if fetched[u] == false &#123; fetched[u] = true n += 1 go worker(u, ch, fetcher) &#125; &#125; n -= 1 if n == 0 &#123; break &#125; &#125;&#125;func ConcurrentChannel(url string, fetcher Fetcher) &#123; ch := make(chan []string) go func() &#123; ch &lt;- []string&#123;url&#125; &#125;() master(ch, fetcher)&#125;func main() &#123; ConcurrentChannel("http://golang.org/", fetcher)&#125; **‰ªÄ‰πàÊó∂ÂÄô‰ΩøÁî®sharingÂíålocksÔºåËÄå‰∏çÊòØchannelsÔºü** - Â§ßÂ§öÊï∞ÈóÆÈ¢òÈÉΩÂèØ‰ª•Áî®‰ªª‰Ωï‰∏ÄÁßçÊñπÂºèËß£ÂÜ≥ - ÊúÄÊúâÊÑè‰πâÁöÑÂèñÂÜ≥‰∫éÁ®ãÂ∫èÂëòÁöÑÊÉ≥Ê≥ï state(Áä∂ÊÄÅ) -- sharing and locks communication -- channels waiting for events -- channels - ‰ΩøÁî®GoÁöÑÁ´û‰∫âÊ£ÄÊµãÂô®Ôºö [Data Race Detector](https://golang.org/doc/articles/race_detector.html) go test -race]]></content>
      <tags>
        <tag>Golang</tag>
        <tag>RPC</tag>
        <tag>Âπ∂Âèë</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GoÂπ∂ÂèëÊ®°Âºè (Cocurrency Pattern)]]></title>
    <url>%2F2019%2F02%2F10%2F2019-2-10%2F</url>
    <content type="text"><![CDATA[ËøôÁØáÂçöÂÆ¢ÁöÑÂéüÂàõÊù•Ëá™GoÁöÑÂÆòÊñπÂçöÂÆ¢ÔºåÂÖ∂‰∏≠Êèê‰æõ‰∫Ü‰∏∞ÂØåÁöÑÂÖ≥‰∫éGoÁöÑÂπ∂ÂèëÁöÑÁõ∏ÂÖ≥ËµÑÊñô„ÄÇÊú¨Êñá‰ªÖ‰ªÖÊòØÂØπ Rob Pike ÁöÑÊºîËÆ≤ Go Concurrency Patterns Âíå Sameer Ajmani ÁöÑÁª≠ÈõÜ Advanced Go Concurrency Patterns ÁöÑÂ≠¶‰π†ÔºåÁõ∏ÂÖ≥ÂÜÖÂÆπÁöÑËßÜÈ¢ëÂíåpptÂú®ÁΩë‰∏äÈÉΩÂèØ‰ª•ÊâæÂà∞„ÄÇ 1. ÂáΩÊï∞ËøîÂõû channel# 12345678910111213141516171819202122232425262728293031323334package mainimport ( "fmt" "math/rand" "time")func boring(msg string) &lt;-chan string &#123; // ËøîÂõûÂ≠óÁ¨¶‰∏≤ÈÄöÈÅìÔºå‰ªÖÊé•Êî∂ c := make(chan string) go func() &#123; for i := 0; ; i++ &#123; c &lt;- fmt.Sprintf("%s %d", msg, i) time.Sleep(time.Duration(rand.Intn(3e3)) * time.Millisecond) &#125; &#125;() return c&#125;func main() &#123; c := boring("boring!") // ÈÄöÈÅì‰Ωú‰∏∫ËøîÂõûÁöÑÂáΩÊï∞ for i := 0; i &lt; 5; i++ &#123; fmt.Printf("You say: %q\n", &lt;-c) &#125; fmt.Println("You're boring; I'm leaving.")&#125;ËæìÂá∫ÔºöYou say: "boring! 0"You say: "boring! 1"You say: "boring! 2"You say: "boring! 3"You say: "boring! 4"You're boring; I'm leaving. 2. ÈÄöÈÅì‰Ωú‰∏∫ÊúçÂä°# 12345678910111213141516171819202122func main() &#123; joe := boring("Joe") ann := boring("Ann") for i := 0; i &lt; 5; i++ &#123; fmt.Println(&lt;-joe) fmt.Println(&lt;-ann) &#125; fmt.Println("You're both boring; I'm leaving.")&#125;ËæìÂá∫ÔºöJoe 0Ann 0Joe 1Ann 1Joe 2Ann 2Joe 3Ann 3Joe 4Ann 4You're both boring; I'm leaving. 3.Â§öÈáçÈÄöÈÅì(ÊâáÂÖ•ÂáΩÊï∞Ôºåfan-in function)# 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package mainimport ( "fmt" "math/rand" "time")func boring(msg string) &lt;-chan string &#123; // ËøîÂõûÂ≠óÁ¨¶‰∏≤ÈÄöÈÅìÔºå‰ªÖÊé•Êî∂ c := make(chan string) go func() &#123; for i := 0; ; i++ &#123; c &lt;- fmt.Sprintf("%s %d", msg, i) time.Sleep(time.Duration(rand.Intn(1e3)) * time.Millisecond) &#125; &#125;() return c&#125;func fanIn(input1, input2 &lt;-chan string) &lt;-chan string &#123; c := make(chan string) go func() &#123; for &#123; c &lt;- &lt;-input1 &#125; &#125;() go func() &#123; for &#123; c &lt;- &lt;-input2 &#125; &#125;() return c&#125;func main() &#123; c := fanIn(boring("Joe"), boring("Ann")) for i := 0; i &lt; 10; i++ &#123; fmt.Println(&lt;-c) &#125; fmt.Println("You're both boring; I'm leaving.")&#125; 4. ÈÄöÈÅìÂèëÈÄÅÈÄöÈÅìÔºå‰Ωø goroutine ÊúâÂ∫è# 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package mainimport ( "fmt" "math/rand" "time")type Message struct &#123; str string wait chan bool&#125;func boring(msg string) chan Message &#123; c := make(chan Message) waitForIt := make(chan bool) // Ë¢´ÊâÄÊúâ Message ÂÖ±‰∫´ go func() &#123; for i := 0; ; i++ &#123; c &lt;- Message&#123;fmt.Sprintf("%s: %d", msg, i), waitForIt&#125; time.Sleep(time.Duration(rand.Intn(1e3)) * time.Millisecond) &lt;-waitForIt // ËøõÂÖ•Á≠âÂæÖ &#125; &#125;() return c&#125;func fanIn(input1, input2 chan Message) chan Message &#123; c := make(chan Message) go func() &#123; for &#123; c &lt;- &lt;-input1 &#125; &#125;() go func() &#123; for &#123; c &lt;- &lt;-input2 &#125; &#125;() return c&#125;func main() &#123; c := fanIn(boring("Joe"), boring("Ann")) for i := 0; i &lt; 5; i++ &#123; msg1 := &lt;-c fmt.Println(msg1.str) msg2 := &lt;-c fmt.Println(msg2.str) // ÂΩì Joe Âíå Ann ÁöÑ‰ø°ÊÅØÈÉΩÊî∂Âà∞ÂêéÔºåÊâçÂºÄÊîæ‰∏ã‰∏ÄÊ¨°Ê∂àÊÅØÊé•Êî∂ msg1.wait &lt;- true msg2.wait &lt;- true &#125;&#125; 5. select ËØ≠Âè•# ‰ΩøÁî® select Êù•ÂÜôÊâáÂÖ•ÂáΩÊï∞ÔºåÂáèÂ∞ë goroutine Êï∞Èáè 123456789101112func fanIn(input1, input2 &lt;-chan string) &lt;-chan string &#123; c := make(chan string) go func() &#123; for &#123; select &#123; case s := &lt;-input1: c &lt;- s case s := &lt;-input2: c &lt;- s &#125; &#125; &#125;() return c&#125; selectËÆæÁΩÆË∂ÖÊó∂ 123456789101112131415161718192021222324252627282930313233343536373839package mainimport ( "fmt" "math/rand" "time")func boring(msg string) &lt;-chan string &#123; // ËøîÂõûÂ≠óÁ¨¶‰∏≤ÈÄöÈÅìÔºå‰ªÖÊé•Êî∂ c := make(chan string) go func() &#123; for i := 0; ; i++ &#123; c &lt;- fmt.Sprintf("%s %d", msg, i) time.Sleep(time.Duration(rand.Intn(1500)) * time.Millisecond) &#125; &#125;() return c&#125;func main() &#123; c := boring("Joe") for &#123; select &#123; case s := &lt;-c: fmt.Println(s) case &lt;-time.After(1 * time.Second): fmt.Println("You're too slow.") return &#125; &#125;&#125;ËæìÂá∫ÔºöJoe 0Joe 1Joe 2Joe 3Joe 4You're too slow.]]></content>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLÈ©±Âä®]]></title>
    <url>%2F2018%2F12%2F31%2F2018-12-31%2F</url>
    <content type="text"><![CDATA[MySQLÂü∫Á°ÄËßÅËèúÈ∏üÊïôÁ®ã; Êú¨ÊñáÂèÇËÄÉ‰∫Üastaxie/build-web-application-with-golang. ÂêØÂä®„ÄÅ‰ª•ÂØÜÁ†ÅÁôªÂÖ•ÂíåÂàõÂª∫Êï∞ÊçÆÂ∫ì# windows: Âú®binÁõÆÂΩï‰∏ãÔºåËøêË°å(git-bash‰ª•ÁÆ°ÁêÜÂëòËøêË°åÔºåÂä†winpty) mysqld --remove Âà†Èô§‰πãÂâçÁöÑmysqlÊúçÂä° mysqld -install mysql ÂÆâË£ÖwindowsÊúçÂä°ÔºåÊúçÂä°ÂêçÁß∞‰∏∫mysql(‰ªªÊÑèÂèñ) mysqld --initialize-insecure ÂèØÊó†ÂØÜÁ†ÅÁôªÈôÜroot net start mysql ÂêØÂä®ÊúçÂä°(ÂÖ≥Èó≠ÁöÑÂëΩ‰ª§ÊòØ net stop mysql) ubuntu: service mysql start ÂêØÂä®ÊúçÂä° service mysql stop ÂÖ≥Èó≠ÊúçÂä° service restart stop ÈáçÂêØÊúçÂä° ps -ef | grep mysqld Êü•ÁúãmysqlËøõÁ®ãÂàóË°® ÊâßË°åÂ¶Ç‰∏ãSQLËØ≠Âè•‰ª•ÂØÜÁ†ÅÁôªÂÖ• ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456'; ÊàñËÄÖÁºñÂÜô test.sql ÂàõÂª∫ source test.sql Êñá‰ª∂ ÁºñÂÜôGoÊñá‰ª∂# test.go ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108package mainimport ( "database/sql" "fmt" _ "github.com/go-sql-driver/mysql")func main() &#123; db, err := sql.Open("mysql", "root:123456@/test") //LinuxÁî®Êà∑Âêç:MySQLÂØÜÁ†Å@/Êï∞ÊçÆÂ∫ìÂêçtest checkErr(err) stm, err := db.Prepare("DROP TABLE IF EXISTS userinfo;") //ÂáÜÂ§áSQLËØ≠Âè•ÔºåÂà†Èô§Êï∞ÊçÆË°® checkErr(err) _, err = stm.Exec() //Excute, ÊâßË°åËØ≠Âè• checkErr(err) stm, err = db.Prepare(`CREATE TABLE userinfo ( uid INT(10) NOT NULL AUTO_INCREMENT, name VARCHAR(64) NOT NULL DEFAULT 'ÂåøÂêç', city VARCHAR(64) NULL DEFAULT '‰∏çËØ¶', moment DATE NOT NULL DEFAULT '1949-10-10', PRIMARY KEY (uid) ) DEFAULT CHARSET=utf8;`) //ÂàõÂª∫Êï∞ÊçÆË°®ÔºåËÆæÁΩÆutf8‰ª•ÊîØÊåÅ‰∏≠ÊñáÂ≠óÁ¨¶ checkErr(err) _, err = stm.Exec() checkErr(err) //Â¢ûÂä†Êï∞ÊçÆ stm, err = db.Prepare("INSERT userinfo SET name=?, city=?, moment=?") //ÂáÜÂ§áSQLËØ≠Âè• checkErr(err) _, err = stm.Exec("ËØ∏Ëëõ‰∫Æ", "Â±±‰∏ú‰∏¥Ê≤Ç", "234-10-8") //Excute, ‰º†ÂÖ•ÂèÇÊï∞Âπ∂ÊâßË°å checkErr(err) _, err = stm.Exec("ÂÖ≥ÁæΩ", "Â±±Ë•øËøêÂüé", "220-1-1") checkErr(err) _, err = stm.Exec("ËçÄÂΩß", "Ê≤≥ÂçóËÆ∏Êòå", "212-1-1") checkErr(err) stm, err = db.Prepare("INSERT userinfo SET city=?") checkErr(err) res, err := stm.Exec("Ê≤≥ÂçóÁ¶πÂ∑û") id, err := res.LastInsertId() checkErr(err) fmt.Println("ÊúÄÂêéÊèíÂÖ•ÁöÑÁî®Êà∑Â∫èÂè∑‰∏∫:", id) //Êü•ËØ¢Êï∞ÊçÆ rows, err := db.Query("SELECT * FROM userinfo") checkErr(err) fmt.Println("ÊâìÂç∞Êï∞ÊçÆË°®ÁöÑÊØèË°å‰ø°ÊÅØ:") fmt.Println("---------------------") for rows.Next() &#123; var uid int var name string var city string var moment string err = rows.Scan(&amp;uid, &amp;name, &amp;city, &amp;moment) checkErr(err) fmt.Print(uid, " ") fmt.Print(name, " ") fmt.Print(city, " ") fmt.Println(moment) &#125; //Âà†Èô§Êï∞ÊçÆ stm, err = db.Prepare("DELETE FROM userinfo WHERE uid=?") checkErr(err) res, err = stm.Exec(2) checkErr(err) fmt.Println("Âà†Èô§‰∫ÜÁ¨¨2Ë°å") //Êõ¥ÊîπÊï∞ÊçÆ stm, err = db.Prepare("UPDATE userinfo SET name=? WHERE uid=? OR uid=?") checkErr(err) res, err = stm.Exec("ÈÉ≠Âòâ", id-1, id) checkErr(err) affect, err := res.RowsAffected() checkErr(err) fmt.Println("ÊÄªÂÖ±Êúâ", affect, "Ë°åÁöÑ‰ø°ÊÅØÂèëÁîü‰∫ÜÊõ¥Êîπ") //Êü•ËØ¢Êï∞ÊçÆ rows, err = db.Query("SELECT * FROM userinfo") checkErr(err) fmt.Println("ÊâìÂç∞Êï∞ÊçÆË°®ÁöÑÊØèË°å‰ø°ÊÅØ:") fmt.Println("---------------------") for rows.Next() &#123; var uid int var name string var city string var moment string err = rows.Scan(&amp;uid, &amp;name, &amp;city, &amp;moment) checkErr(err) fmt.Print(uid, " ") fmt.Print(name, " ") fmt.Print(city, " ") fmt.Println(moment) &#125; db.Close()&#125;func checkErr(err error) &#123; if err != nil &#123; panic(err) &#125;&#125; ËøêË°åÁªìÊûúÔºö ËøõÂÖ•MySQLÊü•ÁúãÊï∞ÊçÆË°®Ôºö]]></content>
      <tags>
        <tag>Golang</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§ßËØùÊï∞ÊçÆÁªìÊûÑ]]></title>
    <url>%2F2018%2F12%2F20%2F2018-12-20%2F</url>
    <content type="text"><![CDATA[3.4 È°∫Â∫èÂ≠òÂÇ®ÁªìÊûÑ 3.6 ÈìæÂºèÂ≠òÂÇ®ÁªìÊûÑ 3.11 ÂçïÈìæË°®ÁªìÊûÑ‰∏éÈ°∫Â∫èÂ≠òÂÇ®ÁªìÊûÑ 3.12 ÈùôÊÄÅÈìæË°® 3.13 Âæ™ÁéØÈìæË°® 3.14 ÂèåÂêëÈìæË°® 4.2 Ê†à 4.10 ÈòüÂàó 4.12 Âæ™ÁéØÈòüÂàó 6.4 Ê†ëÁöÑÂ≠òÂÇ®ÁªìÊûÑ 6.5.2 ÁâπÊÆä‰∫åÂèâÊ†ë 6.6 ‰∫åÂèâÊ†ëÊÄßË¥® 6.8 ÈÅçÂéÜ‰∫åÂèâÊ†ë 6.8.6 Êé®ÂØºÈÅçÂéÜÁªìÊûú 6.10 Á∫øÁ¥¢‰∫åÂèâÊ†ë 6.11.1 Ê†ëËΩ¨Êç¢‰∏∫‰∫åÂèâÊ†ë 6.12 Ëµ´Â§´ÊõºÊ†ë 7.4.1 ÈÇªÊé•Áü©Èòµ(adjacency matrix) 7.4.2 ÈÇªÊé•Ë°® 7.5.1 Ê∑±Â∫¶‰ºòÂÖàÈÅçÂéÜ(Depth First Search) 7.5.2 ÂπøÂ∫¶‰ºòÂÖàÈÅçÂéÜ(Breadth First Search) 8.4.1 ‰∫åÂàÜÊü•Êâæ 8.6 ‰∫åÂèâÊü•ÊâæÊ†ë(Binary Sort Tree) 8.6.2 ‰∫åÂèâÊü•ÊâæÊ†ëÊèíÂÖ• 8.6.3 ‰∫åÂèâÊü•ÊâæÊ†ëÂà†Èô§ 8.7 Âπ≥Ë°°‰∫åÂèâÊ†ë(AVLÊ†ë) 9.2.1 ÊéíÂ∫èÁöÑÁ®≥ÂÆöÊÄß 9.2.2 ÂÜÖÊéíÂ∫èÂíåÂ§ñÊéíÂ∫è 9.3.2 ÂÜíÊ≥°ÊéíÂ∫èÁÆóÊ≥ï(Bubble Sort) 9.3.3 ÂÜíÊ≥°ÊéíÂ∫è‰ºòÂåñ 9.4.1 ÁÆÄÂçïÈÄâÊã©ÊéíÂ∫è(Simple Selection Sort) 9.5.1 Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è(Straight Insertion Sort) 9.6 Â∏åÂ∞îÊéíÂ∫è(Shell Sort) 9.7 Â†ÜÊéíÂ∫è 9.8 ÂΩíÂπ∂ÊéíÂ∫è 9.9 Âø´ÈÄüÊéíÂ∫è 3.4 È°∫Â∫èÂ≠òÂÇ®ÁªìÊûÑ# Êï∞ÂÄºdata(Ëµ∑Âßã‰ΩçÁΩÆ)ÔºõÊï∞ÁªÑÈïøÂ∫¶MaxSizeÔºõÁ∫øÊÄßË°®ÈïøÂ∫¶length LOC($a_{i}$)=LOC($a_{1}$)+(i-1)c 3.6 ÈìæÂºèÂ≠òÂÇ®ÁªìÊûÑ# ÂçïÈìæË°®ÔºåÊØè‰∏™ËäÇÁÇπÂè™ÂåÖÂê´‰∏Ä‰∏™ÊåáÈíàÂüü Â§¥ÊåáÈíàÔºåÂ§¥ËäÇÁÇπÔºåÁ¨¨‰∏Ä‰∏™ËäÇÁÇπ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172package mainimport ( "fmt")type Node struct &#123; data string next *Node&#125;type LinkList struct &#123; length int head *Node rear *Node&#125;func NewLinkList(head *Node) *LinkList &#123; return &amp;LinkList&#123;0, head, head&#125;&#125;func (this *LinkList) Append(data string) &#123; if this.rear == nil &#123; return &#125; node := &amp;Node&#123;data: data&#125; this.rear.next = node this.rear = node this.length++&#125;func (this *LinkList) Reverse() *LinkList &#123; head := this.head if head == nil || head.next == nil &#123; return this &#125; var pre *Node = nil cur := head.next //head‰∏ç‰∏∫Á©∫Êó∂ÔºåÂΩìÂâç‰∏∫Á¨¨1ËäÇÁÇπ this.rear = head.next //Á¨¨1ËäÇÁÇπ‰∏ç‰∏∫Á©∫Êó∂Ôºå‰Ωú‰∏∫ÊúÄÂêéËäÇÁÇπ for cur != nil &#123; cur.next, pre, cur = pre, cur, cur.next //buf := cur.next //cur.next = pre //pre = cur //cur = buf &#125; head.next = pre //ÊåáÂêëÁ¨¨ÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπ return this&#125;func main() &#123; head := &amp;Node&#123;&#125; bl := NewLinkList(head) bl.Append("1") bl.Append("2") bl.Append("3") bl.Append("4") bl.Reverse() for node := bl.head; node != nil; node = node.next &#123; fmt.Print(node.data, " ") &#125;&#125;&gt; Output:command-line-arguments 4 3 2 1 3.11 ÂçïÈìæË°®ÁªìÊûÑ‰∏éÈ°∫Â∫èÂ≠òÂÇ®ÁªìÊûÑ# ÂÜÖÂ≠òÂàÜÈÖçÔºõÊó∂Èó¥Â§çÊùÇÂ∫¶(Êü•ÊâæÔºåÊèíÂÖ•ÂíåÂà†Èô§)ÔºõÁ©∫Èó¥Â§çÊùÇÂ∫¶ 3.12 ÈùôÊÄÅÈìæË°®# 3.13 Âæ™ÁéØÈìæË°®# Â∞æÊåáÈíàrear Â§¥ËäÇÁÇπrear-&gt;next Á¨¨‰∏Ä‰∏™ËäÇÁÇπrear-&gt;next-&gt;next ÂêàÂπ∂Ôºö p=rearA-&gt;next q=rearB-&gt;next rearA-&gt;next=rearB-&gt;next-&gt;next rearB-&gt;next=p free(q) 3.14 ÂèåÂêëÈìæË°®# 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869package mainimport ( "fmt")type Node struct &#123; data string pre *Node next *Node&#125;type BiLinkList struct &#123; length int head *Node rear *Node&#125;func NewBiLinkList(head *Node) *BiLinkList &#123; return &amp;BiLinkList&#123;0, head, head&#125;&#125;func (this *BiLinkList) Append(data string) &#123; node := &amp;Node&#123;data: data&#125; this.rear.next = node node.pre = this.rear this.rear = node this.length++&#125;func (this *BiLinkList) InsertNext(p *Node, e string) &#123; //ÁúÅÁï•Âà§Êñ≠ nd ‰∏ç‰∏∫Á©∫‰∏îÂ±û‰∫éÈìæË°® if p.next == nil &#123; this.Append(e) &#125; else &#123; s := &amp;Node&#123;data: e&#125; s.pre = p s.next = p.next p.next.pre = s p.next = s &#125; this.length++&#125;func main() &#123; head := &amp;Node&#123;&#125; bl := NewBiLinkList(head) bl.Append("1") bl.Append("2") bl.Append("3") bl.InsertNext(head.next.next, "2.5") //for i := 0; i &lt; bl.length; i++ &#123; // fmt.Print(head.next.data, " ") // head = head.next //&#125; for node := bl.head; node.next != nil; node = node.next &#123; fmt.Print(node.data, " ") &#125; fmt.Print(bl.rear.data) //ÊâìÂç∞Êú´ËäÇÁÇπ&#125;&gt; Output:command-line-arguments 1 2 2.5 3 ‰ΩøÁî®Ê†áÂáÜÂ∫ì 1234567891011121314151617181920212223package mainimport ( "container/list" "fmt")func main() &#123; bl := list.New() for i := 1; i &lt; 4; i++ &#123; bl.PushBack(i) &#125; head := bl.Front() rear := bl.Back() for p := head; p != rear; p = p.Next() &#123; fmt.Print(p.Value, " ") &#125; fmt.Print(rear.Value)&#125;&gt; Output:command-line-arguments1 2 3 4.2 Ê†à# 123‰æùÊ¨°ËøõÊ†àÔºåÂá∫Ê†àÊ¨°Â∫è‰∏çÂèØËÉΩÊúâ312(12ÂêåÊó∂Âú®Ê†à‰∏≠,2‰∏ÄÂÆöÂÖàÂá∫) s-&gt;top Ê†àÈ°∂ÊåáÈíà Ê†àÈ°∂ÊåáÈíà‰∏∫-1Ë°®Á§∫ÊéßÊ†à s-&gt;data[s-&gt;top]Ê†àÈ°∂ÂÖÉÁ¥† 12345678910111213type Stack struct &#123; //Áî®‰∫éÂ≠òÊîæ int ÁöÑÊ†à nums []int&#125;func (this *Stack) Push(n int) &#123; this.nums = append(this.nums, n)&#125;func (this *Stack) Pop() int &#123; res := this.nums[len(this.nums)-1] this.nums = this.nums[:len(this.nums)-1] return res&#125; 4.10 ÈòüÂàó# 12345678910111213type Queue struct &#123; //Queue ÊòØÁî®‰∫éÂ≠òÊîæ int ÁöÑÈòüÂàó nums []int&#125;func (this *Queue) Push(n int) &#123; this.nums = append(this.nums, n)&#125;func (this *Queue) Pop() int &#123; res := this.nums[0] this.nums = this.nums[1:] return res&#125; 4.12 Âæ™ÁéØÈòüÂàó# ÈòüÂàóÊª°ÁöÑÊù°‰ª∂: (rear+1)%QueueSize == front ÈòüÂàóÈïøÂ∫¶:(rear-front+QueueSize)%QueueSize 6.4 Ê†ëÁöÑÂ≠òÂÇ®ÁªìÊûÑ# Âèå‰∫≤Ë°®Á§∫(Êï∞ÁªÑ)ÔºåÂ≠©Â≠êÂÖÑÂºüË°®Á§∫(Êï∞ÁªÑ)ÔºåÂ≠©Â≠êË°®Á§∫(Êï∞ÁªÑ+ÈìæË°®) 6.5.2 ÁâπÊÆä‰∫åÂèâÊ†ë# ÊñúÊ†ëÔºåÊª°‰∫åÂèâÊ†ëÔºåÂÆåÂÖ®‰∫åÂèâÊ†ë 6.6 ‰∫åÂèâÊ†ëÊÄßË¥®# ÊÄªÁªìÁÇπÊï∞Ôºö$n=n_{0}+n_{1}+n_{2}$ ÂàÜÊîØÁ∫øÊÄªÊï∞Ôºö $n-1=n_{1}+2n_{2}$ ÂÆåÂÖ®‰∫åÂèâÊ†ëÊ∑±Â∫¶Ôºö$[log_{2}n]+1$ ÂÆåÂÖ®‰∫åÂèâÊ†ëÊåâÂ±ÇÂ∫èÊéíÂè∑ÔºöËäÇÁÇπ$i$ÁöÑÂ∑¶ËäÇÁÇπ‰∏∫$2i$ 6.8 ÈÅçÂéÜ‰∫åÂèâÊ†ë# 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package mainimport ( "fmt")type BinaryTree struct &#123; data string left *BinaryTree right *BinaryTree&#125;func PreOrderRec(bt *BinaryTree) &#123; //ÂâçÂ∫è if bt == nil &#123; return &#125; fmt.Print(bt.data, " ") PreOrderRec(bt.left) PreOrderRec(bt.right)&#125;func MidOrderRec(bt *BinaryTree) &#123; //‰∏≠Â∫è if bt == nil &#123; return &#125; MidOrderRec(bt.left) fmt.Print(bt.data, " ") MidOrderRec(bt.right)&#125;func PostOrderRec(bt *BinaryTree) &#123; //ÂêéÂ∫è if bt == nil &#123; return &#125; PostOrderRec(bt.left) PostOrderRec(bt.right) fmt.Print(bt.data, " ")&#125;func main() &#123; node9 := &amp;BinaryTree&#123;data: "I"&#125; node8 := &amp;BinaryTree&#123;data: "H"&#125; node7 := &amp;BinaryTree&#123;data: "G"&#125; node6 := &amp;BinaryTree&#123;data: "F"&#125; node5 := &amp;BinaryTree&#123;data: "E", right: node9&#125; node4 := &amp;BinaryTree&#123;"D", node7, node8&#125; node3 := &amp;BinaryTree&#123;"C", node5, node6&#125; node2 := &amp;BinaryTree&#123;data: "B", left: node4&#125; root := &amp;BinaryTree&#123;"A", node2, node3&#125; PreOrderRec(root) fmt.Println() MidOrderRec(root) fmt.Println() PostOrderRec(root)&#125;&gt; Output:command-line-argumentsA B D G H C E I F G D H B A E I C F G H D B I E F C A 6.8.6 Êé®ÂØºÈÅçÂéÜÁªìÊûú# ÂâçÂ∫èÈÅçÂéÜÂ∫èÂàó+‰∏≠Â∫èÈÅçÂéÜÂ∫èÂàó-&gt;‰∫åÂèâÊ†ë ÂêéÂ∫èÈÅçÂéÜÂ∫èÂàó+‰∏≠Â∫èÈÅçÂéÜÂ∫èÂàó-&gt;‰∫åÂèâÊ†ë Ââç‰∏≠ÂêéÔºöBAC ABC ACB 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586package mainimport ( "fmt")type BinaryTree struct &#123; data string left *BinaryTree right *BinaryTree&#125;func PreOrderRec(bt *BinaryTree) &#123; //ÂâçÂ∫è if bt == nil &#123; return &#125; fmt.Print(bt.data, " ") PreOrderRec(bt.left) PreOrderRec(bt.right)&#125;func MidOrderRec(bt *BinaryTree) &#123; //‰∏≠Â∫è if bt == nil &#123; return &#125; MidOrderRec(bt.left) fmt.Print(bt.data, " ") MidOrderRec(bt.right)&#125;func PostOrderRec(bt *BinaryTree) &#123; //ÂêéÂ∫è if bt == nil &#123; return &#125; PostOrderRec(bt.left) PostOrderRec(bt.right) fmt.Print(bt.data, " ")&#125;func PreMid2Tree(pre, mid []string) *BinaryTree &#123; //ÂâçÂ∫è+‰∏≠Â∫èÊé®ÂØº‰∫åÂèâÊ†ë if len(pre) != len(mid) &#123; panic("‰∏§‰∏™ÂàáÁâáÁöÑÈïøÂ∫¶‰∏çÁõ∏Á≠â") &#125; if len(mid) == 0 &#123; return nil &#125; root := &amp;BinaryTree&#123; //ÂâçÂ∫èÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†‰∏∫root data: pre[0], &#125; if len(mid) == 1 &#123; return root &#125; position := IndexOf(root.data, mid) //ÊâæÂá∫rootÂú®‰∏≠Â∫èÁöÑ‰ΩçÁΩÆ root.left = PreMid2Tree(pre[1:position+1], mid[:position]) //ÈÄíÂΩí root.right = PreMid2Tree(pre[position+1:], mid[position+1:]) return root&#125;func IndexOf(ele string, seq []string) int &#123; for i, v := range seq &#123; if v == ele &#123; return i &#125; &#125; panic("IndexOfÈîôËØØÔºåÂÖÉÁ¥†‰∏çÂ≠òÂú®")&#125;func main() &#123; bt := PreMid2Tree([]string&#123;"A", "B", "D", "G", "H", "C", "E", "I", "F"&#125;, []string&#123;"G", "D", "H", "B", "A", "E", "I", "C", "F"&#125;) PostOrderRec(bt)&#125;&gt; Output:command-line-argumentsG H D B I E F C A 6.10 Á∫øÁ¥¢‰∫åÂèâÊ†ë# Â∞ÜËäÇÁÇπÁöÑÁ©∫ÊåáÈíàÊîπ‰∏∫ÊåáÂêëÂú®ÈÅçÂéÜÂ∫èÂàó‰∏≠ÁöÑÂâçÈ©±ÊàñÂêéÁªßÁöÑÊåáÈíà„ÄÇ 12345678910111213141516171819202122232425262728293031type ThreadBiTree struct &#123; data string left *ThreadBiTree right *ThreadBiTree lTag *ThreadBiTree //‰∏Ä‰∏™bit‰ΩçÔºåÂå∫ÂàÜÊòØÊåáÂêëÂ≠©Â≠êËøòÊòØÁ∫øÁ¥¢ rTag *ThreadBiTree&#125;var pre *ThreadBiTree //‰øùÂ≠òÂâçÈ©±func MidThreading(bt *ThreadBiTree) &#123; //‰∏≠Â∫èÈÅçÂéÜÁ∫øÁ¥¢Âåñ if bt == nil &#123; return &#125; MidThreading(bt.left) if bt.left == nil &#123; //Ëã•btÊúâÂ∑¶Á©∫ÊåáÈíàÔºåÂàôÊääpreËÆæ‰∏∫btÁöÑÂâçÈ©±ÔºåÂπ∂ËÆæÁΩÆÊ†áÂøó‰Ωç bt.left = pre bt.lTag = 1 &#125; if bt.right == nil &#123; //Ëã•btÊúâÂè≥Á©∫ÊåáÈíàÔºåÂàôÊääbtËÆæ‰∏∫preÁöÑÂêéÁªßÔºåÂπ∂ËÆæÁΩÆÊ†áÂøó‰Ωç pre.right = bt pre.rTag = 1 &#125; pre = bt MidThreading(bt.right)&#125; 6.11.1 Ê†ëËΩ¨Êç¢‰∏∫‰∫åÂèâÊ†ë# ÂÖÑÂºüËøûÁ∫øÔºõÂè™‰øùÁïôÁ¨¨‰∏Ä‰∏™Â≠©Â≠êÁöÑËøûÁ∫ø 6.12 Ëµ´Â§´ÊõºÊ†ë# Â∏¶ÊùÉË∑ØÂæÑÈïøÂ∫¶(WPL)ÊúÄÂ∞èÁöÑ‰∫åÂèâÊ†ë WPL(a)= 51+152+403+304+104 WPL(b)= 53+153+402+302+102 ÊûÑÈÄ† ÊéíÂ∫èÔºöA5, E10, B15, D30, C40 7.4.1 ÈÇªÊé•Áü©Èòµ(adjacency matrix)# Êó†ÂêëÂõæÔºö ÊúâÂêëÂõæÔºö ÊúâÂêëÁΩëÔºö Êó†ÂêëÁΩëÁöÑÂÆûÁé∞Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778package mainimport ( "fmt")const ( INFINITY int32 = 65536 // Êó†Á©∑)type Edge struct &#123; //ËæπÁöÑÈ°∂ÁÇπÂíåÊùÉÂÄº v0 string v1 string weight int32&#125;type Graph struct &#123; //Êó†ÂêëÁΩë v []string //È°∂ÁÇπÊï∞ÁªÑ e []Edge //ËæπÁöÑÊùÉÂÄº&#125;func IndexOfVertex(vs []string, v string) int &#123; //È°∂ÁÇπÂú®È°∂ÁÇπÊï∞ÁªÑÁöÑ‰ΩçÁΩÆ for i, value := range vs &#123; if value == v &#123; return i &#125; &#125; panic("ËæπÁöÑÈ°∂ÁÇπ‰∏çÂú®È°∂ÁÇπÊï∞ÁªÑ‰∏≠ÔºÅ")&#125;func (this *Graph) AdjMatrix() [][]int32 &#123; vertexNum := len(this.v) adjM := make([][]int32, vertexNum) //ÁîüÊàêÁü©ÈòµÁî®‰∏§Ê¨°make() for i := 0; i &lt; vertexNum; i++ &#123; //ÂàùÂßãÂåñ adjM[i] = make([]int32, vertexNum) for j := 0; j &lt; vertexNum; j++ &#123; if j == i &#123; adjM[i][j] = 0 &#125; else &#123; adjM[i][j] = INFINITY &#125; &#125; &#125; e := this.e v := this.v for _, edge := range e &#123; adjM[IndexOfVertex(v, edge.v0)][IndexOfVertex(v, edge.v1)] = edge.weight adjM[IndexOfVertex(v, edge.v1)][IndexOfVertex(v, edge.v0)] = edge.weight //Âõ†‰∏∫ÊòØÊó†ÂêëÂõæÊâÄ‰ª•ÊòØÂØπÁß∞Áü©Èòµ &#125; return adjM&#125;func main() &#123; v := []string&#123;"A", "B", "C", "D"&#125; e := []Edge&#123; Edge&#123;"A", "B", 5&#125;, Edge&#123;"A", "C", 3&#125;, Edge&#123;"A", "D", 6&#125;, Edge&#123;"B", "C", 7&#125;, Edge&#123;"C", "D", 9&#125;, &#125; graph := &amp;Graph&#123;v, e&#125; //ÁîüÊàêÊó†ÂêëÁΩë fmt.Println(graph.AdjMatrix()) // A B C D //A [ 0 5 3 6 ] //B [ 5 0 7 65536 ] //C [ 3 7 0 9 ] //D [ 6 65536 9 0 ]&#125;&gt; Output:command-line-arguments[[0 5 3 6] [5 0 7 65536] [3 7 0 9] [6 65536 9 0]] 7.4.2 ÈÇªÊé•Ë°®# Êó†ÂêëÂõæÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106package mainimport ( "fmt")type Edge struct &#123; //ÁªôÂÆöÈ°∂ÁÇπÂÆö‰πâËæπ v0 string v1 string&#125;type Graph struct &#123; //Êó†ÂêëÂõæ v []string //È°∂ÁÇπÊï∞ÁªÑ e []Edge //ËæπÊï∞ÁªÑ&#125;type Node struct &#123; //ÈÇªÊé•Ë°®ÁöÑËæπË°®ËäÇÁÇπ adjvex int next *Node&#125;type Vertex struct &#123; //ÈÇªÊé•Ë°®ÁöÑÈ°∂ÁÇπ data string firstedge *Node&#125;type LinkList struct &#123; //ÈÇªÊé•Ë°®ÁöÑÈìæË°® head *Vertex rear *Node&#125;func (this *LinkList) Append(adjvex int) &#123; newNode := &amp;Node&#123;adjvex: adjvex&#125; if this.rear == nil &#123; this.head.firstedge = newNode &#125; else &#123; this.rear.next = newNode this.rear = newNode &#125; this.rear = newNode&#125;func IndexOfVertex(vs []string, v string) int &#123; //È°∂ÁÇπÂú®È°∂ÁÇπÊï∞ÁªÑÁöÑ‰ΩçÁΩÆ for i, value := range vs &#123; if value == v &#123; return i &#125; &#125; panic("ËæπÁöÑÈ°∂ÁÇπ‰∏çÂú®È°∂ÁÇπÊï∞ÁªÑ‰∏≠ÔºÅ")&#125;func (this *Graph) AdjList() []LinkList &#123; vertexNum := len(this.v) v := this.v e := this.e adjL := make([]LinkList, vertexNum) //Áî®‰∏Ä‰∏™ÂçïÂêëÈìæË°®ÁöÑÊï∞ÁªÑÊù•Ë°®Á§∫ÈÇªÊé•Ë°® //for i := 0; i &lt; vertexNum; i++ &#123; //ÂàùÂßã // adjL[i].head.data = v[i] Âõ†‰∏∫Ê≠§Êó∂head‰∏∫nilÔºåÊ≤°ÊúâdataÂ≠óÊÆµ //&#125; for i := 0; i &lt; vertexNum; i++ &#123; //ÂàùÂßã adjL[i].head = &amp;Vertex&#123;data: v[i]&#125; &#125; for _, edge := range e &#123; i := IndexOfVertex(v, edge.v0) j := IndexOfVertex(v, edge.v1) adjL[i].Append(j) adjL[j].Append(i) &#125; return adjL&#125;func main() &#123; v := []string&#123;"v0", "v1", "v2", "v3"&#125; e := []Edge&#123; Edge&#123;"v0", "v1"&#125;, Edge&#123;"v0", "v2"&#125;, Edge&#123;"v0", "v3"&#125;, Edge&#123;"v1", "v2"&#125;, Edge&#123;"v2", "v3"&#125;, &#125; graph := &amp;Graph&#123;v, e&#125; //ÁîüÊàêÊó†ÂêëÂõæ adjL := graph.AdjList() for _, v := range adjL &#123; fmt.Print(v.head.data, " ") for node := v.head.firstedge; node != nil; node = node.next &#123; fmt.Print(node.adjvex, " ") &#125; fmt.Println() &#125;&#125;&gt; Output:command-line-argumentsv0 1 2 3 v1 0 2 v2 0 1 3 v3 0 2 ÊúâÂêëÁΩëÔºö 7.5.1 Ê∑±Â∫¶‰ºòÂÖàÈÅçÂéÜ(Depth First Search)# 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113package mainimport ( "fmt")var flag []bool //ÂÖ®Â±ÄÂèòÈáètype Edge struct &#123; //ÁªôÂÆöÈ°∂ÁÇπÂÆö‰πâËæπ v0 string v1 string&#125;type Graph struct &#123; //Êó†ÂêëÂõæ v []string //È°∂ÁÇπÊï∞ÁªÑ e []Edge //ËæπÊï∞ÁªÑ&#125;func (this *Graph) AdjMatrix() [][]int &#123; vertexNum := len(this.v) adjM := make([][]int, vertexNum) //ÁîüÊàêÁü©ÈòµÁî®‰∏§Ê¨°make() for i := 0; i &lt; vertexNum; i++ &#123; //ÂàùÂßãÂåñ adjM[i] = make([]int, vertexNum) for j := 0; j &lt; vertexNum; j++ &#123; adjM[i][j] = 0 &#125; &#125; e := this.e v := this.v for _, edge := range e &#123; adjM[IndexOfVertex(v, edge.v0)][IndexOfVertex(v, edge.v1)] = 1 adjM[IndexOfVertex(v, edge.v1)][IndexOfVertex(v, edge.v0)] = 1 &#125; return adjM&#125;func IndexOfVertex(vs []string, v string) int &#123; for i, value := range vs &#123; if value == v &#123; return i &#125; &#125; panic("ËæπÁöÑÈ°∂ÁÇπ‰∏çÂú®È°∂ÁÇπÊï∞ÁªÑ‰∏≠ÔºÅ")&#125;func DFSTraverse(adjM [][]int) &#123; //ËæìÂÖ•Êó†ÂêëÂõæÁöÑÈÇªÊé•Áü©Èòµ vertexNum := len(adjM) flag = make([]bool, vertexNum) //ÂàùÂßãÂåñflagÔºåÊ≥®ÊÑèËøôÈáå‰∏çËÉΩÁî® := for i := 0; i &lt; vertexNum; i++ &#123; flag[i] = false &#125; for i := 0; i &lt; vertexNum; i++ &#123; //ÂØπÊú™ËÆøÈóÆÁöÑËäÇÁÇπÊâßË°åÊ∑±Â∫¶ÊêúÁ¥¢ if !flag[i] &#123; DFS(vertexNum, i, adjM) &#125; &#125;&#125;func DFS(vertexNum int, i int, adjM [][]int) &#123; flag[i] = true fmt.Print(i, " ") //ÊâìÂç∞Ë¢´ËÆøÈóÆÁöÑËäÇÁÇπÂ∫èÂè∑ for j := 0; j &lt; vertexNum; j++ &#123; //ÂØπÊú™Ë¢´ËÆøÈóÆÁöÑÈÇªËäÇÁÇπÈÄíÂΩí if adjM[i][j] == 1 &amp;&amp; !flag[j] &#123; DFS(vertexNum, j, adjM) &#125; &#125;&#125;func main() &#123; v := []string&#123;"A", "B", "C", "D", "E", "F", "G", "H", "I"&#125; e := []Edge&#123; Edge&#123;"A", "B"&#125;, Edge&#123;"A", "F"&#125;, Edge&#123;"B", "C"&#125;, Edge&#123;"B", "G"&#125;, Edge&#123;"B", "I"&#125;, Edge&#123;"F", "G"&#125;, Edge&#123;"F", "E"&#125;, Edge&#123;"C", "D"&#125;, Edge&#123;"C", "I"&#125;, Edge&#123;"G", "D"&#125;, Edge&#123;"G", "H"&#125;, Edge&#123;"E", "D"&#125;, Edge&#123;"E", "H"&#125;, &#125; graph := &amp;Graph&#123;v, e&#125; //ÁîüÊàêÊó†ÂêëÂõæ adjM := graph.AdjMatrix() for i := 0; i &lt; len(adjM); i++ &#123; fmt.Println(adjM[i]) &#125; fmt.Println("-------------------") DFSTraverse(adjM)&#125;&gt; Output:command-line-arguments[0 1 0 0 0 1 0 0 0][1 0 1 0 0 0 1 0 1][0 1 0 1 0 0 0 0 1][0 0 1 0 1 0 1 0 0][0 0 0 1 0 1 0 1 0][1 0 0 0 1 0 1 0 0][0 1 0 1 0 1 0 1 0][0 0 0 0 1 0 1 0 0][0 1 1 0 0 0 0 0 0]-------------------0 1 2 3 4 5 6 7 8 7.5.2 ÂπøÂ∫¶‰ºòÂÖàÈÅçÂéÜ(Breadth First Search)# 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169package mainimport ( "fmt")type Edge struct &#123; //ÁªôÂÆöÈ°∂ÁÇπÂÆö‰πâËæπ v0 string v1 string&#125;type Graph struct &#123; //Êó†ÂêëÂõæ v []string //È°∂ÁÇπÊï∞ÁªÑ e []Edge //ËæπÊï∞ÁªÑ&#125;type Node struct &#123; //ÈÇªÊé•Ë°®ÁöÑËæπË°®ËäÇÁÇπ adjvex int next *Node&#125;type Vertex struct &#123; //ÈÇªÊé•Ë°®ÁöÑÈ°∂ÁÇπ data string firstedge *Node&#125;type LinkList struct &#123; //ÈÇªÊé•Ë°®ÁöÑÈìæË°® head *Vertex rear *Node&#125;type Queue struct &#123; nums []int&#125;func (this *Queue) Push(n int) &#123; this.nums = append(this.nums, n)&#125;func (this *Queue) Pop() int &#123; res := this.nums[0] this.nums = this.nums[1:] return res&#125;func (this *LinkList) Append(adjvex int) &#123; newNode := &amp;Node&#123;adjvex: adjvex&#125; if this.rear == nil &#123; this.head.firstedge = newNode &#125; else &#123; this.rear.next = newNode this.rear = newNode &#125; this.rear = newNode&#125;func IndexOfVertex(vs []string, v string) int &#123; //È°∂ÁÇπÂú®È°∂ÁÇπÊï∞ÁªÑÁöÑ‰ΩçÁΩÆ for i, value := range vs &#123; if value == v &#123; return i &#125; &#125; panic("ËæπÁöÑÈ°∂ÁÇπ‰∏çÂú®È°∂ÁÇπÊï∞ÁªÑ‰∏≠ÔºÅ")&#125;func (this *Graph) AdjList() []LinkList &#123; vertexNum := len(this.v) v := this.v e := this.e adjL := make([]LinkList, vertexNum) //Áî®‰∏Ä‰∏™ÂçïÂêëÈìæË°®ÁöÑÊï∞ÁªÑÊù•Ë°®Á§∫ÈÇªÊé•Ë°® //for i := 0; i &lt; vertexNum; i++ &#123; //ÂàùÂßã // adjL[i].head.data = v[i] Âõ†‰∏∫Ê≠§Êó∂head‰∏∫nilÔºåÊ≤°ÊúâdataÂ≠óÊÆµ //&#125; for i := 0; i &lt; vertexNum; i++ &#123; //ÂàùÂßã adjL[i].head = &amp;Vertex&#123;data: v[i]&#125; &#125; for _, edge := range e &#123; i := IndexOfVertex(v, edge.v0) j := IndexOfVertex(v, edge.v1) adjL[i].Append(j) adjL[j].Append(i) &#125; return adjL&#125;func BFSTraverse(adjL []LinkList) &#123; //ËæìÂÖ•ÈÇªÊé•Ë°® vertexNum := len(adjL) flag := make([]bool, vertexNum) //Ê†áËÆ∞Ë¢´ËÆøÈóÆÁöÑËäÇÁÇπ for i := 0; i &lt; vertexNum; i++ &#123; flag[i] = false &#125; Q := new(Queue) //ÈòüÂàó for i := 0; i &lt; vertexNum; i++ &#123; if !flag[i] &#123; //Â¶ÇÊûúÈ°∂ÁÇπÊú™Ë¢´ËÆøÈóÆ flag[i] = true Q.Push(i) for len(Q.nums) &gt; 0 &#123; //ÈòüÂàó‰∏ç‰∏∫Á©∫ j := Q.Pop() fmt.Print(adjL[j].head.data, " ") //ÊâìÂç∞ËäÇÁÇπ for node := adjL[j].head.firstedge; node != nil; node = node.next &#123; if flag[node.adjvex] == false &#123; flag[node.adjvex] = true Q.Push(node.adjvex) &#125; &#125; &#125; &#125; &#125;&#125;func main() &#123; v := []string&#123;"A", "B", "C", "D", "E", "F", "G", "H", "I"&#125; e := []Edge&#123; Edge&#123;"A", "B"&#125;, Edge&#123;"A", "F"&#125;, Edge&#123;"B", "C"&#125;, Edge&#123;"B", "G"&#125;, Edge&#123;"B", "I"&#125;, Edge&#123;"F", "G"&#125;, Edge&#123;"F", "E"&#125;, Edge&#123;"C", "D"&#125;, Edge&#123;"C", "I"&#125;, Edge&#123;"G", "D"&#125;, Edge&#123;"G", "H"&#125;, Edge&#123;"E", "D"&#125;, Edge&#123;"E", "H"&#125;, &#125; graph := &amp;Graph&#123;v, e&#125; //ÁîüÊàêÊó†ÂêëÂõæ adjL := graph.AdjList() for _, v := range adjL &#123; fmt.Print(v.head.data, " ") for node := v.head.firstedge; node != nil; node = node.next &#123; fmt.Print(adjL[node.adjvex].head.data, " ") &#125; fmt.Println() &#125; fmt.Println("-----------------") BFSTraverse(adjL)&#125;&gt; Output:command-line-argumentsA B F B A C G I C B D I D C G E E F D H F A G E G B F D H H G E I B C -----------------A B F C G I E D H 8.4.1 ‰∫åÂàÜÊü•Êâæ# 123456789101112131415161718192021222324252627282930313233package mainimport ( "fmt")func BiSearch(a []int, n, key int) int &#123; var low, high, mid int low = 1 high = n for low &lt;= high &#123; mid = (low + high) / 2 //mid = low + (high-low)(key-1)/(99-1) ÊèíÂÄº if key == a[mid] &#123; return mid &#125; else if key &lt; a[mid] &#123; high = mid - 1 &#125; else &#123; low = mid + 1 &#125; &#125; return 0&#125;func main() &#123; a := []int&#123;0, 1, 16, 24, 35, 47, 59, 62, 73, 88, 99&#125; fmt.Println(BiSearch(a, 10, 62))&#125;&gt; Output:command-line-arguments7 8.6 ‰∫åÂèâÊü•ÊâæÊ†ë(Binary Sort Tree)# Â∑¶Â∞èÂè≥Â§ß 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package mainimport ( "fmt")type BinaryTree struct &#123; data int left *BinaryTree right *BinaryTree&#125;func SearchBST(root *BinaryTree, key int) bool &#123; if root == nil &#123; return false &#125; switch &#123; case key &lt; root.data: return SearchBST(root.left, key) case key &gt; root.data: return SearchBST(root.right, key) default: return true &#125;&#125;func main() &#123; node10 := &amp;BinaryTree&#123;data: 37&#125; node9 := &amp;BinaryTree&#123;data: 93&#125; node8 := &amp;BinaryTree&#123;data: 51&#125; node7 := &amp;BinaryTree&#123;data: 35, right: node10&#125; node6 := &amp;BinaryTree&#123;data: 99, left: node9&#125; node5 := &amp;BinaryTree&#123;data: 73&#125; node4 := &amp;BinaryTree&#123;data: 47, left: node7, right: node8&#125; node3 := &amp;BinaryTree&#123;88, node5, node6&#125; node2 := &amp;BinaryTree&#123;data: 58, left: node4&#125; root := &amp;BinaryTree&#123;62, node2, node3&#125; fmt.Print(SearchBST(root, 73), " ") fmt.Print(SearchBST(root, 99), " ") fmt.Print(SearchBST(root, 37), " ") fmt.Print(SearchBST(root, 48), " ") fmt.Print(SearchBST(root, 100))&#125;&gt; Output:command-line-argumentstrue true true false false 8.6.2 ‰∫åÂèâÊü•ÊâæÊ†ëÊèíÂÖ•# 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package mainimport ( "fmt")type BinaryTree struct &#123; data int left *BinaryTree right *BinaryTree&#125;func InsertBST(root *BinaryTree, key int) (bool, *BinaryTree) &#123; //if SearchBST(root, key) &#123; //ÂÅáËÆæ‰∏çÂ≠òÂú® // return false, root //&#125; return true, Insert(root, key)&#125;func Insert(root *BinaryTree, key int) *BinaryTree &#123; if root == nil &#123; return &amp;BinaryTree&#123;data: key&#125; //ÊèíÂÖ•ÁöÑÊú¨Ë¥®Ë¶ÅÁîüÊàêÊñ∞ÁöÑËäÇÁÇπ &#125; if key &lt; root.data &#123; root.left = Insert(root.left, key) &#125; else &#123; // Ê≤°Êúâkey = root.data ÁöÑÊÉÖÂÜµ root.right = Insert(root.right, key) &#125; return root&#125;func main() &#123; node10 := &amp;BinaryTree&#123;data: 37&#125; node9 := &amp;BinaryTree&#123;data: 93&#125; node8 := &amp;BinaryTree&#123;data: 51&#125; node7 := &amp;BinaryTree&#123;data: 35, right: node10&#125; node6 := &amp;BinaryTree&#123;data: 99, left: node9&#125; node5 := &amp;BinaryTree&#123;data: 73&#125; node4 := &amp;BinaryTree&#123;data: 47, left: node7, right: node8&#125; node3 := &amp;BinaryTree&#123;88, node5, node6&#125; node2 := &amp;BinaryTree&#123;data: 58, left: node4&#125; root := &amp;BinaryTree&#123;62, node2, node3&#125; fmt.Print(root.right.right.left.data, root.right.right.left.right, " ") _, root = InsertBST(root, 95) fmt.Print(root.right.right.left.right.data)&#125;&gt; Output:command-line-arguments93 &lt;nil&gt; 95 8.6.3 ‰∫åÂèâÊü•ÊâæÊ†ëÂà†Èô§# 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475package mainimport ( "fmt")type BinaryTree struct &#123; data int left *BinaryTree right *BinaryTree&#125;//Âà†Èô§data‰∏∫keyÁöÑËäÇÁÇπÔºåÂπ∂ËøîÂõûËØ•‰∫åÂèâÊ†ëÁöÑÊ†πËäÇÁÇπ„ÄÇfunc DeleteBST(root *BinaryTree, key int) *BinaryTree &#123; if root == nil &#123; return nil &#125; switch &#123; case key &gt; root.data: //Âú®Âè≥Â≠êÊ†ë‰∏≠ root.right = DeleteBST(root.right, key) case key &lt; root.data: //Âú®Â∑¶Â≠êÊ†ë‰∏≠ root.left = DeleteBST(root.left, key) default: //key == root.data if root.left == nil &amp;&amp; root.right == nil &#123; //ËØ•ËäÇÁÇπ‰∏∫Âè∂ËäÇÁÇπ return nil &#125; else if root.left == nil &amp;&amp; root.right != nil &#123; //ËØ•ËäÇÁÇπ‰ªÖÊúâÂè≥Â≠êÊ†ë return root.right &#125; else if root.left != nil &amp;&amp; root.right == nil &#123; //ËØ•ËäÇÁÇπ‰ªÖÊúâÂ∑¶Â≠êÊ†ë return root.left &#125; else &#123; //ËØ•ËäÇÁÇπÊúâÂ∑¶„ÄÅÂè≥Â≠êÊ†ë success := FindMin(root.right) //ÊâæÂà∞keyÁöÑÂêéÁªßËäÇÁÇπ,Âç≥48 root.right = DeleteBST(root.right, success) root.data = success &#125; &#125; return root&#125;//ÊâæÂà∞BST‰∏≠dataÊúÄÂ∞èÁöÑËäÇÁÇπfunc FindMin(root *BinaryTree) int &#123; if root.left == nil &#123; //ÊúÄÂ∞èÂÄºÂú®Ê†πËäÇÁÇπ return root.data &#125; return FindMin(root.left) //ÊúÄÂ∞èÂÄºÂú®Â∑¶Â≠êÊ†ë&#125;func main() &#123; node16 := &amp;BinaryTree&#123;data: 50&#125; node15 := &amp;BinaryTree&#123;data: 48&#125; node14 := &amp;BinaryTree&#123;data: 36&#125; node13 := &amp;BinaryTree&#123;data: 56&#125; node12 := &amp;BinaryTree&#123;49, node15, node16&#125; node11 := &amp;BinaryTree&#123;data: 37, left: node14&#125; node10 := &amp;BinaryTree&#123;data: 29&#125; node9 := &amp;BinaryTree&#123;data: 93&#125; node8 := &amp;BinaryTree&#123;51, node12, node13&#125; node7 := &amp;BinaryTree&#123;35, node10, node11&#125; node6 := &amp;BinaryTree&#123;data: 99, left: node9&#125; node5 := &amp;BinaryTree&#123;data: 73&#125; node4 := &amp;BinaryTree&#123;data: 47, left: node7, right: node8&#125; node3 := &amp;BinaryTree&#123;88, node5, node6&#125; node2 := &amp;BinaryTree&#123;data: 58, left: node4&#125; root := &amp;BinaryTree&#123;62, node2, node3&#125; root = DeleteBST(root, 47) NewNode := root.left.left fmt.Print(NewNode.data, " ") //ÊâìÂç∞‰ª£ÊõøÂà†Èô§‰ΩçÁΩÆÁöÑÊñ∞ËäÇÁÇπ fmt.Print(NewNode.left.data, NewNode.right.data)&#125;&gt; Output:command-line-arguments48 35 51 8.7 Âπ≥Ë°°‰∫åÂèâÊ†ë(AVLÊ†ë)# Âπ≥Ë°°Âõ†Â≠ê(BF)=Â∑¶Â≠êÊ†ëÁöÑÊ∑±Â∫¶-Âè≥Â≠êÊ†ëÁöÑÊ∑±Â∫¶ ÊóãËΩ¨Ôºö 123456789//Âè≥Êóãfunc RRotate(k2 *BinaryTree) *BinaryTree &#123; k1 := k2.left y := k1.right k1.right = k2 k2.left = y return k1&#125; ÂèåÊóãËΩ¨Ôºö 12345//Â∑¶Âè≥ÊóãËΩ¨func LRRotate(k3 *BinaryTree) *BinaryTree &#123; k3.left = LRotate(k3.left) return RRotate(k3)&#125; Â∞Ü‰ªªÊÑè‰∫åÂèâÊ†ë‰∏ÄÊ¨°ÊÄßË∞ÉÊï¥AVL 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185package mainimport ( "fmt")type BinaryTree struct &#123; data int bf int //Balance Factor left *BinaryTree right *BinaryTree&#125;//Âè≥Êóãfunc R_Rotate(root *BinaryTree) *BinaryTree &#123; a := root.left b := a.right a.right = root root.left = b return a&#125;//Â∑¶Êóãfunc L_Rotate(root *BinaryTree) *BinaryTree &#123; a := root.right b := a.left a.left = root root.right = b return a&#125;//Â∑¶Âè≥ÊóãËΩ¨func LR_Rotate(root *BinaryTree) *BinaryTree &#123; root.left = L_Rotate(root.left) return R_Rotate(root)&#125;//Âè≥Â∑¶ÊóãËΩ¨func RL_Rotate(root *BinaryTree) *BinaryTree &#123; root.right = R_Rotate(root.right) return L_Rotate(root)&#125;//Â∞Ü‰ªªÊÑè‰∫åÂèâÊ†ëËΩ¨ÂåñÊàêAVLfunc Balance(root *BinaryTree) *BinaryTree &#123; a := &amp;BinaryTree&#123;left: root&#125; //Áªô‰∫åÂèâÊ†ëÁîüÊàê‰∏Ä‰∏™Áà∂ÊØçËäÇÁÇπ _, isAVL := Bal(root) //Ë∞ÉÊï¥‰∫åÂèâÊ†ëÁöÑÂ≠êÊ†ëÂπ∂Âà§Êñ≠‰∫åÂèâÊ†ëÊòØÂê¶Âπ≥Ë°° for !isAVL &#123; Bal(a) //Â§ÑÁêÜaÁöÑÂ∑¶Â≠êÊ†ëÔºåÂç≥‰∫åÂèâÊ†ë _, isAVL = Bal(a.left) //Âà§Êñ≠‰∫åÂèâÊ†ëÊòØÂê¶Âπ≥Ë°° &#125; return a.left //ËøîÂõû‰∫åÂèâÊ†ë&#125;//Ë∞ÉÊï¥Â≠êÊ†ëfunc Bal(root *BinaryTree) (int, bool) &#123; if root == nil &#123; return 0, true &#125; leftHeight, leftIsBalanced := Bal(root.left) rightHeight, rightIsBalanced := Bal(root.right) if !leftIsBalanced &#123; root.left = Rotate(root.left) //Ë∞ÉÊï¥Â∑¶Â≠êÊ†ë leftHeight = UpdateBF(root.left) //Âà∑Êñ∞Â∑¶Â≠êÊ†ëÁöÑBFÂíåÈ´òÂ∫¶ &#125; if !rightIsBalanced &#123; root.right = Rotate(root.right) rightHeight = UpdateBF(root.right) &#125; root.bf = leftHeight - rightHeight //ËÆ°ÁÆóÊú¨Ë∫´ÁöÑBF if Abs(root.bf) &lt;= 1 &#123; return Max(leftHeight, rightHeight) + 1, true &#125; return Max(leftHeight, rightHeight) + 1, false&#125;//ÂØπ‰∏çÂπ≥Ë°°Ê†ëËøõË°åÊóãËΩ¨Ë∞ÉÊï¥func Rotate(root *BinaryTree) *BinaryTree &#123; if root.bf &gt; 0 &#123; //Â∑¶ËæπÂ§™ÈáçÔºåÈúÄË¶ÅÂè≥Êóã if root.left.bf &lt; 0 &#123; return LR_Rotate(root) &#125; return R_Rotate(root) &#125; if root.right.bf &gt; 0 &#123; return RL_Rotate(root) &#125; return L_Rotate(root)&#125;func UpdateBF(root *BinaryTree) int &#123; if root == nil &#123; return 0 &#125; leftHeight := UpdateBF(root.left) rightHeight := UpdateBF(root.right) root.bf = leftHeight - rightHeight return Max(leftHeight, rightHeight) + 1&#125;func Max(a, b int) int &#123; if a &gt; b &#123; return a &#125; return b&#125;func Abs(a int) int &#123; if a &gt; 0 &#123; return a &#125; return -a&#125;func InsertBST(root *BinaryTree, key int) (bool, *BinaryTree) &#123; //if SearchBST(root, key) &#123; //ÂÅáËÆæ‰∏çÂ≠òÂú® // return false, root //&#125; return true, Insert(root, key)&#125;func Insert(root *BinaryTree, key int) *BinaryTree &#123; if root == nil &#123; return &amp;BinaryTree&#123;data: key&#125; //ÊèíÂÖ•ÁöÑÊú¨Ë¥®Ë¶ÅÁîüÊàêÊñ∞ÁöÑËäÇÁÇπ &#125; if key &lt; root.data &#123; root.left = Insert(root.left, key) &#125; else &#123; // Ê≤°Êúâkey = root.data ÁöÑÊÉÖÂÜµ root.right = Insert(root.right, key) &#125; return root&#125;func PrintBF(root *BinaryTree) &#123; if root == nil &#123; return &#125; PrintBF(root.left) fmt.Print(root.bf, " ") PrintBF(root.right)&#125;func main() &#123; root := &amp;BinaryTree&#123;data: 1&#125; InsertBST(root, 7) InsertBST(root, 2) InsertBST(root, 4) InsertBST(root, 8) InsertBST(root, 3) InsertBST(root, 10) InsertBST(root, 5) InsertBST(root, 9) InsertBST(root, 6) UpdateBF(root) PrintBF(root) //‰∫åÂèâÊ†ëÁöÑBF fmt.Println() PrintBF(Balance(root)) //Âπ≥Ë°°Ë∞ÉÊï¥ÂêéÁöÑ‰∫åÂèâÊ†ëÁöÑBF&#125;&gt; Output:command-line-arguments-5 -3 0 -1 -1 0 1 -2 0 1 0 0 0 -1 -1 0 0 0 0 0 9.2.1 ÊéíÂ∫èÁöÑÁ®≥ÂÆöÊÄß# 9.2.2 ÂÜÖÊéíÂ∫èÂíåÂ§ñÊéíÂ∫è# ÂÜÖÊéíÂ∫èÊòØÂú®ÊéíÂ∫èÁöÑÊï¥‰∏™ËøáÁ®ã‰∏≠ÔºåÂæÖÊéíÂ∫èÁöÑÊâÄÊúâËÆ∞ÂΩïÂÖ®ÈÉ®Âú®ÂÜÖÂ≠ò‰∏≠„ÄÇÂ§ñÊéíÂ∫èÁöÑÊï¥‰∏™ËøáÁ®ãÂàôÈúÄË¶ÅÂú®ÂÜÖÂ§ñÂ≠ò‰πãÈó¥‰∫§Êç¢Êï∞ÊçÆ„ÄÇ 9.3.2 ÂÜíÊ≥°ÊéíÂ∫èÁÆóÊ≥ï(Bubble Sort)# ÂÜíÊ≥°ÊéíÂ∫èÂ∞±ÊòØÊääÂ∞èÁöÑÂÖÉÁ¥†ÂæÄÂâçË∞ÉÊàñËÄÖÊääÂ§ßÁöÑÂÖÉÁ¥†ÂæÄÂêéË∞É„ÄÇÊØîËæÉÊòØÁõ∏ÈÇªÁöÑ‰∏§‰∏™ÂÖÉÁ¥†ÊØîËæÉÔºå‰∫§Êç¢‰πüÂèëÁîüÂú®Ëøô‰∏§‰∏™ÂÖÉÁ¥†‰πãÈó¥„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇÊûú‰∏§‰∏™ÂÖÉÁ¥†Áõ∏Á≠âÔºåÊàëÊÉ≥‰Ω†ÊòØ‰∏ç‰ºöÂÜçÊó†ËÅäÂú∞Êää‰ªñ‰ª¨‰ø©‰∫§Êç¢‰∏Ä‰∏ãÁöÑÔºõÂ¶ÇÊûú‰∏§‰∏™Áõ∏Á≠âÁöÑÂÖÉÁ¥†Ê≤°ÊúâÁõ∏ÈÇªÔºåÈÇ£‰πàÂç≥‰ΩøÈÄöËøáÂâçÈù¢ÁöÑ‰∏§‰∏§‰∫§Êç¢Êää‰∏§‰∏™Áõ∏ÈÇªËµ∑Êù•ÔºåËøôÊó∂ÂÄô‰πü‰∏ç‰ºö‰∫§Êç¢ÔºåÊâÄ‰ª•Áõ∏ÂêåÂÖÉÁ¥†ÁöÑÂâçÂêéÈ°∫Â∫èÂπ∂Ê≤°ÊúâÊîπ ÂèòÔºåÊâÄ‰ª•ÂÜíÊ≥°ÊéíÂ∫èÊòØ‰∏ÄÁßçÁ®≥ÂÆöÊéíÂ∫èÁÆóÊ≥ï„ÄÇ 12345678910111213141516171819202122232425262728package mainimport ( "fmt")package mainimport ( "fmt")func BubbleSort(a []int) &#123; length := len(a) for i := 1; i &lt; length-1; i++ &#123; //ÈúÄË¶Å‰∫§Êç¢(length-2)Ê¨°Ôºå‰ªéÂêéÂæÄÂâçÊéí for j := 1; j &lt; length-i; j++ &#123; //ÂΩìi=1Êó∂ÔºåjÂèØ‰ª•ÂèñÂà∞(length-2) if a[j] &gt; a[j+1] &#123; a[j], a[j+1] = a[j+1], a[j] &#125; &#125; &#125;&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 2&#125; BubbleSort(a) fmt.Println(a)&#125; ÈÄíÂΩíÂÆûÁé∞. for Âæ™ÁéØÊâæÂá∫ÊúÄÂ§ßÂÄºÊéíÂà∞Êú´Â∞æÔºåÂéªÊéâÊú´Â∞æÊääÂØπÊñ∞ÁöÑÂ∫èÂàóÈÄíÂΩí 1234567891011121314151617181920212223242526272829package mainimport ( &quot;fmt&quot;)func RecurBubble(a []int) &#123; length := len(a) if length &lt; 3 &#123; //ÈÄíÂΩíË∑≥Âá∫Êù°‰ª∂ return &#125; for j := 1; j &lt;= length-2; j++ &#123; if a[j] &gt; a[j+1] &#123; a[j], a[j+1] = a[j+1], a[j] &#125; &#125; a = a[0 : length-1] //‰∏çÂåÖÊã¨Á¨¨ length-1 ‰∏™ÂÖÉÁ¥† RecurBubble(a)&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 2&#125; RecurBubble(a) fmt.Println(a)&#125; 9.3.3 ÂÜíÊ≥°ÊéíÂ∫è‰ºòÂåñ# 123456789101112131415161718192021222324252627package mainimport ( "fmt")func BubbleSort2(a []int) &#123; flag := true // ÊúâÊï∞ÊçÆ‰∫§Êç¢ length := len(a) for i := 1; i &lt; length-1 &amp;&amp; flag; i++ &#123; flag = false for j := 1; j &lt; length-i; j++ &#123; if a[j] &gt; a[j+1] &#123; a[j], a[j+1] = a[j+1], a[j] flag = true &#125; &#125; &#125;&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 2&#125; BubbleSort2(a) fmt.Println(a)&#125; 9.4.1 ÁÆÄÂçïÈÄâÊã©ÊéíÂ∫è(Simple Selection Sort)# Â§çÊùÇÂ∫¶‰∏éÂÜíÊ≥°ÊéíÂ∫èÂêå‰∏∫$O(n^{2})$,‰ΩÜÊÄßËÉΩÊõ¥‰ºò(Êï∞ÊçÆ‰∫§Êç¢Ê¨°Êï∞Êõ¥Â∞ë)„ÄÇÈÄâÊã©ÊéíÂ∫èÊòØÁªôÊØè‰∏™‰ΩçÁΩÆÈÄâÊã©ÂΩìÂâçÂÖÉÁ¥†ÊúÄÂ∞èÁöÑÔºåÊØîÂ¶ÇÁªôÁ¨¨‰∏Ä‰∏™‰ΩçÁΩÆÈÄâÊã©ÊúÄÂ∞èÁöÑÔºåÂú®Ââ©‰ΩôÂÖÉÁ¥†ÈáåÈù¢ÁªôÁ¨¨‰∫å‰∏™ÂÖÉÁ¥†ÈÄâÊã©Á¨¨‰∫åÂ∞èÁöÑÔºå‰æùÊ¨°Á±ªÊé®ÔºåÁõ¥Âà∞Á¨¨n-1‰∏™ÂÖÉÁ¥†ÔºåÁ¨¨n‰∏™ ÂÖÉÁ¥†‰∏çÁî®ÈÄâÊã©‰∫ÜÔºåÂõ†‰∏∫Âè™Ââ©‰∏ãÂÆÉ‰∏Ä‰∏™ÊúÄÂ§ßÁöÑÂÖÉÁ¥†‰∫Ü„ÄÇ 1234567891011121314151617181920212223242526272829303132package mainimport ( "fmt")func SelectionSort(a []int) &#123; var min int length := len(a) for i := 1; i &lt; length-1; i++ &#123; //ÊèíÂÖ•Ê¨°Êï∞(length-2)Ôºå‰ªéÂâçÂæÄÂêéÊéíÔºõÊääÂêéÈù¢Â∫èÂàó‰∏≠ËæÉÂ∞èÁöÑÊï∞Êèí min = i // Âæ™ÁéØÊâæÂá∫Â∫èÂàó‰∏≠ÁöÑÊúÄÂ∞èÊï∞ÁöÑ‰∏ãÊ†á for j := i + 1; j &lt; length; j++ &#123; //jÂèñÂà∞iÂêéÁöÑÊâÄÊúâÊï∞ if a[j] &lt; a[min] &#123; //‰πãÂêéÊúâÊõ¥Â∞èÁöÑÊï∞ min = j &#125; &#125; if i != min &#123; //‰∏ãÊ†áÊîπÂèòÔºå‰∫§Êç¢ÔºåÈò≤Ê≠¢Êï∞ÊçÆ‰∏¢Â§± a[i], a[min] = a[min], a[i] &#125; &#125;&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 2&#125; SelectionSort(a) fmt.Println(a)&#125; ÂèçËøáÊù•Êéí 12345678910111213141516171819202122232425262728293031package mainimport ( &quot;fmt&quot;)func SelectionSort(a []int) &#123; var max int length := len(a) for i := length - 1; i &gt; 0; i-- &#123; ‰ªéÂ§ßÂà∞Â∞èÊéí max = i for j := 1; j &lt; i; j++ &#123; if a[j] &gt; a[max] &#123; max = j &#125; &#125; if max != i &#123; a[i], a[max] = a[max], a[i] &#125; &#125;&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 2&#125; SelectionSort(a) fmt.Println(a)&#125; ÈÄíÂΩí 1234567891011121314151617181920212223242526272829303132package mainimport ( "fmt")func SelectionSort(a []int) &#123; length := len(a) if length &lt; 3 &#123; return &#125; max := length - 1 for j := 1; j &lt; length-1; j++ &#123; if a[j] &gt; a[max] &#123; max = j &#125; &#125; if max != length-1 &#123; a[length-1], a[max] = a[max], a[length-1] &#125; SelectionSort(a[:length-1])&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 2&#125; SelectionSort(a) fmt.Println(a)&#125; 9.5.1 Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è(Straight Insertion Sort)# ÊèíÂÖ•ÊéíÂ∫èÊòØÂú®‰∏Ä‰∏™Â∑≤ÁªèÊúâÂ∫èÁöÑÂ∞èÂ∫èÂàóÁöÑÂü∫Á°Ä‰∏äÔºå‰∏ÄÊ¨°ÊèíÂÖ•‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇÂΩìÁÑ∂ÔºåÂàöÂºÄÂßãËøô‰∏™ÊúâÂ∫èÁöÑÂ∞èÂ∫èÂàóÂè™Êúâ1‰∏™ÂÖÉÁ¥†ÔºåÂ∞±ÊòØÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇÊØîËæÉÊòØ‰ªéÊúâÂ∫èÂ∫èÂàóÁöÑÊú´Â∞æÂºÄ ÂßãÔºå‰πüÂ∞±ÊòØÊÉ≥Ë¶ÅÊèíÂÖ•ÁöÑÂÖÉÁ¥†ÂíåÂ∑≤ÁªèÊúâÂ∫èÁöÑÊúÄÂ§ßËÄÖÂºÄÂßãÊØîËµ∑ÔºåÂ¶ÇÊûúÊØîÂÆÉÂ§ßÂàôÁõ¥Êé•ÊèíÂÖ•Âú®ÂÖ∂ÂêéÈù¢ÔºåÂê¶Âàô‰∏ÄÁõ¥ÂæÄÂâçÊâæÁõ¥Âà∞ÊâæÂà∞ÂÆÉËØ•ÊèíÂÖ•ÁöÑ‰ΩçÁΩÆ„ÄÇÂ¶ÇÊûúÁ¢∞ËßÅ‰∏Ä‰∏™ÂíåÊèíÂÖ•ÂÖÉÁ¥†Áõ∏ Á≠âÁöÑÔºåÈÇ£‰πàÊèíÂÖ•ÂÖÉÁ¥†ÊääÊÉ≥ÊèíÂÖ•ÁöÑÂÖÉÁ¥†ÊîæÂú®Áõ∏Á≠âÂÖÉÁ¥†ÁöÑÂêéÈù¢„ÄÇÊâÄ‰ª•ÔºåÁõ∏Á≠âÂÖÉÁ¥†ÁöÑÂâçÂêéÈ°∫Â∫èÊ≤°ÊúâÊîπÂèòÔºå‰ªéÂéüÊó†Â∫èÂ∫èÂàóÂá∫ÂéªÁöÑÈ°∫Â∫èÂ∞±ÊòØÊéíÂ•ΩÂ∫èÂêéÁöÑÈ°∫Â∫èÔºåÊâÄ‰ª•ÊèíÂÖ•ÊéíÂ∫èÊòØÁ®≥ ÂÆöÁöÑ„ÄÇ Â§çÊùÇÂ∫¶Âêå‰∏∫‰∏∫$O(n^{2})$ÔºåÊÄßËÉΩÔºöÊèíÂÖ•ÊéíÂ∫è&gt;ÈÄâÊã©ÊéíÂ∫è&gt;ÂÜíÊ≥°ÊéíÂ∫è 123456789101112131415161718192021222324252627package mainimport ( "fmt")func InsertionSort(a []int) &#123; length := len(a) var j int for i := 2; i &lt; length; i++ &#123; //Á¨¨‰∫å‰∏™Êï∞Âà∞ÊúÄÂêé‰∏Ä‰∏™Êï∞ if a[i] &lt; a[i-1] &#123; //Á¨¨i‰∏™Êï∞ÊØîÂâçÈù¢ÁöÑÊï∞Â∞èÔºåÈúÄË¶ÅÊèíÂÖ• a[0] = a[i] //Âì®ÂÖµ for j = i - 1; a[j] &gt; a[0]; j-- &#123; //jÂèñ i-1 Âà∞ 1 a[j+1] = a[j] //Â∞ÜÂ§ß‰∫éÁ¨¨i‰∏™Êï∞ÁöÑÊï∞ÂêéÁßª‰∏Ä‰ΩçÔºåÁïôÂá∫Á©∫‰Ωç &#125; a[j+1] = a[0] //Â∞ÜÁ¨¨i‰∏™Êï∞ÊîæÂÖ•Á©∫‰Ωç &#125; &#125;&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 2&#125; InsertionSort(a) fmt.Println(a)&#125; 9.6 Â∏åÂ∞îÊéíÂ∫è(Shell Sort)# Â∏åÂ∞îÊéíÂ∫èÊòØÊåâÁÖß‰∏çÂêåÊ≠•ÈïøÂØπÂÖÉÁ¥†ËøõË°åÊèíÂÖ•ÊéíÂ∫èÔºåÂΩìÂàöÂºÄÂßãÂÖÉÁ¥†ÂæàÊó†Â∫èÁöÑÊó∂ÂÄôÔºåÊ≠•ÈïøÊúÄÂ§ßÔºåÊâÄ‰ª•ÊèíÂÖ•ÊéíÂ∫èÁöÑÂÖÉÁ¥†‰∏™Êï∞ÂæàÂ∞ëÔºåÈÄüÂ∫¶ÂæàÂø´ÔºõÂΩìÂÖÉÁ¥†Âü∫Êú¨ÊúâÂ∫è‰∫ÜÔºåÊ≠•ÈïøÂæàÂ∞èÔºå ÊèíÂÖ•ÊéíÂ∫èÂØπ‰∫éÊúâÂ∫èÁöÑÂ∫èÂàóÊïàÁéáÂæàÈ´ò„ÄÇÊâÄ‰ª•ÔºåÂ∏åÂ∞îÊéíÂ∫èÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰ºöÊØîo(n^2)Â•Ω‰∏Ä‰∫õ„ÄÇÁî±‰∫éÂ§öÊ¨°ÊèíÂÖ•ÊéíÂ∫èÔºåÊàë‰ª¨Áü•ÈÅì‰∏ÄÊ¨°ÊèíÂÖ•ÊéíÂ∫èÊòØÁ®≥ÂÆöÁöÑÔºå‰∏ç‰ºöÊîπÂèòÁõ∏ÂêåÂÖÉ Á¥†ÁöÑÁõ∏ÂØπÈ°∫Â∫èÔºå‰ΩÜÂú®‰∏çÂêåÁöÑÊèíÂÖ•ÊéíÂ∫èËøáÁ®ã‰∏≠ÔºåÁõ∏ÂêåÁöÑÂÖÉÁ¥†ÂèØËÉΩÂú®ÂêÑËá™ÁöÑÊèíÂÖ•ÊéíÂ∫è‰∏≠ÁßªÂä®ÔºåÊúÄÂêéÂÖ∂Á®≥ÂÆöÊÄßÂ∞±‰ºöË¢´Êâì‰π±ÔºåÊâÄ‰ª•shellÊéíÂ∫èÊòØ‰∏çÁ®≥ÂÆöÁöÑ„ÄÇ 12345678910111213141516171819202122232425262728293031package mainimport ( "fmt")func ShellSort(a []int) &#123; var i, j int length := len(a) - 1 //ÂéªÊéâÁ¨¨0‰Ωç inc := length //Â¢ûÈáè for inc &gt; 1 &#123; inc = inc/3 + 1 for i = 1 + inc; i &lt;= length; i++ &#123; //Á¨¨(1+inc)‰∏™Êï∞Âà∞ÊúÄÂêé‰∏Ä‰∏™Êï∞ if a[i] &lt; a[i-inc] &#123; a[0] = a[i] for j = i - inc; j &gt; 0 &amp;&amp; a[j] &gt; a[0]; j -= inc &#123; a[j+inc] = a[j] &#125; a[j+inc] = a[0] &#125; &#125; &#125;&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 2&#125; ShellSort(a) fmt.Println(a)&#125; 9.7 Â†ÜÊéíÂ∫è# Êó∂Èó¥Â§çÊùÇÂ∫¶$O(nlogn)$ 12345678910111213141516171819202122232425262728293031323334353637383940414243package mainimport ( "fmt")func HeapSort(a []int) &#123; length := len(a) - 1 //Âæ™ÁéØÂêéa[1]‰∏∫ÊúÄÂ§ßÂÄº for i := length / 2; i &gt; 0; i-- &#123; //(length/2)ÊòØÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÁöÑÁà∂ËäÇÁÇπÂà∞Ê†πËäÇÁÇπ HeapAdjust(a, i, length) &#125; for i := length; i &gt; 1; i-- &#123; //‰ªéÊúÄÂêéËäÇÁÇπÂà∞Á¨¨‰∫å‰∏™ËäÇÁÇπ a[1], a[i] = a[i], a[1] //ÊéíÂ∫èÁ¨¨i‰Ωç HeapAdjust(a, 1, i-1) //Â∞Ü1Âà∞i-1‰∏≠ÁöÑÊúÄÂ§ßÊï∞ÊîæÂà∞a[1] &#125;&#125;func HeapAdjust(a []int, s, m int) &#123; var temp, j int temp = a[s] for j = 2 * s; j &lt;= m; j *= 2 &#123; //‰ª•s‰∏∫Áà∂ËäÇÁÇπÂºÄÂßã if j &lt; m &amp;&amp; a[j] &lt; a[j+1] &#123; //ÂèñÂá∫ËæÉÂ§ßÁöÑÂ≠©Â≠êËäÇÁÇπ j = j + 1 &#125; if temp &gt;= a[j] &#123; //Áà∂ËäÇÁÇπÂ∑≤ÁªèÊúÄÂ§ß break &#125; a[s] = a[j] //Â∞ÜÊúÄÂ§ßÁöÑÂÄºÊõøÊç¢ÁªôÁà∂ËäÇÁÇπ s = j //Â∞ÜÂΩìÂâçËäÇÁÇπ‰Ωú‰∏∫Áà∂ËäÇÁÇπÔºåËøõË°å‰∏ã‰∏ÄËΩÆÊìç‰Ωú &#125; a[s] = temp&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 2&#125; HeapAdjust(a, 1, 9) fmt.Println(a)&#125; 9.8 ÂΩíÂπ∂ÊéíÂ∫è# ÂΩíÂπ∂ÊéíÂ∫èÊòØÊääÂ∫èÂàóÈÄíÂΩíÂú∞ÂàÜÊàêÁü≠Â∫èÂàóÔºåÈÄíÂΩíÂá∫Âè£ÊòØÁü≠Â∫èÂàóÂè™Êúâ1‰∏™ÂÖÉÁ¥†(ËÆ§‰∏∫Áõ¥Êé•ÊúâÂ∫è)ÊàñËÄÖ2‰∏™Â∫èÂàó(1Ê¨°ÊØîËæÉÂíå‰∫§Êç¢),ÁÑ∂ÂêéÊääÂêÑ‰∏™ÊúâÂ∫èÁöÑÊÆµÂ∫èÂàóÂêàÂπ∂Êàê‰∏Ä‰∏™Êúâ Â∫èÁöÑÈïøÂ∫èÂàóÔºå‰∏çÊñ≠ÂêàÂπ∂Áõ¥Âà∞ÂéüÂ∫èÂàóÂÖ®ÈÉ®ÊéíÂ•ΩÂ∫è„ÄÇÂèØ‰ª•ÂèëÁé∞ÔºåÂú®1‰∏™Êàñ2‰∏™ÂÖÉÁ¥†Êó∂Ôºå1‰∏™ÂÖÉÁ¥†‰∏ç‰ºö‰∫§Êç¢Ôºå2‰∏™ÂÖÉÁ¥†Â¶ÇÊûúÂ§ßÂ∞èÁõ∏Á≠â‰πüÊ≤°Êúâ‰∫∫ÊïÖÊÑè‰∫§Êç¢ÔºåËøô‰∏ç‰ºöÁ†¥ÂùèÁ®≥ÂÆö ÊÄß„ÄÇÈÇ£‰πàÔºåÂú®Áü≠ÁöÑÊúâÂ∫èÂ∫èÂàóÂêàÂπ∂ÁöÑËøáÁ®ã‰∏≠ÔºåÁ®≥ÂÆöÊòØÂê¶ÂèóÂà∞Á†¥ÂùèÔºüÊ≤°ÊúâÔºåÂêàÂπ∂ËøáÁ®ã‰∏≠Êàë‰ª¨ÂèØ‰ª•‰øùËØÅÂ¶ÇÊûú‰∏§‰∏™ÂΩìÂâçÂÖÉÁ¥†Áõ∏Á≠âÊó∂ÔºåÊàë‰ª¨ÊääÂ§ÑÂú®ÂâçÈù¢ÁöÑÂ∫èÂàóÁöÑÂÖÉÁ¥†‰øùÂ≠òÂú®Áªì ÊûúÂ∫èÂàóÁöÑÂâçÈù¢ÔºåËøôÊ†∑Â∞±‰øùËØÅ‰∫ÜÁ®≥ÂÆöÊÄß„ÄÇÊâÄ‰ª•ÔºåÂΩíÂπ∂ÊéíÂ∫è‰πüÊòØÁ®≥ÂÆöÁöÑÊéíÂ∫èÁÆóÊ≥ï„ÄÇ ÈÄíÂΩíÊñπÊ≥ï Merge()ÂΩíÂπ∂ÊéíÂ∫èÁ§∫ÊÑèÂõæÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869package mainimport ( "fmt")// Â∞ÜaÊéíÂ∫èÂà∞bfunc MergeSort(a []int) []int &#123; length := len(a) b := make([]int, length) MSort(a, b, 1, length-1) return b&#125;func MSort(a, b []int, s, t int) &#123; if s == t &#123; b[s] = a[s] //Â∞ÜaÂ§çÂà∂Âà∞Âà∞b &#125; else &#123; m := (s + t) / 2 MSort(a, b, s, m) MSort(a, b, m+1, t) Merge(b, s, m, t) //Â∞ÜbÂΩíÂπ∂ÊéíÂ∫è &#125;&#125;func Merge(SR []int, i, m, n int) &#123; TR := make([]int, len(SR)) //ÂΩíÂπ∂ÁöÑÂ∫èÂàóÊöÇÂ≠òÂà∞TR s := i //‰øùÂ≠òËµ∑Âßã‰ΩçÁΩÆ j := m + 1 k := i //TRÂ∫èÂè∑ for i &lt;= m &amp;&amp; j &lt;= n &#123; if SR[i] &lt; SR[j] &#123; TR[k] = SR[i] i++ &#125; else &#123; TR[k] = SR[j] j++ &#125; k++ &#125; if i &lt;= m &#123; for l := 0; l &lt;= m-i; l++ &#123; TR[k+l] = SR[i+l] &#125; &#125; if j &lt;= n &#123; for l := 0; l &lt;= n-j; l++ &#123; TR[k+l] = SR[j+l] &#125; &#125; for p := s; p &lt;= n; p++ &#123; //Â∞ÜÊéíÂ•ΩÂ∫èÁöÑTRÂÜôÂõûÂà∞SR if SR[p] != TR[p] &#123; SR[p] = TR[p] &#125; &#125;&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 5, 16&#125; fmt.Println(MergeSort(a))&#125; ÈùûÈÄíÂΩíÊñπÊ≥ï 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package mainimport ( "fmt")func MergeSort2(a []int) &#123; length := len(a) - 1 for k := 1; k &lt; length; &#123; MergePass(a, k, length) k = k * 2 &#125;&#125;func MergePass(a []int, s, n int) &#123; i := 1 for i &lt;= n-2*s+1 &#123; Merge2(a, i, i+s-1, i+2*s-1) //i+2*s-1&lt;=n i = i + 2*s &#125; if i &lt; n-s+1 &#123; //n&gt;i+s-1,ÂΩíÂπ∂ÊúÄÂêé‰∏§‰∏™Â≠êÂùó Merge2(a, i, i+s-1, n) &#125;&#125;func Merge2(SR []int, i, m, n int) &#123; TR := make([]int, n-i+1) //‰∏éMergeÁõ∏ÊØîÊ†àÁ©∫Èó¥Êõ¥Â∞è s := i //‰øùÂ≠òËµ∑Âßã‰ΩçÁΩÆ j := m + 1 k := 0 //TRÂ∫èÂè∑ for i &lt;= m &amp;&amp; j &lt;= n &#123; if SR[i] &lt; SR[j] &#123; TR[k] = SR[i] i++ &#125; else &#123; TR[k] = SR[j] j++ &#125; k++ &#125; if i &lt;= m &#123; for l := 0; l &lt;= m-i; l++ &#123; TR[k+l] = SR[i+l] &#125; &#125; if j &lt;= n &#123; for l := 0; l &lt;= n-j; l++ &#123; TR[k+l] = SR[j+l] &#125; &#125; for p := s; p &lt;= n; p++ &#123; //Â∞ÜÊéíÂ•ΩÂ∫èÁöÑTRÂÜôÂõûÂà∞SR if SR[p] != TR[p-s] &#123; SR[p] = TR[p-s] &#125; &#125;&#125;func main() &#123; a := []int&#123;0, 9, 1, 5, 8, 3, 7, 4, 6, 5, 16, 3, 41, 7, 55, 21&#125; MergeSort2(a) fmt.Println(a)&#125; 9.9 Âø´ÈÄüÊéíÂ∫è# 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061package mainimport ( "fmt")func QuickSort(a []int) &#123; Qsort(a, 1, len(a)-1)&#125;func Qsort(a []int, low, high int) &#123; if low &lt; high &#123; pivot := Partition(a, low, high) Qsort(a, low, pivot-1) Qsort(a, pivot+1, high) &#125;&#125;func Partition(a []int, low, high int) int &#123; pivotValue := a[low] for low &lt; high &#123; for pivotValue &lt;= a[high] &#123; //ÊâæÂá∫a[high]&lt;pivotValue high-- &#125; a[low], a[high] = a[high], a[low] //Â∞Üa[hign]ÊîæÂà∞pivoValueÂ∑¶Ëæπ for low &lt; high &amp;&amp; pivotValue &gt;= a[low] &#123; //ÊâæÂá∫a[low]&gt;pivotValue low++ &#125; a[low], a[high] = a[high], a[low] //Â∞Üa[low]ÊîæÂà∞pivoValueÂè≥Ëæπ &#125; return low&#125;func Partition2(a []int, low, high int) int &#123; pivotValue := a[low] for low &lt; high &#123; for pivotValue &lt;= a[high] &#123; //ÊâæÂá∫a[high]&lt;pivotValue high-- &#125; a[low] = a[high] //Â∞Üa[hign]ÊîæÂà∞ËæÉ‰ΩéÁöÑ‰ΩçÁΩÆ for low &lt; high &amp;&amp; pivotValue &gt;= a[low] &#123; //ÊâæÂá∫a[low]&gt;pivotValue low++ &#125; a[high] = a[low] //Â∞Üa[low]ÊîæÂà∞ËæÉÈ´òÁöÑ‰ΩçÁΩÆ &#125; a[low] = pivotValue return low&#125;func main() &#123; a := []int&#123;0, 50, 10, 90, 30, 70, 40, 80, 60, 20&#125; QuickSort(a) fmt.Println(a)&#125;]]></content>
      <tags>
        <tag>Golang</tag>
        <tag>ÈïøÊñá</tag>
        <tag>Êï∞ÊçÆÁªìÊûÑ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GoÂÜÖÂ≠òÊ®°Âûã]]></title>
    <url>%2F2018%2F11%2F14%2F2018-11-14%2F</url>
    <content type="text"><![CDATA[1. ‰ªÄ‰πàÊòØ GoÂÜÖÂ≠òÊ®°ÂûãÔºü 2. Happens Before 3. Synchronization 3.1 Initialization 3.2 Goroutine creation 3.3 Goroutine destruction 3.4 Channel communication 3.5 Locks 3.6 Once 4. Incorrect synchronization Êú¨Êñá‰∏ªË¶ÅÁøªËØëËá™ÂÆòÊñπÊñáÊ°£ The Go Memory Model 1. ‰ªÄ‰πàÊòØ GoÂÜÖÂ≠òÊ®°ÂûãÔºü# Êàë‰ª¨Áü•ÈÅì‰∏çÂêåÁöÑ goroutine ÂèØ‰ª•ÂØπÂêå‰∏Ä‰∏™ÂèòÈáèËøõË°åËØªÂÜôÊìç‰Ωú„ÄÇGoÂÜÖÂ≠òÊ®°ÂûãÊåáÂÆö‰∫ÜÂú®‰ªÄ‰πàÊ†∑ÁöÑÊù°‰ª∂‰∏ãÂèØ‰ª•‰øùËØÅ‰∏Ä‰∏™ goroutine ÂÜôÂÖ•Âà∞ÂèòÈáèÁöÑÂÄºÂèØ‰ª•Ë¢´Âè¶Â§ñ‰∏Ä‰∏™ goroutine Ê≠£Á°ÆÁöÑËØªÂèñ„ÄÇ 2. Happens Before# Âú®Âçï‰∏™ goroutine ‰∏≠ÔºåËØª„ÄÅÂÜôÊìç‰ΩúÊåâÁÖßÁ®ãÂ∫èËÆæËÆ°ÁöÑÈ°∫Â∫èËøõË°å„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂú®‰∏çÊîπÂèò goroutine Á®ãÂ∫èË°å‰∏∫ÁöÑÂâçÊèê‰∏ãÔºåËøô‰∫õËØª„ÄÅÂÜôÈ°∫Â∫èÂú®ÁºñËØëÁöÑËøáÁ®ã‰∏≠ÂèØËÉΩ‰ºöË¢´ÈáçÊéí„ÄÇÂõ†Ê≠§ÂØºËá¥ÂØπÁõ∏ÂêåÂèòÈáèÁöÑËØª„ÄÅÂÜôÊìç‰ΩúÂú®‰∏çÂêåÁöÑ goroutine ÁúãÊù•ÊâßË°åÈ°∫Â∫èÂèØËÉΩ‰∏çÂêå„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûúÂú®Êüê‰∏™ goroutine ‰∏≠ÊâßË°å a = 1; b = 2;ÔºåÂè¶‰∏Ä‰∏™ goroutine ÂèØËÉΩËßÇÂØüÂà∞ÂèòÈáè b ÊØî a ÂÖàË¢´ËµãÂÄº„ÄÇ Happens Before ÊòØÈíàÂØπGoËØ≠Ë®ÄÁºñÁ®ã‰∏≠ÂÜÖÂ≠òÊìç‰ΩúÁöÑ‰∏ÄÁßçÂ±ÄÈÉ®ÊéíÂ∫è„ÄÇ Â¶ÇÊûú $e_{1}$ happens before $e_{2}$ÔºåÈÇ£‰πà‰πüÂèØ‰ª•ËØ¥ $e_{2}$ happens after $e_{1}$„ÄÇËøõ‰∏ÄÊ≠•ÔºåÂ¶ÇÊûú $e_{1}$ Êó¢‰∏ç happens before $e_{2}$Ôºå‰πü‰∏ç happens after $e_{2}$ÔºåÈÇ£‰πàÊàë‰ª¨Áß∞ $e_{1}$ Âíå $e_{2}$ happen concurrently (Âπ∂Âèë)„ÄÇ Âú®Âçï‰∏™ goroutine ‰∏≠ÔºåHappens BeforeÈ°∫Â∫èÂ∞±ÊòØÁ®ãÂ∫èËÆæËÆ°ÁöÑÈ°∫Â∫è $v$ÔºöÊüê‰∏™ÂèòÈáè $w$: ÂØπ$v$ÁöÑÂÜô $w'$: ÂØπ$v$ÁöÑÂÜôÔºå‰∏çÂêå‰∫é$w$ $r$: ÂØπ$v$ÁöÑËØª $w$ÂèØ‰ª•Ë¢´$r$Ëé∑ÂèñÁöÑÊù°‰ª∂Ôºö $r$ ‰∏ç happen before $w$. (ÂåÖÊã¨ happen after Âíå happen concurrently) ‰∏çÂ≠òÂú®Âè¶‰∏Ä‰∏™ $w'$ happens after $w$ but before $r$. $w$‰øùËØÅËÉΩË¢´$r$Ëé∑ÂèñÁöÑÊù°‰ª∂(ËØ•Êù°‰ª∂‰∏çÂÖÅËÆ∏$w'$‰∏é$w$ÊàñËÄÖ$r$Âπ∂ÂèëÔºåÂõ†Ê≠§ÊØî‰∏äÈù¢ÁöÑÊù°‰ª∂Êõ¥Âº∫): $w$ happens before $r$. ‰ªª‰ΩïÂÖ∂ÂÆÉÁöÑ $w'$ Ë¶Å‰πà happens before $w$ÔºåË¶Å‰πà happens after $r$. ÂΩìÊúâÂ§ö‰∏™ goroutine ÂèØ‰ª•ËÆøÈóÆ$v$Êó∂ÔºåÂøÖÈ°ªÂà©Áî®ÂêåÊ≠•‰∫ã‰ª∂(synchronization events)Êù•Âª∫Á´ã happens before ‰ª•‰øùËØÅ $r$ËÉΩÂ§üËé∑ÂèñÊÉ≥Ë¶ÅÁöÑ$w$„ÄÇ Âú®ÂàùÂßãÂåñËøáÁ®ã‰∏≠ÔºåËµãÁªô$v$‰ª•ÂÖ∂Á±ªÂûãÁöÑÈõ∂ÂÄºÁöÑÊìç‰ΩúÂèØ‰ª•Áúã‰ΩúÊòØÂÜÖÂ≠òÊ®°Âûã‰∏≠ÁöÑ‰∏ÄÁßç$w$ 3. Synchronization# 3.1 Initialization# Á®ãÂ∫èÁöÑÂàùÂßãÂåñÂú®‰∏Ä‰∏™ goroutine ‰∏≠ËøõË°åÔºåÂπ∂‰∏îÂú®ËØ• goroutine ‰∏≠ËøòÂèØ‰ª•ÂàõÂª∫ÂÖ∂ÂÆÉÁöÑ goroutine Â¶ÇÊûúÂåÖ $p$ÂØºÂÖ•‰∫ÜÂåÖ$q$ÔºåÈÇ£‰πàÂåÖ$q$Âú®Ë¢´ÂØºÂÖ•‰πãÂâçÂ∞±ÂÆåÊàê‰∫ÜÂàùÂßãÂåñÔºåÂáΩÊï∞main.mainÂú®ÊâÄÊúâÁöÑinitÂáΩÊï∞ÂÆåÊàêÂêéÂºÄÂßãÊâßË°åÔºåËßÅastaxieÁöÑmainÂáΩÊï∞ÂíåinitÂáΩÊï∞‰∏ÄÊñá 3.2 Goroutine creation# ÂêØÂä®‰∏Ä‰∏™Êñ∞ÁöÑ goroutine ÁöÑ GoÂ£∞ÊòéÂèëÁîüÂú®ËØ• goroutineÂºÄÂßãÊâßË°å‰πãÂâç 12345678910111213141516package mainvar a stringfunc f() &#123; print(a)&#125;func hello() &#123; a = "hello, world" go f()&#125;func main() &#123; hello()&#125; Ë∞ÉÁî®hello()Â∞Ü‰ºöÂú®Êú™Êù•Êüê‰∏™Êó∂Èó¥ÁÇπ( ÂèØËÉΩÂú®hello()ËøîÂõû‰πãÂêé )ÊâìÂç∞hello, world 3.3 Goroutine destruction# Êó†Ê≥ï‰øùËØÅ goroutine Âú®ÂÖ∂ÂàõÂª∫Á®ãÂ∫è‰∏≠ÁöÑÊüê‰∏™‰ΩçÁΩÆÈÄÄÂá∫ 123456var a stringfunc hello() &#123; go func() &#123; a = "hello" &#125;() print(a)&#125; ÂØπ a ÁöÑÂÜô(ËµãÂÄº)Ê≤°ÊúâËøõË°å‰ªª‰ΩïÂêåÊ≠•Êìç‰ΩúÔºåÊó†Ê≥ïË¢´ÂÖ∂ÂÆÉ goroutine Ëé∑ÂèñÔºåÂú®ÊøÄËøõÁöÑÁºñËØëÂô®‰∏≠ÁîöËá≥ÂèØËÉΩ‰ºöÂà†Èô§Êï¥‰∏™ go Â£∞Êòé„ÄÇ 3.4 Channel communication# ÈÄöÈÅìÈÄö‰ø°(channel communication)ÊòØÂêåÊ≠•‰∏§‰∏™ goroutine ÁöÑ‰∏ªË¶ÅÊñπÊ≥ï„ÄÇ send ÂèëÁîüÂú®ÂÆåÊàêÁõ∏Â∫îÁöÑ receive ‰πãÂâç Á®ãÂ∫èÔºö 12345678910111213141516var c = make(chan int, 10)var a stringfunc f() &#123; a = "hello, world" c &lt;- 0 // send&#125;func main() &#123; go f() &lt;-c // receive print(a)&#125;&gt; Output:command-line-argumentshello, world ‰ºö‰øùËØÅÊâìÂç∞ hello, worldÔºåÂõ†‰∏∫Ôºö ÂØπ a ÁöÑÂÜô happens before ÈÄöÈÅì c ÁöÑ send ÈÄöÈÅì c ÁöÑ send happens before ÈÄöÈÅì c ÁöÑ receive ÈÄöÈÅì c ÁöÑ receive happens before print(a)ÔºåÂõ†Ê≠§ , ÂØπ a ÁöÑÂÜô happens before print(a), Âç≥‰øùËØÅ main() Ëé∑Âèñ‰∫Ü goroutine ÂØπ aÁöÑÂÜô channel ÁöÑÂÖ≥Èó≠ÂèëÁîüÂú®ÂÆåÊàê receive(Ê≠§Êó∂ÂæóÂà∞ÁöÑÊòØÈÄöÈÅìÁ±ªÂûãÁöÑÈõ∂ÂÄº)‰πãÂâç 123456789101112131415161718package mainvar c = make(chan int, 10)var a stringfunc f() &#123; a = "hello, world" close(c) // ÂÖ≥Èó≠&#125;func main() &#123; go f() print(a, "\n", &lt;-c) // receive&#125;&gt;Output:command-line-argumentshello, world0 Êó†ÁºìÂ≠òÈÄöÈÅìÁöÑ receive ÂèëÁîüÂú®ÂÆåÊàê send ‰πãÂâç Ë∞ÉÊç¢ c &lt;- 0 // send Âíå &lt;-c // receiveÁöÑ‰ΩçÁΩÆÔºåÂæóÂà∞Á®ãÂ∫è 123456789101112131415var c = make(chan int)var a stringfunc f() &#123; a = "hello, world" &lt;-c //receive&#125;func main() &#123; go f() c &lt;- 0 // send print(a)&#125;&gt; Output:command-line-argumentshello, world ‰ªçÁÑ∂‰øùËØÅÊâìÂç∞ hello, world ‰ΩÜÂ¶ÇÊûúchannelÂÖ∑ÊúâÁºìÂ≠òÔºå‰æãÂ¶ÇÂΩìc = make(chan int, 1)ÔºåÈÇ£‰πàÁ®ãÂ∫èÊó†Ê≥ï‰øùËØÅÊâìÂç∞ hello, world ÂΩìÈÄöÈÅìÁöÑÂÆπÈáè‰∏∫$c$Êó∂ÔºåÁ¨¨ $k$ Ê¨° receive ÂèëÁîüÂú®ÂÆåÊàêÁ¨¨ $k+c$ Ê¨° send ‰πãÂâç ‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÁªô work ÁöÑÊØè‰∏™Êù°ÁõÆ(ÂáΩÊï∞Á±ªÂûã)ÂêØÂä®‰∏Ä‰∏™ goroutineÔºåÁî±‰∫éÈÄöÈÅìlimitÁöÑÂÆπÈáè‰∏∫3ÔºåÂõ†Ê≠§ÊúÄÂ§öÂÖÅËÆ∏3‰∏™ goroutine Ë∞ÉÁî®Ë∞ÉÁî®‰∫ÜÂáΩÊï∞w() 1234567891011var limit = make(chan int, 3)func main() &#123; for _, w := range work &#123; go func(w func()) &#123; limit &lt;- 1 w() &lt;-limit &#125;(w) &#125;&#125; 3.5 Locks# sync ÂåÖÂÆûÁé∞‰∫Ü‰∏§Áßç lock Êï∞ÊçÆÁ±ªÂûã, sync.MutexÂíå sync.RWMutex. ÂØπ‰ªªÊÑèÁöÑ sync.Mutex ÊàñËÄÖ sync.RWMutexÂèòÈáè l‰∏î$n&lt;m$ÔºåÁ¨¨$n$Ê¨°Ë∞ÉÁî® l.Unlock() ÂèëÁîüÂú® Á¨¨ $m$Ê¨°Ë∞ÉÁî® l.Lock()ËøîÂõû‰πãÂâç Á®ãÂ∫è 1234567891011121314151617181920212223package mainimport ( "sync")var l sync.Mutexvar a stringfunc f() &#123; a = "hello, world" l.Unlock() //Á¨¨‰∏ÄÊ¨° l.Unlock()&#125;func main() &#123; l.Lock() go f() l.Lock() //Á¨¨‰∫åÊ¨° l.Lock() print(a)&#125;&gt; Output:command-line-argumentshello, world ‰øùËØÅÊâìÂç∞hello, worldÔºåÂõ†‰∏∫Ôºå Á¨¨‰∏ÄÊ¨° l.Unlock() happens before Á¨¨‰∫åÊ¨° l.Lock() ËøîÂõû Á¨¨‰∫åÊ¨° l.Lock() ËøîÂõû happens before print(a) ÂØπ‰∫é‰ªªÊÑèÁöÑl.RLockÔºåÂ≠òÂú®$k$Êª°Ë∂≥Ôºö Á¨¨ $k$ Ê¨°Ë∞ÉÁî® l.Unlock happens before l.RLockÔºõ ‰∏él.RLockÂØπÂ∫îÁöÑl.RUnlock happens before Á¨¨ $k+1$Ê¨°Ë∞ÉÁî® l.Lock 3.6 Once# ÂØπÊüê‰∏™ÂáΩÊï∞f()ÔºåÂèØ‰ª•ÊúâÂ§ö‰∏™Á∫øÁ®ãÈÄöËøáonce.Do(f)Êù•ÂØπÂÖ∂Ë∞ÉÁî®Ôºå‰ΩÜ‰ªÖÊúâÁ∫øÁ®ãËÉΩÂ§üË∞ÉÁî®ÊâßË°åÂáΩÊï∞f()ÔºåÂÖ∂ÂÆÉÁöÑË∞ÉÁî®‰ºöË¢´ÈòªÂ°ûÁü•ÈÅìf()ËøîÂõû„ÄÇ Á®ãÂ∫è 123456789101112131415161718192021222324252627282930313233package mainimport ( "sync" "time")var a stringvar once sync.Oncefunc setup() &#123; a = "hello, world"&#125;func SETUP() &#123; a = "HELLO, WORLD"&#125;func doprint() &#123; once.Do(setup) //Ê≥®ÊÑè‰∏çË¶ÅÊã¨Âè∑ once.Do(SETUP) print(a, "\n")&#125;func main() &#123; go doprint() go doprint() time.Sleep(time.Second)&#125;&gt; Output:command-line-argumentshello, worldhello, world ‰ºöÊâìÂç∞‰∏§Ê¨° hello, worldÔºå‰ΩÜÊòØ‰ªÖÂú®Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî® doprint Êó∂ÊâßË°å‰∫Ü setup 4. Incorrect synchronization# Á®ãÂ∫è 12345678910111213141516171819202122232425package mainvar a, b intfunc f() &#123; a = 1 b = 2&#125;func g() &#123; print(b, "\n") print(a)&#125;func main() &#123; go f() g()&#125;&gt; Output: //Â§ßÂ§öÊï∞ËæìÂá∫ÁªìÊûú00&gt; Output: //Â∞ëÊï∞ËæìÂá∫ÁªìÊûú01 ‰πüÂèØËÉΩÂÖàÊâìÂç∞2ÔºåÁÑ∂ÂêéÊâìÂç∞0 Á®ãÂ∫è 1234567891011121314151617181920212223242526272829303132package mainvar a stringvar done boolfunc setup() &#123; a = "hello, world \n" done = true&#125;func doprint() &#123; if !done &#123; setup() &#125; print(a)&#125;func twoprint() &#123; go doprint() go doprint()&#125;func main() &#123; twoprint()&#125;//Êúâ3ÁßçËæìÂá∫ÁöÑÂèØËÉΩ&gt; Output:hello, world hello, world &gt; Output:hello, world &gt; Output: ‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÔºåÁî±‰∫é‰∏çËÉΩ‰øùËØÅmain()ÂÖàËé∑ÂèñÂØπdoneÁöÑÂÜôÔºåÂõ†Ê≠§print()ÂèØËÉΩÊâìÂç∞Á©∫Â≠óÁ¨¶‰∏≤„ÄÇÁîöËá≥main()ÂÆåÂÖ®Ê≤°ÊúâËé∑ÂèñÂØπdoneÁöÑÂÜôÔºåÊ≠§Êó∂main()ËøõÂÖ•Ê≠ªÂæ™ÁéØ 12345678910111213141516171819202122232425package mainvar a stringvar done boolfunc setup() &#123; a = "hello, world" done = true&#125;func main() &#123; go setup() for !done &#123; &#125; print(a)&#125;&gt; Output:hello, world&gt; Elapsed: 3.703s //Á≠âÂæÖ‰∫ÜËæÉÈïøÁöÑÊó∂Èó¥&gt; Result: Success&gt; Output:hello, world&gt; Elapsed: 0.704s &gt; Result: Success Á±ª‰ººÁöÑÁ®ãÂ∫èÂ¶Ç‰∏ã 1234567891011121314151617181920package maintype T struct &#123; msg string&#125;var g *Tfunc setup() &#123; t := new(T) t.msg = "hello, world" g = t&#125;func main() &#123; go setup() for g == nil &#123; &#125; print(g.msg)&#125;]]></content>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êê≠Âª∫IPFS ÁßÅÊúâÁΩëÁªú]]></title>
    <url>%2F2018%2F11%2F05%2F2018-11-5%2F</url>
    <content type="text"><![CDATA[Âú®servers‰∏äÂÆâË£Ö Go ÁéØÂ¢É ÁîüÊàê ifps ËäÇÁÇπ ÂàõÂª∫ÂÖ±‰∫´ÂØÜÈí• Ê∑ªÂä†ÂêØÂä®ËäÇÁÇπ ÂêØÂä®ÁßÅÊúâÁΩëÁªú Êú¨‰æã‰∏∫Âª∫Á´ãÂåÖÂê´‰∏â‰∏™ËäÇÁÇπÁöÑIPFSÁßÅÊúâÁΩëÁªúÔºåËäÇÁÇπÂàÜÂà´‰∏∫Ôºö server a: root@45.32.28.71 server b: root@207.148.109.110 Êú¨Âú∞ mac Âú®servers‰∏äÂÆâË£Ö Go ÁéØÂ¢É# 1234567891011cd ~ $wget https://dl.google.com/go/go1.11.2.linux-amd64.tar.gz$tar -C /usr/local -xzf go1.11.2.linux-amd64.tar.gz //Ëß£ÂéãÂà∞ÂæóÂà∞ÁöÑ go ÁõÆÂΩïÔºåÊîæÂà∞ /usr/local ÁõÆÂΩï‰∏ã$vim .bashrcexport GOPATH=~/hejtao/go_projectsexport GOROOT=/usr/local/goexport GOBIN=$GOROOT/binexport PATH=$PATH:$GOBIN$source .bashrc$go version go version go1.11.2 linux/amd64 //ÂÆâË£ÖÊàêÂäü mac ‰∏äÁöÑÂÆâË£ÖÁ±ª‰ºº„ÄÇ ÁîüÊàê ifps ËäÇÁÇπ# Âú®‰∏âÂè∞Êú∫Âô®‰∏äÊâßË°å 12345678910111213141516171819202122232425262728$go get -u -d github.com/ipfs/go-ipfs $cd $GOPATH/src/github.com/ipfs/go-ipfs$make installCommand &apos;make&apos; not found, but can be installed with:sudo apt install makesudo apt install make-guile$apt update \\ ÈúÄË¶ÅÂÆâË£Ö make Ôºå ÂÖàÊ£ÄÊü•ÂÆâË£ÖÂåÖ...$apt upgrade \\ Êõ¥Êñ∞ÂÆâË£ÖÂåÖ...$apt install make \\ ÂÆâË£Ö make...$make install/usr/local/go/pkg/tool/linux_amd64/link: running gcc failed: exec: &quot;gcc&quot;: executable file not found in $PATHcmd/ipfs/Rules.mk:37: recipe for target &apos;cmd/ipfs-install&apos; failedmake: *** [cmd/ipfs-install] Error 2$apt install gcc...$gcc -v...gcc version 7.3.0 (Ubuntu 7.3.0-27ubuntu1~18.04)$make install...$ipfs init... ËÆ∞‰∏ãÊØè‰∏™ËäÇÁÇπÁöÑIDÔºåÊØîÂ¶ÇÊú¨‰æã server a ÁöÑID: QmQ9RjTGVDjhZ2kRVx9tjL4CciiKdNrQzknSyUnCMmB3m2 server b ÁöÑID: QmRyxoe9JpkDZuMK4G7PkXUy7nGv8VdM98d6Vr2wxFSa3V mac ÁöÑID: QmWKKVUy9XqWEGhrikJW8ugHuFzKJJGP5DCGFyvzUJFjzL ÂàõÂª∫ÂÖ±‰∫´ÂØÜÈí•# ÂÖàÂú®‰ªªÊÑè‰∏ÄÂè∞Êú∫Âô®‰∏äÂàõÂª∫ÂØÜÈí•ÔºåÁÑ∂ÂêéÊã∑Ë¥ùÂà∞Ââ©‰ΩôËäÇÁÇπ„ÄÇÊú¨‰æãÂú®mac‰∏äÂàõÂª∫ 12$go get -u github.com/Kubuxu/go-ipfs-swarm-key-gen/ipfs-swarm-key-gen$ipfs-swarm-key-gen &gt; ~/.ipfs/swarm.key ÊâãÂä®Êã∑Ë¥ù 1$vim ~/.ipfs/swarm.key \\ ÊâìÂºÄswarm.key, Êã∑Ë¥ùÂÜÖÂÆπ Âú®servers‰∏äÊñ∞Âª∫swarm.key 1$vim ~/.ipfs/swarm.key \\ Â∞ÜÊã∑Ë¥ùÁöÑÂÜÖÂÆπÁ≤òË¥¥ ‰ΩøÁî® scp ÂëΩ‰ª§ 12$scp ~/.ipfs/swarm.key root@45.32.28.71:~/.ipfs/$scp ~/.ipfs/swarm.key root@207.148.109.110:~/.ipfs/ Ê∑ªÂä†ÂêØÂä®ËäÇÁÇπ# pfs initÂêéÁöÑÈªòËÆ§ÂêØÂä®ËäÇÁÇπÊòØËøûÊé•ipfsÂÖ¨ÁΩëÁöÑËäÇÁÇπ„ÄÇÂª∫Á´ãÁßÅÊúâÁΩëÁªúÈúÄË¶ÅÂú®ÊØè‰∏Ä‰∏™ËäÇÁÇπ‰∏äÂà†ÊéâÈªòËÆ§ÂêØÂä®ËäÇÁÇπ 1$ipfs bootstrap rm --all Â∞ÜÁΩëÁªú‰∏≠‰ªªÊÑèÂÖ∂‰ªñËäÇÁÇπ‰Ωú‰∏∫ÂêØÂä®ËäÇÁÇπ„ÄÇ‰æãÂ¶ÇÂ∞Ü server a ‰Ωú‰∏∫macÁöÑÂêØÂä®ËäÇÁÇπ 1$ipfs bootstrap add/ip4/45.32.28.71/tcp/4001/ipfs/QmQ9RjTGVDjhZ2kRVx9tjL4CciiKdNrQzknSyUnCMmB3m2 ÂêØÂä®ÁßÅÊúâÁΩëÁªú# Áªô‰∏â‰∏™ËäÇÁÇπÊ∑ªÂä†‰∫ÜÂêØÂä®ËäÇÁÇπÂêéÔºåÂêØÂä®ÊâÄÊúâËäÇÁÇπÔºå‰æøÂª∫Á´ãËµ∑‰∫ÜÂê´Êúâ‰∏â‰∏™ËäÇÁÇπÁöÑIPFSÁßÅÊúâÁΩëÁªú„ÄÇÂàÜÂà´ÊâßË°å 1$ipfs daemon ÂèØ‰ª•‰ΩøÁî® bootstrap list```Êü•ÁúãËäÇÁÇπÊâÄÂåÖÂê´ÁöÑÂêØÂä®ËäÇÁÇπÔºå‰ΩøÁî®```ipfs swarm peers```Êü•ÁúãËäÇÁÇπËøûÊé•‰∫ÜÂì™‰∫õÂÖ∂‰ªñËäÇÁÇπ„ÄÇ‰ΩøÁî®```ipfs add file```‰∏ä‰º†Êñá‰ª∂Âà∞ËäÇÁÇπÔºåÊØîÂ¶ÇÁªômacËäÇÁÇπ‰∏ä‰º†pdfÊñá‰ª∂ÔºåÂπ∂ÂæóÂà∞ËØ•Êñá‰ª∂ÁöÑID12```$ipfs add ~/files/GOËØ≠Ë®ÄÁºñÁ®ã.pdf ËØ•Êñá‰ª∂ÁöÑIDÔºöQmRDqZoSMCLMP2GH66MKKnduqgTqKBfqNeysPugp9xadUi„ÄÇÁé∞Âú®‰∏émacÂª∫Á´ã‰∫ÜËøûÊé•ÁöÑserverÂ∞±ÂèØ‰ª•‰∏ãËΩΩËØ•Êñá‰ª∂‰∫ÜÔºåÂú®server‰∏äÊâßË°å 1$ipfs get QmRDqZoSMCLMP2GH66MKKnduqgTqKBfqNeysPugp9xadUi \\Âú®ÂΩìÂâçÁõÆÂΩï‰ºöÂ§öÂá∫‰∏Ä‰∏™Êñ∞ÁöÑÊñá‰ª∂‰æøÊòØgetÂà∞ÁöÑÊñá‰ª∂]]></content>
      <tags>
        <tag>IPFS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[A Study for the Reed-Solomon Code]]></title>
    <url>%2F2018%2F10%2F18%2F2018-10-18%2F</url>
    <content type="text"><![CDATA[Introduction Galois Field Galois Field Arithmetic Addition and Subtraction Multiplication and Division RS Code Coding Matrix Method Generator Polynomial Method RS Code in Distributed Storage Systems 5.1 Rotated Reed-Solomon code Local Reconstruction Code (LRC) References Introduction# Reed-Solomon (RS) code is an error-correcting code first proposed by Reed and Solomon in 1960, which is the most frequently applied digital error correction code around the word. The applications include data storage(hard drives, CD/DVD/Blue Ray), data transmission and common commercial activities(bar codes, QR codes) . RS code has the advantage of high capability of correcting random or burst errors since it encodes groups of bits instead of one bit at a time. Redundant datas are generated so that the original data can be reconstructed with part of the stored or received data loss. People often back up important files which can be regarded as kind of data loss protection with redundant data. However, backup is just a copy of the original datas while the redundant data generated in the RS code is a fusion of the all the original data parts, which is more efficient for storage and error correction. In this article, I have run through the procedure of the RS code and hope it is usefull for you to understand what is going on with this erasure code. Its application in the distributed strorage system are briefly introduced at the end. Part of implementations in pure Go are also provided whose source files can be found on the Githup website . Galois Field# The finite field is also called Galois field which has finite elements and the property that arithmetic operations on field elements always have a result in the field. In the sequel, we illustrate two kind of representations of the finite elements and its arithmetic operations. Proposition 1. For any prime $ p $ and any natual number$ r $ there exists a finite field with $ p^{r} $ elements and vice versa. With the proposition 1, the Galois Field is denoted as $ GF(p^{r}) $. In fact, the nature of RS encoding is mapping $ k $ elments of $ GF(2^{r}) $ into another $ n $ elements of $ GF(2^{r}) $ and $k+2\leq n\leq 2^{r} $. This Galois fields can be represented with the help of $ \mathbf{Z}{2}[x] $, the set of polynomials with coefficients in the field of two elements $ \mathbf{Z}{2} $, namely the polynomial representation as $$0,1,x,x+1,x{2},..,x{r-1}+x^{r-2}+...+1 \tag{1}$$ This representation can also be seen as a $r$-bit digit or binary vector. Proposition 2. $ GF(q) $ has cyclic the multiplicative group $ {\alpha, \alpha{2},...,\alpha{q-1}=1}$, where $ \alpha $ is the primitive element. Thus, $ GF(2^{r}) $ has the exponential representation as $$0, 1(=\alpha^{255}), \alpha, \alpha^{2},..., \alpha{2{r}-2} \tag{2}$$ which is a better choice for the '$ \times $' and '$ / $' operation. Even a binary matrix can be used to represente the elements. For example, we can establish a bijection between the vector representation and matrix representation over $ GF(2^{4}) $ as follows where the first column is the vector representation and the columns satisfy $column(i)=2\times column(i-1)$. This matrix representation transforms arithmetic over $ GF(2^{4}) $ into arithmetic over $ GF(2) $ which only has XOR, AND operations. Galois Field Arithmetic# In this section, we discuss arithmetic in $ GF(2^{8}) $, whose element corresponds a byte data. Addition and Subtraction# Addition and subtraction are operated under the polynomial representation (also a byte in $ GF(2^{8}) $) and both are equivalent to XOR operation 1234567func galAdd(a, b byte) byte &#123; return a ^ b&#125;func galSub(a, b byte) byte &#123; return a ^ b&#125; Multiplication and Division# The multiplication is operated with the exponential representation $(2)$, before that we should establish a bijection (injection and surjection) between the two representations. Suppose $$\alpha^{i} -&gt; 2^{i}$$ where $0\leq i \leq 2^{8}-2=254$. According to proposition 2, $\forall j\geq 255,\alpha{j}=\alpha{j-255}$. Proposition 3.$ GF(2^{8}) $ has the irreducible polynomial $ f(x)=x{8}+x{4}+x{3}+x{2}+1 $ which has no factors of smaller polynomials. The irreducible polynomial is necessary to establish the bijection since some $2^{i}$ term are no longer in $GF(2^{8})$. Let $ f(\alpha) =0$, we have $$\alpha{8}=\alpha{4}+\alpha{3}+\alpha{2}+1=2{4}+2{3}+2^{2}+1=00011101$$ or 0x1d . For convenience, we record the bijection with a table, namely called exponent table, whose indexs is the exponents of elements in exponential representation and value is elements in byte representation. 1var expTable = [255]byte&#123;0x1, 0x2, 0x4, 0x8, 0x10, 0x20, 0x40, 0x80, 0x1d, 0x3a, ..., 0x8e&#125; Use logTable[expTable[$i$]]=$i$, the logarithmic table is generated, 12345var logTable = []byte&#123; 0, 0, 1, 25, 2, 50, 26, 198, ... 116, 214, 244, 234, 168, 80, 88, 175,&#125; With these tables, the $\times$ and $/$ functions in $GF(2^8)$ are easily defined, 12345678910111213141516171819202122232425262728293031func galMultiply(a, b byte) byte &#123; if a == 0 || b == 0 &#123; return 0 &#125; logA := int(logTable[a]) logB := int(logTable[b]) sum := logA+logB if sum&gt;254 &#123; sum -= 255 &#125; return expTable[sum]&#125;func galDivide(a, b byte) byte &#123; if a == 0 &#123; return 0 &#125; if b == 0 &#123; panic("Argument 'divisor' is 0") &#125; logA := int(logTable[a]) logB := int(logTable[b]) logResult := logA - logB if logResult &lt; 0 &#123; logResult += 255 &#125; return expTable[logResult]&#125; Based on the result above, the power and inverse functions can be further obtained. In fact, the method to establish the bijection is not unique. The original paper of Reed and Solomon in 1960 provides another method with finite difference equation which has better computability. RS Code# Coding Matrix Method# 1. Orignal approach: For arbitrary $ k $ 8-bit symbols,$ m_{0}$, $m_{1}$, $...$, $m_{k-1} $, we have the message polynomial $$m(x)=m_{0}+m_{1}x+...+m_{k-1}x^{k-1},$$ with this $ m(x) $, $ 2^{8} $ codewords, i.e. $ m(0)$,$m(1)$,$...$, $m(\alpha^{r-2}) $ are obtained and the the encoded messages, which will be transmitted or stored, are $ n $ of the codewords (professionally called stripe). Using linear algebra, the stripe are denoted collectively as follows $$ \begin{bmatrix} m(\alpha_{1})\ m(\alpha_{2})\ ...\ m(\alpha_{n}) \end{bmatrix} = \begin{bmatrix} 1 &amp; \alpha_{1} &amp; ... &amp; \alpha_{1}^{k-1} \ 1 &amp; \alpha_{2} &amp; ...&amp;\alpha_{2}^{k-1} \ ... &amp; ... &amp; ...&amp;... \ 1 &amp; \alpha_{n} &amp; ...&amp;\alpha_{n}^{k-1} \end{bmatrix} \begin{bmatrix} m_{0}\ m_{1}\ ...\ m_{k-1} \end{bmatrix}\tag{3} $$ Note that we only discuss one byte a shard (the messages are splited into multiple shards for encoding) here, in practice one input shard contains thousands of bytes, in this case the output shard contains same size of byte as input shard and the vectors in $(3)$ becomes matrice. Coding procedure : 1.Split the whole message into same size data shards; 2. Build the Vandermonde matrix (coding matrix); 3. Multiplies the coding matrix by data shards to produce code shards. 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859func (r reedSolomon) Split(data []byte) ([][]byte, error) &#123; if len(data) == 0 &#123; return nil, ErrShortData &#125; // Calculate number of bytes per data shard. perShard := (len(data) + r.DataShards - 1) / r.DataShards if cap(data) &gt; len(data) &#123; data = data[:cap(data)] &#125; // Only allocate memory if necessary if len(data) &lt; (r.Shards * perShard) &#123; // Pad data to r.Shards*perShard. padding := make([]byte, (r.Shards*perShard)-len(data)) data = append(data, padding...) &#125; // Split into equal-length shards. dst := make([][]byte, r.Shards) for i := range dst &#123; dst[i] = data[:perShard] data = data[perShard:] &#125; return dst, nil&#125;func vandermonde(rows, cols int) (matrix, error) &#123; result, err := newMatrix(rows, cols) if err != nil &#123; return nil, err &#125; for r, row := range result &#123; for c := range row &#123; result[r][c] = galExp(byte(r), c) &#125; &#125; return result, nil&#125;// Multiplies a subset of rows from a coding matrix by a full set of// input shards to produce some output shards.// 'matrixRows' is The rows from the matrix to use.// 'inputs' An array of byte arrays, each of which is one input shard.// The number of inputs used is determined by the length of each matrix row.// outputs Byte arrays where the computed shards are stored.func (r reedSolomon) codeSomeShards(matrixRows, inputs, outputs [][]byte) &#123; for c := 0; c &lt; r.DataShards; c++ &#123; in := inputs[c] for iRow := 0; iRow &lt; outputCount; iRow++ &#123; if c == 0 &#123; galMulSlice(matrixRows[iRow][c], in, outputs[iRow], r.o.useSSSE3, r.o.useAVX2) &#125; else &#123; galMulSliceXor(matrixRows[iRow][c], in, outputs[iRow], r.o.useSSSE3, r.o.useAVX2) &#125; &#125; &#125;&#125; Since any $ k $ rows of Vandermonde matrix are linearly independent, with arbitrary $ k $ correct code shards, the original $ k $ data shards can be reconstructed by multiplying the corresponding inverse matrix. However, in practice, we usually do not know which one is correct or corrupted for the $ n $ received codewords. In this case, the plurality of votes method is necessary and $$ \left(\begin{array}{c} n-s\k \end{array} \right)&gt;\left(\begin{array}{c} s+k-1\k \end{array} \right) $$ or $$ s&lt;\frac{n-k+1}{2} $$ where $s$ is number of unkown errors, therefore $ n=k+2s $ always satisfies the in-equation. Another approach is to use the Berlekamp-Welsh Algorithm which avoids the heavy computation of votes: Berlekamp-Welsh decoder: 1. Send $m(0),m(1),...,m(n)$, receive $m'(0),m'(1),...,m'(n)$, and most $s$ of them such that $m(i)\neq m'(i)$Ôºõ 2. $E(x)=x{s}+b_{s-1}x{s-1}+...+b_{0}$, $Q(x)=a_{k+s-1}x{k+s-1}+a_{k+s-2}x{k+s-2}+...+a_{0}$ 3. Solve the coefficients of co$E(x)$,$Q(x)$ with $ Q(i)=m'(i)E(i)$ 4. Derive $m(x)=Q(x)/E(x)$. And $\forall m(i)\neq m'(i)$,$E(i)=0$. The implicite principle: $Q'(x)/E'(x)$ and $Q(x)/E(x)$ agree on at least $k+s$ points. $E'(x)$ and $E(x)$ both have at most $s$ zero points. Elimilate $E'(x)$ and $E(x)$,$Q'(x)/E'(x)$ and $Q(x)/E(x)$ are degree at least $k-1$ and agree on at least $k$ points, thus $Q'(x)/E'(x)=Q(x)/E(x)=m(x)$. 2. Systematic coding matrix: In the original approach, all the code shards have been encoded. While in the systematic encoding, the original data shards become part of the code shards and only the parity shards should be encoded. In other words, the stripe contains the original datas and parity codewords together no longer codewords only. The coding matrix is composed of the top square identity matrix and the parity matrix. There are three methods of building the coding matrix in this systematic way are provided: Elementary transform on the Vandermonde matrix as the procedure 1. 123456789101112131415161718func buildMatrix(dataShards, totalShards int) (matrix, error) &#123; vm, err := vandermonde(totalShards, dataShards) if err != nil &#123; return nil, err &#125; top, err := vm.SubMatrix(0, 0, dataShards, dataShards) if err != nil &#123; return nil, err &#125; topInv, err := top.Invert() if err != nil &#123; return nil, err &#125; return vm.Multiply(topInv)&#125; Parity matrix is Vandermonde matrix. 1234567891011121314151617181920func buildMatrixPAR1(dataShards, totalShards int) (matrix, error) &#123; result, err := newMatrix(totalShards, dataShards) if err != nil &#123; return nil, err &#125; for r, row := range result &#123; // The top portion of the matrix is the identity // matrix, and the bottom is a transposed Vandermonde // matrix starting at 1 instead of 0. if r &lt; dataShards &#123; result[r][r] = 1 &#125; else &#123; for c := range row &#123; result[r][c] = galExp(byte(c+1), r-dataShards) &#125; &#125; &#125; return result, nil&#125; Parity matrix is Cauchy matrix. Cauchy matrices are easier to invert than general matrices [8]. 12345678910111213141516171819func buildMatrixCauchy(dataShards, totalShards int) (matrix, error) &#123; result, err := newMatrix(totalShards, dataShards) if err != nil &#123; return nil, err &#125; for r, row := range result &#123; // The top portion of the matrix is the identity // matrix, and the bottom is a transposed Cauchy matrix. if r &lt; dataShards &#123; result[r][r] = 1 &#125; else &#123; for c := range row &#123; result[r][c] = invTable[(byte(r ^ c))] &#125; &#125; &#125; return result, nil&#125; Generator Polynomial Method# Define the generator polynomial: $$ g(x)=(x-\alpha)(x-\alpha{2})\dots(x-\alpha{2s}) $$ and the codeword polynomial can be directly computed as $$c(x)=m(x)g(x)$$ For the systematic form, which is more often used in practice, we define $$ b(x)=x^{2s}m(x) \quad mod\quad g(x) $$ then the codeword polynomial becomes $$ c(x)=x^{2s}m(x)-b(x) $$ where $-b(x)$ is the parity codeword polynomial. All the polynomial operation above is processed over $GF(2^8)$. It is also observed that the correction of received message can be checked by testing its divisibility by g(x), and there is no need to decode for the systematic encoding if the answer is affirmative. Otherwise, we denote $r(x)=c(x)+e(x)$ and suppose there are $ v(\leq s) $ errors Syndrome based decoder: 1.Calculate the $2s$ Syndromes: $S_{j}=r(\alpha{j})=e(\alpha{j})$ 2. Solve $$ \begin{bmatrix} S_{1} &amp; S_{2}&amp; ... &amp; S_{v} \ S_{2} &amp; S_{3} &amp; ...&amp;S_{v+1} \ ... &amp; ... &amp; ...&amp;... \ S_{v} &amp; S_{v+1} &amp; ...&amp;S_{2v-1} \end{bmatrix} \begin{bmatrix} \Lambda_{v}\ \Lambda_{v-1}\ ...\ \Lambda_{1} \end{bmatrix}=\begin{bmatrix} -S_{v} \ -S_{v+1}\ ...\ -S_{2v}\tag{4} \end{bmatrix} $$ and use Chien search solve $\Lambda(x)=\Lambda_{v}x^{v} +\Lambda_{v-1}x^{v-1}+...+1=0$ to derive the $v$ roots, denoted as,$x_{1},..,x_{v}$. 3. Use Forney algorithm to solve $$ \begin{bmatrix} x_{1}^{-1} &amp; x_{2}^{-1}&amp; ... &amp; x_{v}^{-1} \ x_{1}^{-2} &amp; x_{2}^{-2} &amp; ...&amp;x_{v}^{-2} \ ... &amp; ... &amp; ...&amp;... \ x_{1}^{-2s} &amp; x_{2}^{-2s} &amp; ...&amp;x_{v}^{-2s} \end{bmatrix} \begin{bmatrix} e_{i_{1}}\ e_{i_{2}}\ ...\ e_{i_{v}} \end{bmatrix}=\begin{bmatrix} S_{1} \ S_{2}\ ...\ S_{2s}\tag{5} \end{bmatrix} $$ 4. The index $i_{j}$ of $e_{i_{j}}$ are determined by looking up the logarithmic table as earlier mentioned 5. Compute $e(x)=\sum_{j=1}{v}e_{i_{j}}x{i_{j}}$ and $c(x) = r(x)-e(x)$. It is worth mentioning that all the syndromes are zeros if $r(x)=c(x)$, this can be used to check if the received message is corrupted or if the message was completely constructed. RS encoding is relatively straightforward for the generator approach, but decoding needs complicated algebraic computation, especially for the step 2. Because the real value of $v$ is unknown and the normal way has to use the trial value untill the matrix in $(4)$ is nonsingular. Other algebraic methods for the evaluation of this error location polynomial $\Lambda(x)$ include Berlekamp‚ÄìMassey algorithm and Extended Euclidean algorithm. This syndrome based decoder can be implemented with different hardware unit such as matrix vector multiplication unit, remainder unit, and performs hard-decision decoding up to $s$ errors. Hard-decision decoding decides the bit according to the a threshold, where each bit is definitely one or zero. While soft-decision decoding requires additional reliability information to improve the decision, which has better coding gain for the white Guassian channel [2]. RS Code in Distributed Storage Systems# The RS code are stored in different disks in the distributed storage systems, and the performance arasure code in distributed storage systems involves disk I/O and repair bandwidth overhead. 5.1 Rotated Reed-Solomon code# In the conventional RS code, all the parity blocds are encoded with data blocks in the same strip, while in the rotated reed-solomon code, parity blocks may be generated with different stripes as in the following figure, when the disk 5 in the figure fails, this method reduceS 3 operations of reading the data blocks than the conventional RS code [5]. Local Reconstruction Code (LRC)# LRC introduces local parity codes which requires slightly more storage space than conventional RS code, but significantly reduce the number of participating data discs for encoding, thus it is beneficial to the reduction of bandwidth and disc I/O overhead. The figure of pyramid code is shown as follows [6] However, repair of the global redundancy still needs to access all data discs, another LRC approach in [7] further introduces parity code ($ S_{3} $ in the figure) for the global parity codes ($P_{1}$,$P_{2}$,$P_{3}$,$P_{4}$) to avoid this undesirable situation. By choosing the coefficients of $c_{1}^{'}$, $c_{2}^{'}$, $c_{3}^{'}$, $c_{4}^{'}$ and $c_{5}^{'}$, $c_{6}^{'}$ properly, the parity code of $ S_{3} $ can be calculated by the existing parity codes $ S_{1} $ and $ S_{2} $. Thus parity code $ S_{3} $ does not have to occupy additional storage. Observation: Copy is kind of LRC. References# [1] I. Reed and G. Solomon, BPolynomial codes over certain finite fields,[ J. Soc. Ind. Appl. Math., vol. 8, no. 2, pp. 300‚Äì304, Jun. 1960. [2] Wicker and Bhargava, Reed-Solomon Codes and Their Applications, 1994. [3] James S. Plank and Lihao Xu, Optimizing Cauchy Reed-Solomon Codes for Fault-Tolerant Network Storage Applications. [4] Reed‚ÄìSolomon codes for coders. [5] Khan O, Burns R C, Plank J S, et al. Rethinking erasure codes for cloud file systems: minimizing I/O for recovery and degraded reads. [6] Huang Cheng, Chen Minghua, Li Jin. Pyramid codes: flexible schemes to trade space for access efficiency in reliable data storage systems. [7] Sathiamoorthy M, Asteris M, Papailiopoulos D, et al. Xoring elephants: novel erasure codes for big data. [8] J. Blomer, M. Kalfane, R. Karp, M. Karpinski, M. Luby, and D. Zuckerman, An XOR-Based Erasure-Resilient Coding Scheme.]]></content>
      <tags>
        <tag>Golang</tag>
        <tag>RS Code</tag>
        <tag>ÈïøÊñá</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GolangÁºñÁ®ãÂü∫Á°Ä]]></title>
    <url>%2F2018%2F08%2F20%2F2018-8-20%2F</url>
    <content type="text"><![CDATA[Âú®UbuntuÂÆâË£Ö: Êï∞ÊçÆÁ±ªÂûã: Âü∫Êú¨Á±ªÂûãÔºö ËÅöÈõÜÁ±ªÂûã (aggregate types)Ôºö Êï∞ÁªÑ ÁªìÊûÑ ÂºïÁî®Á±ªÂûã ÊåáÈíà ÂàáÁâáÔºàsliceÔºâ Â≠óÂÖ∏ÔºàmapÔºâ ÂáΩÊï∞ ÈÄöÈÅìÔºàchannelÔºâ Êé•Âè£Á±ªÂûãÔºàinterfaceÔºâÔºö ÊéßÂà∂ÊµÅ Ôºàfor if switch defer gotoÔºâÔºö ÂàõÂª∫Â∑•Á®ãÁõÆÂΩïÔºö Tips: ÂÖ∂‰ªñÔºö ÂèÇËÄÉËµÑÊñôÔºö Âú®UbuntuÂÆâË£Ö:# 123456789&gt;cd ~ &gt;wget https://dl.google.com/go/go1.11.2.linux-amd64.tar.gz&gt;tar -C /usr/local -xzf go1.11.2.linux-amd64.tar.gz // Ëß£ÂéãÂà∞ÂæóÂà∞ÁöÑ go ÁõÆÂΩïÔºåÊîæÂà∞ /usr/local ÁõÆÂΩï‰∏ã&gt;vim .bashrc // ÂÜôÂÖ•‰ª•‰∏ãÂÜÖÂÆπexport GOPATH=~/hejtao/go_projectsexport GOROOT=/usr/local/goexport GOBIN=$GOROOT/binexport PATH=$PATH:$GOBIN&gt;source .bashrc Êï∞ÊçÆÁ±ªÂûã:# Âü∫Êú¨Á±ªÂûãÔºö# Êï∞ÂÄº Êï¥ÂûãÔºöintÔºõ int8Ôºõ int16Ôºõ int32(runeÔºåUnicode)Ôºõ int64Ôºõ uintÔºõ uint8(byte)Ôºõ uint16Ôºõ uint32Ôºõ uint64Ôºõ uintptr int, uint, uintptr Âú® 32 ‰ΩçÁ≥ªÁªü‰∏äÊòØ 32 ‰ΩçÔºåÂú® 64‰Ωç Á≥ªÁªü‰∏äÊòØ 64‰Ωç ÊµÆÁÇπÂûãÔºöfloat32Ôºõ float64 Â§çÊï∞ÂûãÔºöcomplex64Ôºõ complex128 Â≠óÁ¨¶‰∏≤Ôºö‰ΩøÁî®ÂèåÂºïÂè∑ &quot;a&quot; Â∏ÉÂ∞î: trueÔºõ false Â∏∏ÈáèÔºö‰∏âÁßçÂü∫Êú¨Á±ªÂûã 12345const( kb = 1024 e = 2.71828182845904523536028747135266249775724709369995957496696763 F = false) Âú® ifËØ≠Âè•‰∏≠ÔºåËã•Ê£ÄÈ™åÊù°‰ª∂‰∏∫i &gt;= 0ÔºåÂàôi ÁöÑÁ±ªÂûã‰∏çÂÆú‰∏∫ uint ÂûãÔºàuint Êï∞ÊçÆÂßãÁªà &gt;= 0Ôºâ„ÄÇÂ∞ΩÁÆ°ÂÜÖÁΩÆÂáΩÊï∞ len() ËøîÂõûÂÄºÊòØÈùûË¥üÊï¥Êï∞Ôºå‰ΩÜÂÆÉÈôÖËøîÂõû int ÂûãÔºå 1234medals := []string&#123;"gold", "silver", "bronze"&#125;for i := len(medals)-1; i &gt;= 0; i--&#123; fmt.Println(medals[i]) // "bronze", "silver", "gold"&#125; Âü∫Êú¨Á±ªÂûã‰∏éÊìç‰ΩúÁ¨¶ÊûÑÊàêË°®ËææÂºè Âèñ‰Ωô % Âè™Áî®‰∫éÊï¥ÂûãÔºõ‰ΩôÊï∞‰∏éË¢´Èô§Êï∞Á¨¶Âè∑Áõ∏ÂêåÔºå5%3=2Ôºõ -5%3=-2 5.0/4=1.25Ôºõ5/4.0=1.25Ôºõ5/4=1 &amp;&amp; Ëã•Â∑¶ËæπÁöÑË°®ËææÂºèÁªìÊûú‰∏∫ falseÔºå‰∏çÊ£ÄÈ™åÂè≥ËæπÁöÑË°®ËææÂºèÔºõ&amp; ÂßãÁªàÊ£ÄÈ™å‰∏§ËæπÁöÑË°®ËææÂºè ‰∏éÊàñ^ ; ‰∏ÄÂÖÉÂâçÁºÄ^ ËÅöÈõÜÁ±ªÂûã (aggregate types)Ôºö# Êï∞ÁªÑ# 12345var a [3]intr := [...]int&#123;99: 1&#125; // Á¥¢Âºï‰∏∫99ÁöÑÂÖÉÁ¥†Ôºår[99]Ôºå Á≠â‰∫é 1ÔºåÂÖ∂‰ªñÈªòËÆ§ 0p := new([10]int) // Â∞ÜÁîüÊàêÁöÑÊï∞ÁªÑÁöÑÊåáÈíàËµãÁªô p, ‰∏∫ *[10]int Á±ªÂûãp[0]=1 // Áªô p ÊåáÂêëÁöÑÊï∞ÁªÑÁöÑÁ¥¢Âºï‰∏∫0ÁöÑÂÖÉÁ¥†ËµãÂÄº 1 Êï∞ÁªÑÁöÑÈïøÂ∫¶‰πüÊòØÊï∞ÁªÑÁ±ªÂûãÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂõ†Ê≠§ [3]int Âíå [4]int ÊòØ‰∏çÂêåÁ±ªÂûãÁöÑÊï∞ÁªÑÔºå‰∏çËÉΩËøõË°åÊØîËæÉÊàñËµãÂÄº„ÄÇ ÁªìÊûÑ# Ôºà1ÔºâÁªìÊûÑÁöÑÂ≠óÊÆµÔºàfieldÔºâ 1234567891011121314151617181920212223type person struct&#123; // ÂÆö‰πâ person Á±ªÂûã gender string age int&#125;func main()&#123; student := person&#123;&#125; student.age = 16 student.gender = "male" // or student := person&#123; gender : "male", age : 16, //ÈÄóÂè∑‰∏çËÉΩÁúÅ &#125; // or student := person&#123;"male", 16&#125; teacher := &amp;person&#123; //ÂèñÊåáÈíà gender : "female", age : 30, &#125; teacher.age = 36 //ÊåáÈíà teacher ‰ªçÁÑ∂ÂèØ‰ª•ËøõË°åÁÇπÊìç‰Ωú&#125; ÊåáÈíà‰πüÂèØ‰ª•ËøõË°åÁÇπÊìç‰Ωú„ÄÇ ÂåøÂêçÁªìÊûÑÔºåÂ≠óÊÆµÂåøÂêç 1234567891011121314student := struct&#123; // ÂåøÂêçÁªìÊûÑ gender : string age : int&#125;&#123; gender : "male", age : "17",&#125;type person struct&#123; string int&#125;// ÊåâÁÖßÈ°∫Â∫èÂàùÂßãÂåñstudent := person&#123;"male", 10&#125; ÁªìÊûÑÂµåÂ•óÔºå 12345678910111213141516171819202122232425262728type person struct&#123; gender string age int parents struct&#123; // ÂµåÂ•ó‰∏Ä‰∏™ÂåøÂêçÁªìÊûÑ dad, mom : string &#125;&#125;type address struct&#123; state, city string&#125;type person2 struct&#123; gender string age int address // ÂµåÂ•ó‰Ω†‰∏Ä‰∏™ÁªìÊûÑaddress&#125;func main()&#123; student := person&#123;gender : "female", age : 10&#125; student.parents.dad = "Tom" student.parents.mom = "Lily" student2 := person2&#123;gender:"female", age:10, address : address&#123;county:"LA" state:"California"&#125; &#125; student2.address.state = "Massachusetts" // or student2.state = "Massachusetts" &#125; Ôºà2ÔºâÁªìÊûÑÁöÑÊñπÊ≥ïÔºàmethodÔºâ ÂáΩÊï∞‰∏éÊñπÊ≥ï 123456789101112131415161718192021222324package mainimport ( "fmt" "math")type Point struct&#123; X, Y float64 &#125;func Distance(p, q Point) float64 &#123; //ÂáΩÊï∞ return math.Hypot(q.X-p.X, q.Y-p.Y)&#125;func (p Point) Distance(q Point) float64 &#123; // ÊñπÊ≥ïÔºåÂú®ÂáΩÊï∞ÂêçÂâçÂ¢ûÂä†‰∏Ä‰∏™ÂΩ¢ÂèÇÔºàreceiverÔºâ Á±ª‰ºº‰∫éJavaÁöÑthis ÂíåpythonÁöÑ selfÔºå return math.Hypot(q.X-p.X, q.Y-p.Y) // Êé•Êî∂ËÄÖÁöÑÂêçÁß∞ÈÄöÂ∏∏ÂèñÂÆÉÁöÑÁ±ªÂûãÂêçÁß∞ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÊØç&#125;func main() &#123; p := Point&#123;1, 2&#125; q := Point&#123;4, 6&#125; fmt.Println(Distance(p, q)) // ÊâìÂç∞ 5Ôºå Ë∞ÉÁî®ÂáΩÊï∞ fmt.Println(p.Distance(q)) // Ë∞ÉÁî®ÊñπÊ≥ï&#125; ÂΩìÈúÄË¶Å‰ΩøÁî®ÊñπÊ≥ïÂØπÂÄºÔºàvalue of type TÔºåÁõ∏ÂØπ‰∫éÊñπÊ≥ïÊù•ËÆ≤Â∞±ÊòØÂÆûÂèÇÔºåargumentÔºâ ÁöÑÂ≠óÊÆµËøõË°å‰øÆÊîπÊó∂Ôºå‰ΩøÁî®Êé•Êî∂ËÄÖ‰∏∫ÊåáÈíàÁöÑÊñπÊ≥ïÊàñËÄÖÂè´ÊåáÈíàÊñπÊ≥ï 1234func (p *Point) ScaleBy(factor float64) &#123; // Êé•Êî∂ËÄÖÂèÇÊï∞pÁöÑÁ±ªÂûãÊòØÊåáÈíàÁ±ªÂûã p.X *= factor // pÂú®ËøôÈáåÊòØÊåáÈíàÔºåÁ≠â‰ª∑‰∫é (*p).X p.Y *= factor&#125; Âêå‰∏Ä‰∏™ struct ÁöÑÊñπÊ≥ïÂíåÂ≠óÊÆµÂç†ÊçÆÁõ∏ÂêåÁöÑÂëΩÂêçÁ©∫Èó¥Ôºàname spaceÔºâÔºåÂõ†Ê≠§‰∏§ËÄÖÁöÑÂêçÁß∞‰∏çËÉΩÈáçÂ§çÔºõ ÊåáÈíàÊñπÊ≥ïÁúã‰ΩúÈ´òÊùÉÈôêÊñπÊ≥ï„ÄÇ ÂØπÊñπÊ≥ïÁöÑË∞ÉÁî®, ÂÄºÔºàÂÆûÂèÇÔºâ Âíå Êé•Êî∂ËÄÖÔºàÂΩ¢ÂèÇÔºâÁ±ªÂûãË¶ÅÁõ∏Âêå 12345678Point&#123;1, 2&#125;.Distance(q) // Point Pointpptr.ScaleBy(2) // *Point *Pointpptr.Distance(q) // ÈöêÂê´ (*pptr)p.ScaleBy(2) // ÈöêÂê´ (&amp;p) Point&#123;1, 2&#125;.ScaleBy(2) //ÈîôËØØÔºÅÔºÅÔºÅ(&amp;Point&#123;1, 2&#125;).ScaleBy(2) ‰∏ç‰ªÖ‰ªÖÊòØ struct 123456789101112131415161718package mainimport ( "fmt")type INT intfunc main() &#123; var a INT a = 1 a.Print() // ÊâìÂç∞ 2&#125;func (a *INT) Print() &#123; *a = 2 fmt.Println(*a)&#125; ÊñπÊ≥ïÊòØ‰∏éÂëΩÂêçÁ±ªÂûã(named type)Áõ∏ÂÖ≥ËÅîÁöÑÂáΩÊï∞„ÄÇ ÂºïÁî®Á±ªÂûã# ÊåáÈíà# 1234var p *inti := 20p = &amp;i*p = 10 // i ÁöÑÂÄº‰∏∫ 10 ÂàáÁâáÔºàsliceÔºâ# 123456789101112131415var s []int // Â£∞ÊòéÂàáÁâá sa := [5]int&#123;1, 2, 3, 4, 5&#125;s = a[:2] // [1, 2]Ôºå len(s)Á≠â‰∫é2Ôºåcap(s)Á≠â‰∫é5s = a[0:1] // [1]Ôºålen(s)Á≠â‰∫é1Ôºåcap(s)Á≠â‰∫é5s = a[3:] // [4, 5]Ôºålen(s)Á≠â‰∫é2Ôºåcap(s)Á≠â‰∫é2s := make([]int, 2, 4) //make([]type, len, cap) ÔºåÂàáÁâáÈïøÂ∫¶‰∏∫2ÔºåÂ∫ïÂ±ÇÊï∞ÁªÑÁöÑÈïøÂ∫¶‰∏∫4s = append(s, 1) // s ÁöÑÂú∞ÂùÄ‰∏çÂèòs = append(s, 2, 3) // ÁîüÊàêÊñ∞ÁöÑÊï∞ÁªÑÔºåÂú∞ÂùÄÊîπÂèòÔºåÂÆπÈáèÁøªÂÄçÔºå‰πüÂ∞±ÊòØcap(s)Á≠â‰∫é4*2=8s1 := []int&#123;1, 2, 3&#125;s2 := []int&#123;4, 5&#125;copy(s1, s2) //Êää s2 Â§çÂà∂Âà∞ s1Ôºås1 ‰∏∫ [4, 5, 3]s1 = []int&#123;1, 2, 3&#125;copy(s2, s1) // s2 ‰∏∫ [1, 2] ÂàáÁâáÁöÑÊú¨Ë¥®ÊòØÂØπÂ∫ïÂ±ÇÊï∞ÁªÑÁöÑÂºïÁî®ÔºõÂàáÁâáÁöÑÂÆπÈáèÔºàcapÔºâÊòØÂàáÁâáÁöÑÂßãÁ¥¢ÂºïÂà∞Â∫ïÂ±ÇÊï∞ÁªÑÁöÑÊú´Á¥¢ÂºïÁöÑÈïøÂ∫¶„ÄÇ Â≠óÂÖ∏ÔºàmapÔºâ# 123456var m map[int]string // key int ÂûãÔºõvalue string Âûãm = make(map[int]string)m2 := make(map[int]string)m[0] = "OK"delete(m, 0) // Âà†Èô§ m ‰∏≠ÈîÆ‰∏∫0ÁöÑÈîÆÂÄºÂØπ ÂµåÂ•óÔºå 123m := make(map[int]map[int]string) // value mapÂûãm[1] = make(map[int]string)m[1][2] = "YES" ÂáΩÊï∞# func main(int, []string) int meansÔºå function main takes an int and a slice of strings and returns an int ÂáΩÊï∞‰Ωú‰∏∫Á±ªÂûãÔºå 1var f func(func(int,int) int, int) func(int, int) int ‰∏çÂÆöÈïøÂèòÂèÇÔºåÈó≠ÂåÖ 12345678910111213141516171819202122232425262728package mainimport ( "fmt")func main()&#123; var_args(1) var_args(1, 2, 3) f := closure(10) fmt.Println(f(1)) fmt.Println(f(2)) &#125;func var_args(args ...int)&#123; fmt.Println(args)&#125;func closure(x int) func(int) int&#123; // ËøîÂõûÂåøÂêçÂáΩÊï∞ return func(y int) int&#123; return x + y &#125;&#125;ËæìÂá∫Ôºö[1][1 2 3]1112 ÈÄöÈÅìÔºàchannelÔºâ# channel ÊòØ goroutine Ê≤üÈÄöÁöÑÊ°•Ê¢ÅÔºåÈÄöËøá make ÂàõÂª∫Ôºåclose ÂÖ≥Èó≠ 12345678910111213141516package mainimport ( "fmt")func main() &#123; c := make(chan bool) go func() &#123; fmt.Println("I from goroutine !") c &lt;- true &#125;() &lt;-c&#125; channel ‰Ωú‰∏∫ÂáΩÊï∞ÂΩ¢ÂèÇ 123456789101112131415161718package mainimport ( "fmt")func main() &#123; c := make(chan bool) go Hello(c) &lt;-c&#125;func Hello(c chan bool) &#123; fmt.Println("Hello, I from goroutine!") c &lt;- true &#125; Â§ö‰∏™ goroutineÔºåÂ§ö‰∏™channel 12345678910111213141516171819202122232425262728293031323334353637383940414243package mainimport ( "fmt" "runtime")func main() &#123; runtime.GOMAXPROCS(runtime.NumCPU()) // ÂºÄÂêØÂ§öÊ†∏ c := make(chan bool) for i := 0; i &lt; 5; i++ &#123; // ÂêØÂä®Â§ö‰∏™ goroutin go Decomposition(c, i, 100000007) &#125; for i := 0; i &lt; 5; i++ &#123; // Â§ö‰∏™ channel ÈòªÂ°û &lt;-c &#125;&#125;func Decomposition(c chan bool, index int, n int) &#123; // Ë¥®Êï∞ÂàÜËß£ for i := 2; i &lt;= n; i++ &#123; for n != i &#123; if n%i == 0 &#123; fmt.Printf("%d*", i) n = n / i &#125; else &#123; break &#125; &#125; &#125; fmt.Printf("%d: %d\n", index, n) c &lt;- true&#125;ËæìÂá∫Ôºö 0: 1000000072: 1000000071: 1000000074: 1000000073: 100000007‰ªéËæìÂá∫ÁªìÊûúÁöÑÈ°∫Â∫èÂèØ‰ª•ÁúãÂá∫ goroutine Âπ∂ÈùûÂÖàÂêØÂä®ÂÖàÊâßË°å ‰ΩøÁî®ÂêåÊ≠•ÂåÖÊù•‰ª£Êõø channel 123456789101112131415161718192021222324252627282930313233343536373839404142package mainimport ( "fmt" "runtime" "sync")func main() &#123; runtime.GOMAXPROCS(runtime.NumCPU()) wg := sync.WaitGroup&#123;&#125; wg.Add(5) // Ê∑ªÂä† 5 ‰∏™ ‰ªªÂä°ÔºàgoroutineÔºâ for i := 0; i &lt; 5; i++ &#123; go Decomposition(&amp;wg, i, 100000007) &#125; wg.Wait() // Á≠âÂà∞‰ªªÂä°Êï∞ÂáèÂà∞ 0 &#125;func Decomposition(wg *sync.WaitGroup, m int, n int) &#123; for i := 2; i &lt;= n; i++ &#123; for n != i &#123; if n%i == 0 &#123; fmt.Printf("%d*", i) n = n / i &#125; else &#123; break &#125; &#125; &#125; fmt.Printf("%d: %d\n", m, n) wg.Done() // ‰ªªÂä°Êï∞Âáè 1&#125;ËæìÂá∫Ôºö0: 1000000072: 1000000074: 1000000071: 1000000073: 100000007 selec{}ËØ≠Âè•Ôºå Â¶ÇÊûúÊúâÂ§ö‰∏™case ËØªÂèñÊï∞ÊçÆÔºåselect‰ºöÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™caseÊâßË°åÔºåÂÖ∂‰ªñ‰∏çÊâßË°åÔºõ Â¶ÇÊûúÊ≤°ÊúâcaseËØªÂèñÊï∞ÊçÆÔºåÂ∞±ÊâßË°ådefaultÔºõ Â¶ÇÊûúÊ≤°ÊúâcaseËØªÂèñÊï∞ÊçÆÔºå‰∏îÊ≤°ÊúâdefaultÔºåselectÂ∞ÜÈòªÂ°ûÔºåÁõ¥Âà∞Êüê‰∏™caseÂèØ‰ª•ÊâßË°å„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243package mainimport ( "fmt")func main() &#123; c1, c2, block := make(chan int), make(chan string), make(chan bool) go func() &#123; for &#123; select &#123; // ÊåâÈöèÊú∫È°∫Â∫èÂ§ÑÁêÜÂ§ö‰∏™ case case message, open := &lt;-c1: if !open &#123; // Â¶ÇÊûúÈÄöÈÅì c1 ÂÖ≥Èó≠ÔºåÂàôË∑≥Âá∫Êó†ÈôêÂæ™ÁéØ block &lt;- true break &#125; fmt.Println("A message from main by c1:", message) case message, open := &lt;-c2: if !open &#123; // Â¶ÇÊûúÈÄöÈÅì c2 ÂÖ≥Èó≠ÔºåÂàôË∑≥Âá∫Êó†ÈôêÂæ™ÁéØ block &lt;- true break &#125; fmt.Println("A message from main by c2:", message) &#125; &#125; &#125;() c1 &lt;- 10 c2 &lt;- "hello" c1 &lt;- 20 c2 &lt;- "world" close(c1) // ÂÖ≥Èó≠ÈÄöÈÅì c1 &lt;-block&#125;ËæìÂá∫ÔºöA message from main by c1: 10A message from main by c2: helloA message from main by c1: 20A message from main by c2: world 12345678910111213141516171819package mainimport ( "fmt" "time")func main() &#123; select &#123; case &lt;-time.After(2000000 * time.Microsecond): fmt.Println("2 seconds") case &lt;-time.After(1999999 * time.Microsecond): fmt.Println("1.999999 seconds") &#125;&#125;ËæìÂá∫Ôºö1.999999 seconds Êé•Âè£Á±ªÂûãÔºàinterfaceÔºâÔºö# Ôºà1ÔºâÊé•Âè£‰ª£Ë°®Êüê‰∫õÊñπÊ≥ïÁöÑÈõÜÂêà 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960package mainimport ( "fmt")type game interface &#123; Strike_of_Kings() int Battle_Grounds() int&#125;type contact interface &#123; Wechat() QQ()&#125;type smartphone interface&#123; // Êé•Âè£ÂµåÂ•óÔºå game contact&#125;type iphone struct &#123; version string price float32 user string&#125;func (iph iphone) Wechat() &#123; fmt.Println("I installed wechat on my iphone", iph.version)&#125;func (iph *iphone) QQ() &#123; fmt.Println("I installed wechat on my iphone", iph.version)&#125;// iphone ‰∏çÊª°Ë∂≥ contact Êé•Âè£func (iph iphone) Battle_Grounds() int &#123; fmt.Println("There are 4 teammates at most in the Battle Grounds.") return 4&#125;func (iph iphone) Strike_of_Kings() int &#123; fmt.Println("There are 5 teammates at most in the Strike of Kings.") return 5&#125;// iphone Êª°Ë∂≥ game Êé•Âè£func (iph *iphone) New_Version(version string) &#123; iph.version = version&#125;func all_round_game(game) &#123; // Êé•Âè£‰Ωú‰∏∫ÂΩ¢ÂèÇ fmt.Println("Both Strike of_Kings and Battle Grounds have installed.")&#125;func main() &#123; my_phone := iphone&#123;"X", 8316, "Xiaohe"&#125; my_phone.Wechat() fmt.Println(my_phone.Battle_Grounds()) all_round_game(my_phone) // my_phone Á¨¶Âêà game Êé•Âè£ÔºåÂèØ‰Ωú‰∏∫ËØ•ÂáΩÊï∞ÁöÑÂÆûÂèÇ var _ game = iphone // Á°Æ‰øù iphone ÂÆûÁé∞‰∫ÜÊé•Âè£game &#125; Ôºà2Ôºâ‰ªª‰ΩïÁ±ªÂûãÈÉΩÊª°Ë∂≥Á©∫Êé•Âè£ÔºõÁ©∫Êé•Âè£interface{}‰Ωú‰∏∫ÂΩ¢ÂèÇÂèØ‰ª•Êé•Âèó‰ªª‰ΩïÁ±ªÂûãÁöÑÂÆûÂèÇ 12345678910111213141516171819202122232425package mainimport ( "fmt")func main() &#123; m := make(map[int]interface&#123;&#125;) m[1] = "a" m[2] = 2 m[3] = false print_map(m)&#125;func print_map(m map[int]interface&#123;&#125;) &#123; for k, v := range m &#123; fmt.Println(k, ":", v) &#125;&#125;ËæìÂá∫Ôºö1 : a2 : 23 : false []string Âíå []interface{} ÊòØ‰∏çÂêåÁöÑÁ±ªÂûãÔºõ Êé•Âè£ÊòØ‰∏ÄÁßçÊäΩË±°Á±ªÂûãÔºåÂèØÁêÜËß£‰∏∫ÊòØÂ∞ÜÊâÄÊúâÂÖ∑‰ΩìÁ±ªÂûãÊåâÁÖßÊñπÊ≥ïÈõÜËøõË°åÂÜçÂàÜÁ±ªÔºõ ÊåáÈíàÊñπÊ≥ïÈõÜÂåÖÂê´ÈùûÊåáÈíàÊñπÊ≥ïÈõÜ„ÄÇ Ôºà3ÔºâÊé•Âè£ÂÄºÔºàinterface valueÔºâÂåÖÂê´ Á±ªÂûã ÔºàÊé•Âè£ÁöÑÂä®ÊÄÅÁ±ªÂûãÔºâÂíå Á±ªÂûãÂÄº ÔºàÊé•Âè£ÁöÑÂä®ÊÄÅÂÄºÔºâ ‰∏§‰∏™ÈÉ®ÂàÜÔºå‰ªÖÂΩì‰∏§ËÄÖÂùá‰∏∫nil Êó∂ÔºåÊé•Âè£Êâç‰∏∫nil Ôºà4ÔºâÂèçÂ∞Ñ ÔºàreflectionÔºâ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package mainimport ( "fmt" "reflect")type iphone struct &#123; version string price int user string&#125;func (iph iphone) Wechat() &#123; fmt.Println("I installed wechat on my iphone", iph.version)&#125;func main() &#123; my_phone := iphone&#123;"X", 8316, "Xiaohe"&#125; Info(my_phone)&#125;func Info(itf interface&#123;&#125;) &#123; t := reflect.TypeOf(itf) fmt.Println(t) for i := 0; i &lt; t.NumField(); i++ &#123; fmt.Println(t.Field(i)) &#125; fmt.Println("___________________") v := reflect.ValueOf(itf) fmt.Println(v) for i := 0; i &lt; v.NumField(); i++ &#123; fmt.Println(v.Field(i)) &#125;&#125;ËæìÂá∫Ôºömain.iphone&#123;version main string 0 [0] false&#125;&#123;price main int 16 [1] false&#125;&#123;user main string 24 [2] false&#125;___________________&#123;X 8316 Xiaohe&#125;X8316Xiaohe ÊéßÂà∂ÊµÅ Ôºàfor if switch defer gotoÔºâÔºö# Ôºà1ÔºâforÔºö 1234567891011for (inti statement)ÔºõconditionÔºõ(post statement) &#123;&#125;for i := 0; i &lt; 10; i++ &#123;&#125; for ; i &lt; 10; &#123; // ÂéªÊéâÂàÜÂè∑&#125; for i &lt; 10&#123; // while ËØ≠Âè•&#125;for&#123; // Êó†ÈôêÂæ™ÁéØ&#125; Ôºà2ÔºâifÔºö 123456 if (init statement)Ôºõcondition &#123;&#125; if (init statement)Ôºõcondition &#123;&#125;else &#123;&#125; Ôºà3ÔºâswitchÔºö 12345678910111213switch (init statement)Ôºõsome value &#123; case 0Ôºö case f()Ôºö ... defaultÔºö&#125;switch &#123; case Â∏ÉÂ∞îË°®ËææÂºè1Ôºö case Â∏ÉÂ∞îË°®ËææÂºè2Ôºö ... defaultÔºö&#125; ‰∏ÄÊó¶Á¨¶ÂêàÊù°‰ª∂Ëá™Âä®ÁªàÊ≠¢ÔºåËã•Â∏åÊúõÁªßÁª≠Ê£ÄÈ™å‰∏ãÈù¢ÁöÑcaseÔºå‰ΩøÁî® fallthrough ËØ≠Âè•„ÄÇ Ôºà4ÔºâdeferÔºö defer ÂêéÂøÖÈ°ªË∑üÂáΩÊï∞ÂºïÁî® defer ËØ≠Âè•Ë¢´Ê£ÄÈ™åÂêéÔºåÂª∂ËøüÂáΩÊï∞Ëé∑ÂæóÂèòÈáèÁöÑÊã∑Ë¥ù 123456func a() &#123; i := 0 defer fmt.Println(i) i++ return&#125; // defer ËØ≠Âè•ÊâìÂç∞0 defer ËØ≠Âè•Ë¢´Ê£ÄÈ™åÂêéÔºåÂª∂ËøüÂåøÂêçÂáΩÊï∞Ëé∑ÂæóÂèòÈáèÁöÑÂú∞ÂùÄ 12345678910111213func b() (i int) &#123; defer func() &#123; i++ &#125;() return 1 // Â∞Ü1 ËµãÁªô i&#125; // ËøîÂõû 2„ÄÇÂà©Áî® defer ËØ≠Âè•‰øÆÊîπÂ§ñÂõ¥ÂáΩÊï∞ÁöÑÂëΩÂêçËøîÂõûÂÄºfunc c() &#123; for i := 0; i &lt; 3; i++ &#123; defer func() &#123; fmt.Print(i) &#125;() &#125; return&#125; // ÊâìÂç∞ 333 defer ËØ≠Âè•Ë¢´Ê£ÄÈ™åÂêéÔºåÂª∂ËøüÂáΩÊï∞ÁöÑÂºïÁî®Ë¢´Êé®ÂÖ•Â†ÜÊ†àÔºåÂΩìÂ§ñÂõ¥ÂáΩÊï∞ËøîÂõûÂêéÔºåÊåâÁÖßÂêéËøõÂÖàÂá∫ÁöÑÈ°∫Â∫èË¢´Ë∞ÉÁî®ÔºàÂç≥‰ΩøÂ§ñÂõ¥ÂáΩÊï∞ÂèëÁîüÈîôËØØÔºåÂ¶Ç panicÔºåÂª∂ËøüÂáΩÊï∞‰ªçÁÑ∂‰ºöË¢´Ë∞ÉÁî®Ôºâ 12345func d() &#123; for i := 0; i &lt; 4; i++ &#123; defer fmt.Print(i) &#125;&#125; // ÊâìÂç∞ 3210 Êõ¥Â§öÁªÜËäÇÂ¶ÇÔºåpanicÔºå recoverÔºàÂè™ËÉΩÁî®Âú®Âª∂ËøüÂáΩÊï∞‰∏≠Ôºâ ÂèÇËÄÉ defer blog„ÄÇ Ôºà5ÔºâgotoÔºö 123456789101112131415161718192021222324LABEL: for &#123; for i := 0; i &lt; 10; i++ &#123; if i &gt; 3 &#123; break LABEL // Ë∑≥Âá∫‰∏éLABELÂêåÁ∫ßÁöÑÂæ™ÁéØÔºåÂç≥Ë∑≥Âá∫Êó†ÈôêÂæ™ÁéØ &#125; &#125; &#125;LABEL: for i := 0; i &lt; 10; i++ &#123; for &#123; continue LABEL &#125; &#125;LABEL: for &#123; for i := 0; i &lt; 10; i++ &#123; if i &gt; 3 &#123; goto LABEL // Â∞ÜÂÜçÊ¨°ËøõÂÖ•Êó†ÈôêÂæ™ÁéØ &#125; &#125; &#125; ÈÄöÂ∏∏Ê†áÁ≠æÊîæÂà∞ goto ÁöÑÂêéÈù¢„ÄÇ ÂàõÂª∫Â∑•Á®ãÁõÆÂΩïÔºö# GoÂ∑•Á®ã‰∏≠ÂÖ±Êúâ‰∏â‰∏™ÈÉ®ÂàÜÔºö srcÔºöÂ≠òÊîægoÊ∫êÁ†ÅÊñá‰ª∂ pkgÔºöÂ≠òÊîæÁºñËØëÂêéÁöÑÂåÖÊñá‰ª∂ binÔºöÂ≠òÊîæÁºñËØëÂêéÁöÑÂèØÊâßË°åÊñá‰ª∂ **Ê≥®ÊÑèÔºö**srcÁõÆÂΩïÈúÄË¶ÅËá™Â∑±ÂàõÂª∫ÔºåpkgÂíåbinÁºñËØëÊó∂‰ºöËá™Âä®ÂàõÂª∫„ÄÇ Ê≠•È™§Ôºö Êñ∞Âª∫Â∑•Á®ãÁõÆÂΩïÔºåmy_projectÔºåÂπ∂Âú®ËØ•ÁõÆÂΩï‰∏ãÂàõÂª∫ srcÁõÆÂΩïÔºõ Êäämy_project Ê∑ªÂä†Âà∞ GOPATHÔºåGOPATH=/home/user/...;my_projectÔºàÂèØ‰ª•ÂêåÊó∂Ê∑ªÂä†Â§ö‰∏™Ë∑ØÂæÑÁõÆÂΩïÔºåLinux‰∏ãÁî®ÂÜíÂè∑:ÈöîÂºÄÔºåwindow‰∏ãÂàÜÂè∑;ÈöîÂºÄÔºâ; Âú® src ‰∏ãÂàõÂª∫my_pkg Âíå my_cmd; ÂåÖÊñá‰ª∂ÊîæÂÖ•Âà∞ my_pkg ‰∏≠ÔºåÊØîÂ¶Ç test.go 1234567package my_pkgimport "fmt" func Test()&#123; fmt.Println("Hello,world!") fmt.Println("You used a function defined in my_package!")&#125; Âú®ÂëΩ‰ª§Ë°åsrcÁõÆÂΩïÔºåÊâßË°å go install my_pkg Â∞ÜÂàõÂª∫ pkg ÁõÆÂΩïÂπ∂Â£∞Êàê my_pkg.a Êñá‰ª∂„ÄÇ my_cmd ‰∏≠ÊîæÂÖ• package mainÔºåÊØîÂ¶Ç hello_world.go 12345678package mainimport( "my_pkg")func main()&#123; my_pkg.Test()&#125; Âú®ÂëΩ‰ª§Ë°åsrcÁõÆÂΩïÔºåÊâßË°å go install my_cmd Â∞ÜÂàõÂª∫ bin ÁõÆÂΩïÂπ∂ÁîüÊàêÂèØÊâßË°åÊñá‰ª∂Êàê hello_world.exe Êñá‰ª∂„ÄÇ ÁõÆÂΩïÁªìÊûÑÔºö src/ $\quad$ my_pkg/ $\qquad$ test.go $\quad$ my_cmd/ $\qquad$ hello_world.go Tips:# import ÂåÖAÁöÑÊó∂ÂÄôÔºå‰ºöËá™Âä®Ë∞ÉÁî®ÂåÖAÁöÑinit()ÂáΩÊï∞ÔºàiÂ≠óÊØçÂ∞èÂÜôÔºâ„ÄÇÂ¶ÇÊûúËØ•ÂåÖAÂèàimport‰∫ÜÂà´ÁöÑÂåÖBÔºå‰ºö‰ºòÂÖàË∞ÉÁî®ÂåÖBÁöÑinit()ÂáΩÊï∞ÔºåÊúÄÂêéÊâçË∞ÉÁî®mainÂåÖÁöÑinit()ÂáΩÊï∞„ÄÇ ‰∏Ä‰∏™ÂåÖÁöÑinit()ÂáΩÊï∞ÂèØ‰ª•ÂÆö‰πâÂ§ö‰∏™ÔºåÊØè‰∏™ÈÉΩ‰ºöË¢´Ë∞ÉÁî®ÔºåË∞ÉÁî®ÁöÑÈ°∫Â∫èÊåâÊñá‰ª∂ÂêçÊéíÂ∫è„ÄÇÂêå‰∏Ä‰∏™Êñá‰ª∂‰πüÂèØ‰ª•ÂÆö‰πâÂ§ö‰∏™initÂáΩÊï∞„ÄÇ ÂÖ∂‰ªñÔºö# fmt.printf verbsÔºö %x %bÔºö16ËøõÂà∂Ôºå2ËøõÂà∂ÊòæÁ§∫Ôºõ%tÔºöÊòæÁ§∫ bool ÁªìÊûúÔºõ%TÔºöÊòæÁ§∫ÂÄºÁöÑÁ±ªÂûãÔºõ%vÔºöÊòæÁ§∫ÂÄºÔºõ%pÔºöÊòæÁ§∫Âú∞ÂùÄÔºõ\nÔºöÊç¢Ë°å Sublime text 3 ‰∏ä‰∏Ä‰∏™ÁºñËæëÂ§Ñ: alt+- ‰∏ã‰∏Ä‰∏™ÁºñËæëÂ§Ñ: alt+shift+- GoSublimeÔºö GoSublimeÂø´Êç∑ÈîÆÂàóË°®Ôºöctrl+.+. (ËøûÂáª .) Êü•ÁúãÂ£∞ÊòéÔºöctrl+.+h ‰ª£Á†ÅË∑≥ËΩ¨Ôºöctrl+shift+Â∑¶ÈîÆ package controlÔºöctrl+shift+p GolandÔºöÈÄÄÂõû‰∏ä‰∏ÄÊ¨°ÂÖâÊ†á‰ΩçÁΩÆÔºöctrl+win+alt+Â∑¶ÈîÆ ÂèÇËÄÉËµÑÊñôÔºö# [1] Êó†Èóª;GoÁºñÁ®ãÂü∫Á°ÄÁ≥ªÂàóËßÜÈ¢ë. [2] Alan A.A. Donovan; Brain W. Kernighan; The Go Programming Language; 2015.]]></content>
      <tags>
        <tag>Golang</tag>
        <tag>ÈïøÊñá</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êú¨Âú∞È°πÁõÆ‰∏ä‰º†Âà∞ Github ‰ªìÂ∫ì„ÄÅGitÂºÄÂèëÂëΩ‰ª§]]></title>
    <url>%2F2018%2F07%2F04%2F2018-7-4%2F</url>
    <content type="text"><![CDATA[ÁîüÊàêÊú¨Âú∞ÁâàÊú¨Â∫ì Ôºà.git Êñá‰ª∂Â§πÔºâ ÂàõÂª∫ SSH key ÂàõÂª∫ GitHub ‰ªìÂ∫ì ‰∏ä‰º†Âà∞ GitHub ‰ªìÂ∫ì Êú¨Âú∞‰øÆÊîπË∑üÊñ∞Âà∞ GitHub ‰ªìÂ∫ì ÁîüÊàêÊú¨Âú∞ÁâàÊú¨Â∫ì Ôºà.git Êñá‰ª∂Â§πÔºâ# 123git initgit add .git commit -m "..." Êìç‰ΩúÂ¶Ç‰∏ãÔºå ÂàõÂª∫ SSH key# Êü•Áúã cÁõò Áî®Êà∑ÁõÆÂΩïÊòØÂê¶ÂåÖÂê´ .ssh ÁõÆÂΩï„ÄÇÂ¶ÇÊûúÂåÖÂê´ÔºåÊâìÂºÄ id_rsa.pub Êñá‰ª∂Âπ∂Â§çÂà∂ÈáåÈù¢ÁöÑÂÜÖÂÆπÔºàÂØÜÈí•Ôºâ Â¶ÇÊûú‰∏çÂåÖÂê´ .ssh ÁõÆÂΩïÔºà‰∏äËø∞Êìç‰Ωú‰ºöÊä•ÈîôÔºâÔºåÈÄöËøáÂ¶Ç‰∏ãÂëΩ‰ª§ÂàõÂª∫ 1ssh-keygen -t rsa -C "your email address" ÂÖ∂‰∏≠ C ‰∏∫Â§ßÂÜô„ÄÇÁÑ∂ÂêéÊåâÁÖßÂâçÈù¢ÁöÑÊñπÂºèÂ§çÂà∂ÂØÜÈí•„ÄÇ Â∞ÜÂØÜÈí•Ê∑ªÂä†Âà∞ GitHub ÂàõÂª∫ GitHub ‰ªìÂ∫ì# ![](https://upload-images.jianshu.io/upload_images/1863961-d05408b0cfc2e198.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/650) ![](https://upload-images.jianshu.io/upload_images/1863961-f7edb952c890e069.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/650) ‰∏ä‰º†Âà∞ GitHub ‰ªìÂ∫ì# 12git remote add origin git@github.com:jiangtaohe/test.gitgit push -u origin master Êú¨Âú∞‰øÆÊîπË∑üÊñ∞Âà∞ GitHub ‰ªìÂ∫ì# Ëã•Êú¨Âú∞Â∑≤ÁªèÂÖ≥ËÅîÂà∞‰ªìÂ∫ìÔºågit remote add origin ÂëΩ‰ª§Ë°åÂéªÊéâ„ÄÇ 1234git remote add origin git@github.com:jiangtaohe/test.gitgit add .git commit -m "..."git push 1git add file fileÁöÑ‰øÆÊîπÊ∑ªÂä†Âà∞ÊöÇÂ≠òÂå∫ 1git commit file -m "Â§áÊ≥®‰ø°ÊÅØ" ÂàõÂª∫Êñ∞ÁöÑÁâàÊú¨Â∫ìÔºåÂπ∂Â∞ÜfileÂú®ÊöÇÂ≠òÂå∫‰∏≠ÁöÑ‰øÆÊîπÊ∑ªÂä†Âà∞Êñ∞ÁöÑÁâàÊú¨Â∫ì‰∏≠ 1git stash Â∞ÜÂ∑•‰ΩúÂå∫ÂíåÊöÇÂ≠òÂå∫ÁöÑ‰øÆÊîπË£ÖÁÆ±ÂêéÂõûÂà∞ÁâàÊú¨Â∫ìÂàùÂßãÁä∂ÊÄÅ(Áõ∏ÂΩì‰∫éÊí§ÈîÄÊâÄÊúâ‰øÆÊîπ) 1git stash pop Â∞Ü git stashË£ÖÁÆ±ÁöÑ‰øÆÊîπÂÄíÂá∫ 1git checkout -- file Êí§ÈîÄfileÂ∑•‰ΩúÂå∫ÁöÑ‰øÆÊîπ 12git checkout --ours (--theirs) filegit add file fileÂèëÁîümergeÂÜ≤Á™ÅÊó∂ÔºåÂÆåÂÖ®ÈááÂèñÊú¨Êñπ(‰ªñÊñπ)ÁöÑ‰øÆÊîπ 1git fetch origin dev:local_dev Ëé∑ÂèñËøúÁ®ãÂàÜÊîØdevÁöÑ‰ª£Á†ÅÔºåÂπ∂Âú®Êú¨Âú∞ÂàõÂª∫Êú¨Âú∞ÂàÜÊîØlocal_dev 1git pull origin dev ÊãâÂèñËøúÁ®ãÂàÜÊîØdev‰∏éÂΩìÂâçÂàÜÊîØÂíåÂπ∂(merge) 1git reset --hard commit_id(Ââç4‰ΩçÊï∞) ÂàáÊç¢Âà∞Êüê‰∏™ÁâàÊú¨Â∫ì 1git branch branch_name Êñ∞Âª∫ÂàÜÊîØ 1git branch -d branch_name Âà†Èô§ÂàÜÊîØ 1git merge branch_name ÂêàÂπ∂ÂàÜÊîØ 123git statusgit loggit reflog 1git remote -v ÊâìÂç∞ËøúÁ®ã‰ªìÂ∫ìÂêçÁß∞ÂíåÂú∞ÂùÄ 1git remote set-url --add origin git@gitlab.com:jiangtaohe/test.git Â¢ûÂä†‰∏Ä‰∏™ËøúÁ®ã‰ªìÂ∫ì]]></content>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈòÖÂéÜ]]></title>
    <url>%2F2018%2F07%2F01%2F2018-7-1%2F</url>
    <content type="text"><![CDATA[ÊúâÊó∂‰∫∫ÁöÑÊàêÈïøÂú®‰∏çÁü•‰∏çËßâ‰∏≠ÂèëÁîüÔºå‰∏î‰∏çËÆ∫ÊòØÁîüÁêÜ‰∏äÁöÑËøòÊòØÂøÉÊô∫‰∏äÁöÑ„ÄÇÊØîÂ¶Ç‰∫∫ÁöÑË∫´È´òÁöÑÂèòÂåñÔºåÂØπ‰∫éÊóÅ‰∫∫ÁúãÊù•ÊòØÂæàÂ§ßÁöÑÊîπÂèòÔºå‰ΩÜÂØπ‰∫éÂΩì‰∫ã‰∫∫ÂèØËÉΩÊòØÁõ∏ÂΩìÊó†ÊÑüÁöÑÔºàÈô§Èùû‰Ω†ÂàªÊÑèÁöÑÂéªÊµãÈáèÔºåÂπ∂ÁîªÂá∫ÊäòÁ∫øÂõæÊù•ÔºåÂæàÂ∞ë‰∫∫‰ºöËøô‰πàÂÅöÂêßÔºâ„ÄÇ‰∏éÂâçËÄÖÁõ∏ÊØîÔºåÂøÉÊô∫ÁöÑ ÂèòÂåñÊõ¥Âä†ÈöêËîΩÔºå‰Ω†ÁîöËá≥ÈÉΩ‰∏çÂ•ΩËÆ∞ÂΩïÊï∞ÊçÆ‰ΩúÂá∫ÂõæË°®Êù•Ôºå‰ΩÜÂπ∂Èùû‰∏ÄÊó†ÊâÄÁü•ÔºåÊúâ‰∫õÊòØÂèØ‰ª•‰ªéÁîüÊ¥ª‰∏≠Á™•ËßÅÁ´ØÂÄ™„ÄÇ Â∞ëÂπ¥Êó∂ÊúüÁöÑÊàëÈùûÂ∏∏ËÆ®ÂéåÂêÉËã¶Áìú„ÄÇ‰Ω†ÂèØËÉΩÂ∑≤ÁªèËÑëË°•Âá∫ÊàëÁ¨¨‰∏ÄÊ¨°ÂêÉËã¶ÁìúÊó∂ÂÄôÁöÑË°®ÊÉÖ‰∫Ü„ÄÇ ‚ÄúÊòØ‰∫∫ÂêÉÁöÑÂêóÔºü‚ÄùÔºåÂΩìÁÑ∂Ê≤°ÊúâËØ¥Âá∫Âè£Ôºå‰ΩÜÊàëÂΩìÊó∂Â∞±ÈÇ£‰πàÊÉ≥ÁöÑ„ÄÇËÆ©ÊàëÊÉäÂ•áÁöÑÊòØÊØç‰∫≤Á´üÂêÉÂæóÊ¥•Ê¥•ÊúâÂë≥ (ÔºÉ¬∞–î¬∞) Â•ΩÂÉèÊàëÂêÉ‰∫Ü‰∏ÄÂè£ÂÅáÁöÑËã¶Áìú„ÄÇËΩ¨Âøµ‰∏ÄÊÉ≥ÔºåÊó¢ÁÑ∂ËøôÁé©ÊÑèÂÑøÈÉΩÂè´Ëã¶Áìú‰∫ÜÔºåÈÇ£ÊòØÂøÖËã¶Êó†Áñë‰∫Ü„ÄÇÈÇ£Êó∂ÁöÑÊàëÂìÅ‰∏çÊù•Ëã¶ÁìúÁöÑÂë≥ÈÅìÔºåËá™ÁÑ∂ÁêÜËß£‰∏ç‰∫ÜÊØç‰∫≤ÁöÑÊúâÊªãÊúâÂë≥‰∫Ü„ÄÇÂêéÊù•ÂÅ∂Â∞îÈÅáÂà∞Ëã¶Áìú‰πü‰ºöÂêÉ‰∏ä‰∏ÄÂ∞èÁâáÔºå‚ÄúÊµÖÂ∞ùËæÑÊ≠¢‚ÄùÔºåÊØïÁ´üËøòÊòØÈÇ£‰∏™Âë≥ÂÑøÂïäÔºåÂπ≤Âòõ‰∫èÂæÖËá™Â∑±„ÄÇÁõ¥Âà∞‰∏ä‰∫ÜÂ§ßÂ≠¶ÂêéÊâçÊúâ‰∫ÜÊîπÂèò„ÄÇ ËØùËØ¥ÊàëÂú®Â§ßÂ≠¶ÂêÉ‰∫ÜÂá†Âπ¥È£üÂ†ÇÔºåÂñúÊ¨¢ÂêÉÁöÑÈÉΩÂêÉÂæóËÖª‰∫Ü„ÄÇÊüêÂ§©ÂøÉË°ÄÊù•ÊΩÆÔºåË¶Å‰∏çÊù•ÁõòÁÇíËã¶ÁìúÂêß„ÄÇÊàëÁ™ÅÁÑ∂ÂèëÁé∞ËøôÁé©ÊÑèÂÑø‰∏çÈÇ£‰πàËã¶‰∫ÜÔºåÁîöËá≥ÊÑüÂà∞Âà´Êúâ‰∏ÄÁï™È£éÂë≥„ÄÇÂéü‰ª•‰∏∫Ë∑üËã¶ÁìúÂìÅÁßçÊúâÂÖ≥ÔºåÊâÄ‰ª•ÂêéÊù•ÂõûÂ§ñÂ©ÜÂÆ∂Êó∂ÔºåÊàëÁâπÊÑèËÆ©Â§ñÂ©ÜÂÅö‰∫ÜÈÅìÁÇíËã¶ÁìúÔºåÂêÉËµ∑Êù•‰πüÊòØ‰∏çÈÇ£‰πàËã¶„ÄÇÊàëÊÑèËØÜÂà∞‚ÄúÁâ©ÊòØ‰∫∫Â∑≤Èùû‚ÄùÔºåËã¶ÁìúËøòÊòØÂπ¥Â∞ëÊó∂ÁöÑËã¶ÁìúÔºåËÄåÊàëÂç¥‰∏ç‰∏ÄÊ†∑‰∫Ü„ÄÇËøôÁßçÂèòÂåñÂΩìÁÑ∂ÊúâÁîüÁêÜ‰∏äÁöÑÔºå‰ΩÜÊõ¥Â§öÁöÑÊòØÂøÉÊô∫‰∏äÁöÑÔºåËÄåÂêéËÄÖÊòØËá™Â∑±ÁöÑÈòÖÂéÜÂú®‰∏çÊñ≠Â¢ûÈïøÁöÑÁªìÊûú„ÄÇÊúâ‰∫õ‰∫ãÊÉÖÈòÖÂéÜÂ§ü‰∫ÜËá™ÁÑ∂Â∞±‰ºö‰∫Ü„ÄÇ Á±ª‰ººÁöÑËøòÊúâÂØπÊàèÊõ≤ÁöÑÁêÜËß£„ÄÇ‰ª•ÂâçÁöÑÊàëÊ†πÊú¨Â∞±Áúã‰∏ç‰∫ÜÊàèÊõ≤ÁöÑÔºåÊó†ÊÑüÂïä„ÄÇÈöèÁùÄÂπ¥ÈæÑÁöÑÂ¢ûÈïøÔºåÊàëÂØπÊàèÊõ≤ÁöÑÊÄÅÂ∫¶‰πüÂèëÁîüÊîπÂèòÔºåËôΩÁÑ∂Ë∞à‰∏ç‰∏äÁÉ≠Áà±Ôºå‰ΩÜÂ§öÂ∞ë‰πüËÉΩÂìÅÂà∞ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∫õÈüµÂë≥„ÄÇÂ∞§ÂÖ∂ÊòØ‰∫¨ÂâßÔºå‰∏çÊÑß‰∏∫ÂõΩÁ≤πÔºåÂ∞ΩÁÆ°Ê≤°ÁúãËøá‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂâßÁõÆÔºå‰πüÂè´‰∏çÂá∫Â§öÂ∞ëÂâßÁõÆÁöÑÂêçÂ≠óÊù•ÔºåÂΩìÊàëË¢´Ë°®ÊºîËÄÖÁöÑ‰∏ÄÈ¢¶‰∏ÄÁ∞á„ÄÅ‰∏ÄÂî±‰∏ÄÊâìÊâÄÁâµÂä®ÁöÑÊó∂ÂÄôÔºåÊàëÁü•ÈÅìÈÇ£Â∞±ÊòØÂ•ΩÁöÑÊàèÊõ≤Ôºå‰∫Ü‰∏çËµ∑ÁöÑËâ∫ÊúØÔºÅ]]></content>
      <tags>
        <tag>ÈöèÊÉ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Áã¨ÊÜ©]]></title>
    <url>%2F2018%2F06%2F19%2F2018-6-19%2F</url>
    <content type="text"><![CDATA[ÊúâÊó∂ÂÄôÊàëÁúüÂú∞ÂñúÊ¨¢ÂÆâÈùôÔºåÁã¨Ëá™‰∏Ä‰∫∫Ôºå‰∏çË¢´ÊâìÊâ∞ÔºåÂÅö‰∏Ä‰∫õÊ≤°ÊúâÊÑè‰πâÁöÑ‰∫ãÊÉÖ„ÄÇ ÂΩì‰∏ãÁÆÄÂçïÂú∞ÂîØÊ∞¥ÔºåÁ¨îÔºåÂ∏ÉËÄåÂ∑≤„ÄÇ]]></content>
      <tags>
        <tag>‰π¶Ê≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËøêÂä®‰∏éÂÜ•ÊÉ≥]]></title>
    <url>%2F2018%2F06%2F14%2F2018-6-14%2F</url>
    <content type="text"><![CDATA[ËøëÊù•ÂèàÊääË∑ëÊ≠•Á∫≥ÂÖ•Êó•Â∏∏„ÄÇË∑ëÁùÄË∑ëÁùÄÔºåË∑ëÂá∫‰∫Ü‰∏ÄÁÇπÂøÉÂæóÔºå‰ªä‰ª•ËÆ∞‰πãÔºåÁÆóÊòØÂØπËá™Â∑±ÂùöÊåÅÈîªÁÇºÁöÑÂãâÂä±„ÄÇ ‰∏ÄÂºÄÂßãÔºåÊàëÊòØË∑üÁùÄÂ∞è‰ºô‰º¥‰∏ÄËµ∑Ë∑ëÊù•ÁùÄÔºåÁÑ∂ÂêéÊúâÂá†Ê¨°Ëá™Â∑±Ë∑ë„ÄÇÂõûÊÉ≥ËøêÂä®Êó∂ÂÄôÁöÑÁä∂ÊÄÅÔºåÊàëÂèëÁé∞Ëá™Â∑±Ë∑ëËøêÂä®Âú∞Êõ¥ÂÖÖÂàÜÔºåÈîªÁÇºÁöÑÊïàÊûú‰πüÊõ¥Â•Ω„ÄÇÊçÆËØ¥Ë∑ëÊ≠•Âçä‰∏™Â∞èÊó∂ÊòØ‰∏ÄÁßçÂæàÂ•ΩÁöÑÈîªÁÇºÊñπÂºèÔºåÂâçÊèêÊòØË¶Å‰øùË¥®‰øùÈáè„ÄÇ‰øùË¥®Â∞±Ë¶ÅÊ±ÇÂÖ®Á®ã‰øùÊåÅÂú®Ë∑ëÁöÑÁä∂ÊÄÅÔºå‰Ω†ÂèØ‰ª•Ë∑ëÂø´ÁÇπÊàñËÄÖÊÖ¢ÁÇπÔºå‰ΩÜ‰∏çË¶ÅÊòØ walking „ÄÇ‰øùÈáèÂ∞±ÊòØÊúÄÂ∞ëË∑ëÂçä‰∏™Â∞èÊó∂ÔºåÂΩìÁÑ∂‰Ω†‰πüÂèØ‰ª•ÊåâÁÖßË∑ØÁ®ãÔºàÂ§öÂ∞ëÂúàË∑ëÈÅìÔºâÊù•ËÆ°„ÄÇÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåËøô‰∏™‰øùË¥®‰øùÈáèÂõ†‰∫∫ËÄåÂºÇÔºå‰Ω†ÈúÄË¶ÅÁªôËá™Â∑±ËÆæÁ´ãÂêàÁêÜÁöÑÁõÆÊ†á‰∏î‰∏çËÉΩÂ§üËΩªÊòìÂ∞±ÂèØËææÊàê„ÄÇ ‰∏ìÊ≥®‰∫éË∑ëÊ≠•ÊúâÂà©‰∫éÁõÆÊ†áÁöÑËææÊàê„ÄÇËøô‰πüËß£Èáä‰∫Ü‰∏∫‰ªÄ‰πàÁã¨Ëá™Ë∑ëÊ≠•ÁöÑÊïàÊûúÊõ¥Â•ΩÔºà‰∏éÂ∞è‰ºô‰º¥Áõ∏‰∫íÈºìÂä±ÂΩìÁÑ∂‰πüÊå∫Â•ΩÔºâÔºåÂõ†‰∏∫‰∏çÁî®ÂàªÊÑèÂéªÂçèË∞ÉÂà´‰∫∫Ôºå‰Ω†ÂèØ‰ª•Êõ¥Âø´ÊâæÂà∞Ëá™Â∑±ÁöÑËäÇÂ•è„ÄÇÂΩì‰Ω†ÊåÅÁª≠Âú∞‰∏ìÊ≥®‰∫éËá™Â∑±ÁöÑË∫´‰ΩìÂíåÊÑüËßâÊó∂Ôºå‰Ω†ÂèØ‰ª•‰Ωì‰ºöÂà∞ÊéßÂà∂‰∏éÊ¥ªÂäõÔºåËÄåÁª¥ÊåÅÊ†áÂáÜÂä®‰ΩúÂèØ‰ª•Âä†Ê∑±ËøôÁßç‰Ωì‰ºö„ÄÇÂõ†Ê≠§Ôºå‰∏çÂ¶®ÊääË∑ëÊ≠•Áúã‰Ωú‰∏ÄÊ¨°ÂÜ•ÊÉ≥ËÆ≠ÁªÉÔºå‰∏ìÊ≥®‰∫éËá™ÊàëÔºå‰Ωì‰ºöÁßØÊûÅÁöÑÂäõÈáè‰πüÊé•ÂèóËÑëÊ∂®ËÖø‰πèÊÑüËßâÔºå‰ΩÜ‰∏çË¶ÅËÆ©Áñ≤Âä≥Âç†ÊçÆ‰∏äÈ£éÔºåÂê¶Âàô‰Ω†Â∞ÜÂä®‰ΩúÂèòÂΩ¢ÔºåÊÑàÊÑü‰∏æÊ≠•Áª¥Ëâ∞„ÄÇ ÈÅøÂÖçÂ§ñÈÉ®Âπ≤Êâ∞Âõ†Á¥†ÊúâÂä©‰∫é‰∏ìÊ≥®ÔºåÊØîÂ¶ÇÊè°ÁùÄÊâãÊú∫ÔºåÊê∫Â∏¶ÁãóÁãóÁ≠âÂ∞ΩÈáèÈÅøÂÖç„ÄÇ ÊúÄÂêéÈúÄË¶ÅÂº∫Ë∞ÉÁöÑÊòØÊ≥®ÊÑèÂÆâÂÖ®„ÄÇÂΩìË∫´‰ΩìÂá∫Áé∞‰∏çÈÄÇÁöÑÊó∂ÂÄôÔºåÂçÉ‰∏á‰∏çË¶ÅÂãâÂº∫„ÄÇÂâç‰∏§‰∫õÂ§©Â∞±ÊúâÂÖ¨‰ºóÂè∑Êä•ÈÅìÊüêÁî∑Â≠êË∑ëÊ≠•ËøáÁ®ã‰∏≠ÊëîÂÄí‰∫Ü‰∏§Ê¨°‰ªçË¶ÅÂùöÊåÅÔºåÊúÄÁªàÂØºËá¥Áåù‰∫°ÁöÑÊùØÂÖ∑„ÄÇËøòÊúâ‰∏äÊñáÊèêÂà∞Áã¨Ëá™ËøêÂä®ÊúâÂä©‰∫é‰∏ìÊ≥®Ôºå‰ΩÜËøòÊòØÈÅøÂÖçÂéª‰∫∫Â∞ëÁöÑÂú∞ÊñπÊ¥ªÂä®ÔºåÂ∞§ÂÖ∂ÊòØÂ•≥ÂêåÂ≠¶„ÄÇÂ≠¶Ê†°ÁöÑÊìçÂú∫ÊòØÁªù‰Ω≥ÁöÑÂú∫ÊâÄÔºåÂõ†‰∏∫ÊúâÂÖ∂‰ªñÁöÑÂêåÂ≠¶ËøòÂèØ‰ª•ÂáèÂ∞ëÂ≠§Áã¨ÊÑüÔºåÂØπËá™Â∑±ÁöÑÂùöÊåÅÊòØÂæàÊúâÂ∏ÆÂä©ÁöÑ„ÄÇ]]></content>
      <tags>
        <tag>ÈöèÊÉ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§öÂÆùÂ°îÁ¢ëÁ≤æÈÄâ]]></title>
    <url>%2F2018%2F06%2F10%2F2018-6-10%2F</url>
    <content type="text"><![CDATA[„ÄäÂ§öÂÆùÂ°îÁ¢ë„ÄãÁ≤æÈÄâ‰∏âÂçÅ‰∏ÉÂ≠ó„ÄÇÊù•Ê∫ê‰∫éÊêúÁãê‚Äú‰π¶Ê≥ïÊÄùËÄÉ‚ÄùÔºå‰ªäËóè‰ª•Êó∂‰π†‰πã„ÄÇ Ê®™„ÄÅÁ´ñÔºö(‰∏â„ÄÅÁéã„ÄÅÂçÅ„ÄÅÂçä„ÄÅ‰∏≠)# Êíá„ÄÅÊç∫Ôºö(Â§ß„ÄÅÊâã„ÄÅÂèà„ÄÅÂπ¥„ÄÅÂÖ•)# ÁÇπÔºö(ÂøÉ„ÄÅÊ∂µ„ÄÅÊµÆ„ÄÅÂπ∂„ÄÅÂ∞ö„ÄÅÂ∞è„ÄÅÊñº„ÄÅÂÖ∂„ÄÅÊÑü)# Èí©„ÄÅÊåëÔºö(ÂÆó„ÄÅÊ±Ç„ÄÅËßÇ„ÄÅË°®„ÄÅËßÅ„ÄÅÂí∏„ÄÅÈ£ü„ÄÅ‰ª•)# ÊäòÔºö(Ëá™„ÄÅÂêç„ÄÅ‰∫Ü„ÄÅÂ±±„ÄÅÁâô„ÄÅÁü£„ÄÅÊØç„ÄÅÂ§ñ„ÄÅÂ•≥)#]]></content>
      <tags>
        <tag>‰π¶Ê≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flask Á¨îËÆ∞]]></title>
    <url>%2F2018%2F05%2F28%2F2018-5-28%2F</url>
    <content type="text"><![CDATA[ÂàõÂª∫ flask instanceÔºà‰πüÂ∞±ÊòØ‰∏Ä‰∏™Â∫îÁî®Ôºâ‰∏§ÁßçÊñπÂºèÔºö1. (module) Âú®URL\my_app.py‰∏≠Âä†ÂÖ• 12from flask import Flaskapp = Flask(__name__) 2.(package) Âú®URL\app_folder\__init__.py‰∏≠Âä†ÂÖ• 12from flask import Flaskapp = Flask(&apos;app_folder&apos;) ÈòÖËØª Miguel Grinberg's book: Flask Web Developent SECOND EDITION ‰∏≠ÁöÑ‰∏Ä‰∏™Â∞èÂ∫îÁî®„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596import os from datetime import datetime # python Ê†áÂáÜÂ∫ìÔºådatetime.utcnow()from flask import Flask, render_template, session, redirect, url_for, flash from flask_bootstrap import Bootstrap # flask Êâ©Â±ïfrom flask_moment import Moment # flask Êâ©Â±ïfrom flask_wtf import FlaskFormfrom wtforms import StringField, SubmitFieldfrom wtforms.validators import DataRequiredfrom flask_sqlalchemy import SQLAlchemyfrom flask_migrate import Migratebasedir = os.path.abspath(os.path.dirname(__file__))app = Flask(__name__) # ÂàõÂª∫Â∫îÁî®app.config['SECRET_KEY'] = 'hard to guess string'app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///' + os.path.join(basedir, 'data.sqlite')app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = Falsebootstrap = Bootstrap(app) # templates Êñá‰ª∂Â§π‰∏≠ base.html Êâ©Â±ï‰∫Ü bootstrap/base.htmlmoment = Moment(app) # ËÆæÁΩÆÊó•Êúü„ÄÅÊó∂Èó¥ÁöÑÊ†ºÂºè„ÄÇmoment.js Áî± base.htmlÂØºÂÖ•db = SQLAlchemy(app) # ÂàõÂª∫Êï∞ÊçÆÂ∫ìmigrate = Migrate(app, db)class Role(db.Model): __tablename__ = 'roles' # Ë°®Ê†ºÂêçÁß∞ id = db.Column(db.Integer, primary_key=True) name = db.Column(db.String(64), unique=True) users = db.relationship('User', backref='role', lazy='dynamic') # ‰∏é User Á±ªÂÖ≥ËÅî„ÄÇbackref Áªô User Á±ªÂàõÂª∫ role Â±ûÊÄßÔºåÂú®ÁîüÊàê User ÂØπË±°Êó∂ÈÄöËøá role ‰∏é‰∏Ä‰∏™ Role ÂØπË±°ÂÖ≥ËÅî„ÄÇ def __repr__(self): # Áõ¥Êé•ËæìÂá∫ÂØπË±°ÊàñËÄÖÈÄöËøá print ÊâìÂç∞ÂØπË±°Êó∂Ôºå‰ø°ÊÅØÈÉΩÊåâ__repr__ÊñπÊ≥ï‰∏≠ÂÆö‰πâÁöÑÊ†ºÂºèËøõË°åÊòæÁ§∫„ÄÇ Á±ª‰ººÁöÑ __str__ Âè™ÊúâÂú® print ÊâìÂç∞Êó∂ÊâçÁîüÊïà„ÄÇ‰æø‰∫éË∞ÉËØï„ÄÇ return '&lt;Role %r&gt;' % self.nameclass User(db.Model): __tablename__ = 'users' id = db.Column(db.Integer, primary_key=True) username = db.Column(db.String(64), unique=True, index=True) role_id = db.Column(db.Integer, db.ForeignKey('roles.id')) def __repr__(self): return '&lt;User %r&gt;' % self.usernameclass NameForm(FlaskForm): name = StringField('What is your name?', validators=[DataRequired()]) # DataRequired()Ë¶ÅÊ±ÇÊèê‰∫§Êó∂Ë°®Âçï‰∏ç‰∏∫Á©∫ submit = SubmitField('Submit') # Ë°®ÂçïÁöÑÊèê‰∫§ÊåâÈíÆ„ÄÇ Âú® render html Êó∂ÔºåÊ∑ªÂä† type='Submit' Â±ûÊÄß@app.shell_context_processordef make_shell_context(): # ËøêË°å flask shell Êó∂Ëá™Âä®‰ªé app(hello.py) ÂØºÂÖ• db, User, Role return dict(db=db, User=User, Role=Role)@app.errorhandler(404) def page_not_found(e): # 404Ôºå500 ‰∏∫ html ÈîôËØØÁ±ªÂûã return render_template('404.html'), 404 # ËøîÂõûÂÖÉÁªÑ@app.errorhandler(500)def internal_server_error(e): return render_template('500.html'), 500'''@app.route('/')def index(): return render_template('index.html', current_time=datetime.utcnow())'''@app.route('/user/&lt;name&gt;')def user(name): return render_template('user.html', name=name) # name=nameÔºå ÂâçËÄÖ‰ª£Ë°® user.html ‰∏≠ÁöÑ name ÂèòÈáèÔºåÂêéËÄÖ‰ª£Ë°®Áî±Áî®Êà∑Âú®ÁΩëÂùÄÊ†è‰∏≠ËæìÂÖ•ÁöÑÂÄºÔºåÂç≥&lt;name&gt;@app.route('/', methods=['GET', 'POST']) def index(): # Post/Redirect/Get patternÔºåinde()Ë¢´Ë∞ÉÁî®‰∏§Ê¨° form = NameForm() # ÁîüÊàêË°®ÂçïÂÆû‰æã if form.validate_on_submit(): # Ë°®ÂçïË¢´Êèê‰∫§‰∏îÈÄöËøáÊâÄÊúâÁöÑ validators ÔºàËøôÈáåÂè™Êúâ DataRequired()‰∏Ä‰∏™ÔºâÊó∂ËøîÂõû True old_name = session.get('name') if old_name is not None and old_name != form.name.data: flash('Looks like you have changed your name!') # ÂΩì‰∏§Ê¨°Êèê‰∫§ÁöÑÂÜÖÂÆπ‰∏çÂêåÊó∂ÊòæÁ§∫ÊèêÁ§∫Ê°Ü„ÄÇflash() ÈáåÁöÑÂèÇÊï∞Ë¢´ Ê®°Êùø base.html ‰∏≠ÁöÑ get_flashed_messages() ÂáΩÊï∞ÊèêÂèñ„ÄÇ session['name'] = form.name.data # ‰øùÂ≠òË°®ÂçïÊèê‰∫§ÁöÑ data return redirect(url_for('index')) # url_for('index') ËøîÂõû root URL„ÄÇredirect() ÂèëÂá∫ÂØπ root URL ÁöÑ GETËØ∑Ê±ÇÔºå‰Ωú‰∏∫ÂØπ POST ËØ∑Ê±ÇÁöÑÂõûÂ∫î„ÄÇ return render_template('index.html', form=form, name=session.get('name')) # ÂØπ redirect() ÁöÑ GETËØ∑Ê±ÇÁöÑÂõûÂ∫î„ÄÇ# Âä†ÂÖ•Êï∞ÊçÆÂ∫ì@app.route('/', methods=['GET', 'POST'])def index(): form = NameForm() if form.validate_on_submit(): user = User.query.filter_by(username=form.name.data).first() # Êü•ËØ¢Ë°®ÂçïÊèê‰∫§ÁöÑÁî®Êà∑Âêç if user is None: # Â¶ÇÊûú‰∏çÂú®Êï∞ÊçÆÂ∫ì‰∏≠Â∞±ÊääÂÆÉÂä†ÂÖ• user = User(username=form.name.data) db.session.add(user) db.session.commit() session['known'] = False else: session['known'] = True session['name'] = form.name.data return redirect(url_for('index')) return render_template('index.html', form=form, name=session.get('name'), known=session.get('known', False))]]></content>
      <tags>
        <tag>Flask</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[How to Create a Personal Blog]]></title>
    <url>%2F2018%2F05%2F22%2F2018-5-22%2F</url>
    <content type="text"><![CDATA[The Structure of The Blog Apply For a Github Account and Create a Repository Create hexo source file download and install create file select and add your theme 2.4 deploy the source file to the github repository When you see this blog post, you have already had some kind of motivation to create a personal blog, maybe it is to possess something, record your ideas or just to be cool. From my observation, most people who have a personal blog are the computer professionals. But this does not mean you have to create your blog with much computer knowledge. The rest of this post will show you the process can be easy and fun. The Structure of The Blog# From the structure, you almost know what to do next. You don't have to build a browser, since your PC has already had one. You just need to do the left two things, applying for a github account as the remote platform to store your blog files, creating the local source file which is the root of your blog. Apply For a Github Account and Create a Repository# Click Github to apply. Create hexo source file# Most of the source file is generated by Hexo which is a popular blog framework and is based on Node.js. We also need Git to deploy the source file to your newly created repository. download and install# Node.js Git Hexo is installed with the Git tool. After installing the Git, click your the right mouse button on the desktop and select the &quot;Git Bash Here&quot; option (means open the bash window in the current directory). Type the following commond to enter your home directory. 1cd ~ Input the following commond to install Hexo. 1npm install hexo-cli -g create file# Create hexo source file . You can make your own file name to replace &quot;hexo_source&quot;. 1hexo init hexo_source select and add your theme# Select a theme from hexo themes library . You can also use hexo-new-vno if you like the theme of my blog üòâ. Then use the commond to add the theme file to your hexo source file you have already created. 12cd hexo_sourcegit clone https://github.com/monniya/hexo-theme-new-vno themes/new-vno You will see the new-vno file at ...\hexo_source\themes\new-vno if not wrong. In fact, hexo has a built-in theme landscape. Open ...\hexo_source\ _config.yml (you can use editors like atom, sublime etc.) and revise some arguments. 1234567891011121314151617181920title: Â∞èÁ¶æ„ÅÆÊñ∞‰∏ñÁïåsubtitle: STAY HUNGRY, STAY FOOLISH!description: (ÔΩûÔø£‚ñΩÔø£)ÔΩû Âó® (‚úø‚óè'‚ó°'‚óè)keywords:author: #your name as authorlanguage: zh-Hans timezone: email: #your email addressurl: https://your_user_name.github.ioroot: /your_user_name.github.io/plugins: hexo-generate-feed # you need input "npm install hexo-generate-feed" in the git bash window to install this plugin.theme: new-vnodeploy: type: git repo: https://github.com/your_user_name/your_user_name.github.io.git branch: master More details of configuration click here. And revise arguments in ...\hexo_source\themes\new-vno\ _config.yml to configure the theme. 12345678910111213menu: ÂΩíÊ°£: /archivesrss: /atom.xmldescription: RSSsocial: weibo: #your weibo address github: #your github address stack_overflow: facebook: twitter: google_plus: To write a blog, you just write a markdown file in .../hexo_source/source/ _posts folder. 1234567---title: How to Create a Personal Blogdate: 2018-05-22 21:37:37tags: hexo---My first blog post ...## The Structure of The Blog 2.4 deploy the source file to the github repository# Install the deploy tool. 1npm install hexo-deployer-git --save Start to deploy. 1hexo clean &amp;&amp; hexo g &amp;&amp; hexo d After the deploy you can visit your blog by typing &quot;your_user_name.github.io&quot; in the browser. You have already built the blog. Congratulations!]]></content>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
</search>
